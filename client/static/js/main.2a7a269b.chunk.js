(this["webpackJsonpsynthona-react-client"]=this["webpackJsonpsynthona-react-client"]||[]).push([[0],{143:function(e,t,a){},199:function(e,t,a){},276:function(e,t,a){},309:function(e,t,a){e.exports=a(594)},318:function(e,t,a){},542:function(e,t,a){},558:function(e,t,a){},567:function(e,t,a){},568:function(e,t,a){},569:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=a(29),s=a(20),l=a(105),u=a(292),d=a(45),p=Object(d.a)(),m=a(16),h=a(17),E=a(19),f=a(18),g=(a(318),a(3)),y=a.n(g),b=(a(42),a(6)),v=a(7),O=a(203),S=a.n(O),w=S.a.CancelToken,N=w.source(),C=S.a.create({baseURL:"http://localhost:9001",withCredentials:!0,cancelToken:N.token}),k=a(106),j=a.n(k),_=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FETCH_NODES"}),t.next=4,C.get("/node/search",{params:{page:e.page,type:e.type,searchQuery:e.searchQuery}});case 4:n=t.sent,a({type:"FETCH_NODES_SUCCESS",payload:n.data,query:e}),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FETCH_NODES_ERROR"}),a({type:"RESET_APP"}),b.a.error("Could not fetch items",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"all"===e.type&&(e.type=null),t.prev=1,a({type:"SEARCH_NODES"}),t.next=5,C.get("/node/search",{params:{page:e.page,type:e.type,searchQuery:e.searchQuery}});case 5:n=t.sent,a({type:"SEARCH_NODES_SUCCESS",payload:n.data,query:e}),p.push("/"),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:"SEARCH_NODES_ERROR"}),a({type:"RESET_APP"}),b.a.error("Could not search nodes",1),p.push("/");case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_NODE"}),t.prev=1,t.next=4,C.patch("/node",{uuid:e.uuid,hidden:e.hidden,searchable:e.searchable,name:e.name,preview:e.preview});case 4:n=t.sent,a({type:"UPDATE_NODE_SUCCESS",uuid:e.uuid,result:n.data.node}),!0===e.hidden&&a({type:"DELETE_NODE_SUCCESS",uuid:e.uuid}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"UPDATE_NODE_ERROR"}),b.a.error("There was a problem saving your changes",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"MARK_NODE_VIEW"}),t.prev=1,t.next=4,C.patch("/node/viewed",{uuid:e.uuid});case 4:a({type:"MARK_NODE_VIEW_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"MARK_NODE_VIEW_ERROR"}),b.a.error("Could not mark node view",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SET_ACTIVE_NODE"}),t.prev=1,t.next=4,C.get("/node",{params:{uuid:e}});case 4:n=t.sent,a({type:"SET_ACTIVE_NODE_SUCCESS",payload:n.data}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"SET_ACTIVE_NODE_ERROR"}),b.a.error("Could not retrieve values",1),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},I=function(){return{type:"CLEAR_ACTIVE_NODE"}},D=function(){return function(){var e=Object(v.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SIGN_OUT"}),e.prev=1,e.next=4,C.get("/auth/signout");case 4:t({type:"RESET_APP"}),b.a.success("Signed Out",1),p.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"SIGN_OUT_ERROR"}),b.a.error("There was a problem signing out",1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_USER_NODE"}),t.prev=1,t.next=4,C.get("/user/username",{params:{username:e}});case 4:return n=t.sent,r=n.data.user,t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(1),b.a.error("Could not fetch user",1);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.page||(a({type:"RESET_ASSOCIATION_LINK_LIST"}),e.page=1),a({type:"FETCH_ASSOCIATIONS_LINK_LIST"}),t.next=5,C.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page}});case 5:n=t.sent,a({type:"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS",payload:n.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"FETCH_ASSOCIATIONS_LINK_LIST_ERROR"}),b.a.error("Could not fetch items",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.page||(a({type:"RESET_ASSOCIATIONS"}),e.page=1),a({type:"FETCH_ASSOCIATIONS"}),t.next=5,C.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page}});case 5:n=t.sent,a({type:"FETCH_ASSOCIATIONS_SUCCESS",payload:n.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:"FETCH_ASSOCIATIONS_ERROR"}),b.a.error("Could not fetch items",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){return function(){var a=Object(v.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C.put("/association/linkstrength",{nodeA:e,nodeB:t});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),b.a.error("There was a problem with your request",1);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})));return function(e){return a.apply(this,arguments)}}()},H=function(e,t){return{type:"SHOW_COMPONENT",payload:{type:e,content:t}}},M=function(e){return{type:"HIDE_COMPONENT",payload:{type:e}}},q=function(){return function(){var e=Object(v.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.a.success("generating export...",2),e.prev=1,t({type:"GENERATE_EXPORT"}),e.next=5,C.put("/port/export/all");case 5:200===(a=e.sent).status&&(b.a.success("generated export",2),t({type:"GENERATE_EXPORT_SUCCESS",payload:a.data}),window.location.replace("/")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"GENERATE_EXPORT_ERROR"}),b.a.error("Could not export instance data",1),p.push("/");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},z=function(e,t,a){return function(){var n=Object(v.a)(y.a.mark((function n(r){var o,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CREATE_FILE_NODE"}),n.prev=1,(o=new FormData).append("image",e),t&&o.append("name",t),a&&o.append("linkedNode",a),n.next=8,C.put("/file",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:if(200!==(i=n.sent).status){n.next=14;break}return r({type:" CREATE_FILE_NODE_SUCCESS",payload:i.data.node}),n.abrupt("return",i.data.node.preview);case 14:b.a.error("There was a problem inserting the file",1);case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),r({type:"CREATE_FILE_NODE_ERROR"}),b.a.error("There was a problem inserting the file",1);case 21:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()},V=(a(288),a(158)),B=(a(41),a(11)),G=a(15),Q=a(26),K=a(39),W=(a(276),B.a.Content),X=B.a.Footer,Y=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getUsername=function(){var e=localStorage.getItem("displayName");return e||"synthona"},e.onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.signIn(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="synthona"}},{key:"render",value:function(){var e=this;return r.a.createElement(B.a,{className:"login-layout"},r.a.createElement(W,{className:"login-content"},r.a.createElement(V.a,{className:"login-card"},r.a.createElement(Q.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:J,onSubmit:this.onSubmit},(function(t){var a=t.isSubmitting;return r.a.createElement(Q.c,{className:"login-form"},r.a.createElement("h1",{className:"login-title"},e.getUsername()),r.a.createElement(Q.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),r.a.createElement(Q.a,{name:"email",component:"div",className:"login-error"}),r.a.createElement(Q.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),r.a.createElement(Q.a,{name:"password",component:"div",className:"login-error"}),r.a.createElement(Q.a,{name:"confirmPassword",component:"div",className:"login-error"}),r.a.createElement("button",{type:"submit",disabled:a,className:"login-submit"},"login"),r.a.createElement(G.a,{to:"/create-account",className:"login-signup"},"create user"))})))),r.a.createElement(X,null))}}]),a}(n.Component),J=K.object().shape({email:K.string().required().email("E-mail is not valid!"),password:K.string().required().min(5,"Password has to be longer than 6 characters!")}),Z=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SIGN_IN"}),t.prev=1,t.next=4,C.put("/auth/login",e);case 4:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"SIGN_IN_SUCCESS",payload:n.data}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"SIGN_IN_ERROR"}),b.a.error("There was a problem signing in",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}})(Y),$=(a(142),a(71)),ee=(a(279),a(160)),te=(a(537),a(298)),ae=(a(539),a(209)),ne=a(84),re=a.n(ne),oe=(a(542),a(543),a(296)),ie=function(e){return r.a.createElement(B.a,null,r.a.createElement(oe.a,{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#272727"},size:"large"}))},ce=ae.a.Item,se=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).signOutHandler=function(){n.props.signOut()},n.toggleSignoutModal=function(){n.state.showSignoutModal?(n.setState({showSignoutModal:!1}),document.body.style.removeProperty("overflow")):n.setState({showSignoutModal:!0})},n.renderDrawerClasses=function(){return!1===n.props.animate?"page-sider no-animation":"page-sider"},n.state={showSignoutModal:null,visible:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.mainSider?r.a.createElement(ie,null):r.a.createElement("div",{className:"sider-container"},r.a.createElement(ee.a,{className:this.renderDrawerClasses(),width:"200px",mask:this.props.showMask,placement:"left",closable:!1,onClose:function(t){return e.props.hideComponent("mainSider")},visible:!!this.props.mainSider&&this.props.mainSider.visible},r.a.createElement(ae.a,{mode:"vertical",defaultSelectedKeys:["1"],className:"sider-menu"},r.a.createElement(ce,null,r.a.createElement(G.a,{to:"/profile/".concat(this.props.user.username)},r.a.createElement(te.a,{className:"nav-avatar",src:this.props.user.avatar||re.a,icon:"user",style:{display:"inline-block",verticalAlign:"middle",marginTop:"0.8rem",width:"2.5rem",height:"2.5rem",objectFit:"contain"}}))),r.a.createElement(ce,{className:"sider-menu-item sider-title"},r.a.createElement(G.a,{to:"/profile/".concat(this.props.user.username)},r.a.createElement("b",null,"Profile"))),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement(G.a,{to:"/",onClick:function(t){return e.props.hideComponent("mainSider")}},"Present")),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement(G.a,{to:"/graph",onClick:function(t){e.props.clearActiveNode(),e.props.hideComponent("mainSider")}},"Graph")),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement("a",{href:"https://patreon.com/synthona",target:"_blank",rel:"noopener noreferrer"},"Updates")),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement(G.a,{to:"/edit/profile/"},"Options")),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement(G.a,{to:"/help",onClick:function(t){return e.props.hideComponent("mainSider")}},"Help")),r.a.createElement(ce,{className:"sider-menu-item"},r.a.createElement(G.a,{to:"#",onClick:this.toggleSignoutModal},"Sign Out")))),r.a.createElement($.a,{title:this.props.user.displayName,visible:this.state.showSignoutModal,className:"signout-modal",centered:!0,onOk:this.signOutHandler,okType:"primary",okText:"Sign Out",closable:!1,onCancel:this.toggleSignoutModal},r.a.createElement("p",null,"Are you sure you want to sign out?")))}}]),a}(n.Component),le=Object(s.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{signOut:D,hideComponent:M,generateInstanceExport:q,clearActiveNode:I})(se),ue=(a(281),a(159)),de=(a(116),a(34)),pe=(a(55),a(5)),me=(a(289),a(88)),he=(a(558),B.a.Header),Ee=me.a.Option,fe=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleInputMode=function(){"query"===n.state.inputMode?n.setState({inputMode:"create",modeIcon:"plus",placeholder:"create",nodeTypes:"text"}):n.setState({inputMode:"query",modeIcon:"search",placeholder:"query",nodeTypes:"all"})},n.toggleMainSider=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.mainSider?n.props.hideComponent("mainSider"):n.props.showComponent("mainSider");case 1:case"end":return e.stop()}}),e)}))),n.commandHandler=function(){switch(n.state.inputMode){case"query":return n.props.searchNodes({searchQuery:n.state.input,type:n.state.nodeTypes});case"create":return n.createNodeHandler();default:return}},n.createNodeHandler=function(){var e;switch(n.props.activeNode&&(e=JSON.stringify(n.props.activeNode)),n.state.nodeTypes){case"text":n.props.createNode({isFile:!1,type:"text",name:n.state.input,preview:"",linkedNode:e}),n.setState({input:""}),p.push("/");break;case"file":n.selectLocalFile(e);break;case"url":null!=n.state.input.match(/\..+(jpeg|jpg|gif|png)/)?(n.props.createNode({isFile:!1,type:"image",name:n.state.input,preview:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})):!function(e){try{new URL(e)}catch(t){return!1}return!0}(n.state.input)?b.a.error("You must enter a valid URL",1):(n.props.createUrlNode({isFile:!1,type:"url",name:n.state.input,preview:n.state.input,path:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})),p.push("/");break;case"collection":n.props.createNode({isFile:!1,type:"collection",name:n.state.input,preview:"",content:n.state.input,linkedNode:e}),n.setState({input:""}),p.push("/");break;default:return}},n.selectLocalFile=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.click(),t.onchange=Object(v.a)(y.a.mark((function a(){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.files[0],a.next=3,n.props.createFileNode(r,n.state.input,e);case 3:n.setState({input:""}),p.push("/");case 5:case"end":return a.stop()}}),a)})))},n.renderSelectBefore=function(){return"query"===n.state.inputMode?r.a.createElement(me.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){return n.setState({nodeTypes:e})}},r.a.createElement(Ee,{value:"all"},"all"),r.a.createElement(Ee,{value:"url"},"urls"),r.a.createElement(Ee,{value:"text"},"text"),r.a.createElement(Ee,{value:"image"},"images"),r.a.createElement(Ee,{value:"collection"},"collections")):r.a.createElement(me.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){return n.setState({nodeTypes:e})}},r.a.createElement(Ee,{value:"text"},"text"),r.a.createElement(Ee,{value:"url"},"url"),r.a.createElement(Ee,{value:"file"},"file"),r.a.createElement(Ee,{value:"collection"},"collection"))},n.state={input:n.props.query.searchQuery||"",nodeTypes:n.props.query.type||"all",createType:null,queryType:null,inputMode:"query",modeIcon:"search",placeholder:"query"},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(he,{className:"page-header"},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-item io-sider-button"},r.a.createElement(G.a,{type:"default",to:"/"},r.a.createElement(pe.a,{type:"home",theme:"outlined"}))),r.a.createElement("li",{className:"nav-item io-sider-button"},r.a.createElement(de.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleMainSider()}},r.a.createElement(pe.a,{type:"bars",theme:"outlined"}))),r.a.createElement("li",{className:"nav-item create-node-button"},r.a.createElement(de.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleInputMode()}},r.a.createElement(pe.a,{type:this.state.modeIcon,theme:"outlined"}))),r.a.createElement("li",{className:"nav-search"},r.a.createElement(ue.a,{onPressEnter:function(t,a){return e.commandHandler()},maxLength:500,value:this.state.input,onChange:function(t){return e.setState({input:t.target.value})},defaultValue:this.props.query.searchQuery||"",placeholder:this.state.placeholder,addonBefore:this.renderSelectBefore(),className:"nav-search-input"})),r.a.createElement("li",{className:"nav-item"},r.a.createElement(de.a,{type:"ghost",shape:"circle",onClick:this.commandHandler,className:"io-enter-button"},r.a.createElement(pe.a,{type:this.state.modeIcon,theme:"outlined"}))))))}}]),a}(n.Component),ge=Object(s.b)((function(e){return{user:e.auth.user,query:e.nodes.query,mainSider:e.components.componentList.mainSider,activeNode:e.nodes.activeNode}}),{signOut:D,searchNodes:A,createNode:function(e,t){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_NODE"}),"text"===e.type&&((n=new j.a).insert(e.name),e.content=JSON.stringify(n)),t.prev=2,t.next=5,C.put("/node",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,content:e.content,linkedNode:e.linkedNode});case 5:r=t.sent,a({type:"CREATE_NODE_SUCCESS",payload:r.data.node}),200===r.status&&"text"===e.type&&p.push("/edit/text/"+r.data.node.uuid),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"CREATE_NODE_ERROR"}),b.a.error("Could not create new item",1),p.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},createFileNode:z,createUrlNode:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("create url node"),a({type:"CREATE_NODE"}),t.prev=2,t.next=5,C.put("/url",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,path:e.path,content:e.content,linkedNode:e.linkedNode});case 5:n=t.sent,console.log(n.data),a({type:"CREATE_NODE_SUCCESS",payload:n.data.node}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"CREATE_NODE_ERROR"}),b.a.error("Could not create new item",1),p.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},showComponent:H,hideComponent:M})(fe),ye=(a(199),a(198),a(50)),be=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).saveName=function(e){n.state.name!==e&&n.props.updateNode({uuid:n.props.node.uuid,name:e}),n.setState({name:e})},n.toggleDeleteModal=function(){n.state.showDeleteModal?n.setState({showDeleteModal:!1}):n.setState({showDeleteModal:!0})},n.deleteHandler=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showDeleteModal:!1}),n.setState({deleting:!0}),e.next=4,n.props.deleteNode(n.props.node.uuid);case 4:n.props.clearActiveNode();case 5:case"end":return e.stop()}}),e)}))),n.toggleHidden=function(){!0===n.state.hidden?(n.props.updateNode({uuid:n.props.node.uuid,hidden:!1}),n.setState({hidden:!1,hiddenIcon:"eye"})):(n.props.updateNode({uuid:n.props.node.uuid,hidden:!0}),n.setState({hidden:!0,hiddenIcon:"eye-invisible"}))},n.toggleSearchable=function(){!0===n.state.searchable?(n.setState({searchable:!1,searchableIcon:"key"}),n.props.updateNode({uuid:n.props.node.uuid,searchable:!1})):(n.setState({searchable:!0,searchableIcon:"search"}),n.props.updateNode({uuid:n.props.node.uuid,searchable:!0}))},n.renderTitle=function(){return n.state.editable?r.a.createElement("input",{type:"text",className:"full-card-title",onBlur:function(){return n.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:n.state.name,onKeyPress:function(e){"Enter"===e.key&&n.setState({editable:null})},onChange:function(e){n.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):r.a.createElement("h3",{className:"full-card-title",onDoubleClick:function(e){e.preventDefault(),n.setState({editable:!0})}},n.state.name)},n.renderContextualButtons=function(){switch(n.props.node.type){case"package":return n.props.node.metadata&&n.props.node.metadata.expanded?r.a.createElement(ye.a,{title:"undo import",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){n.props.removeSynthonaImportsByPackage(n.props.node.uuid)}},r.a.createElement(pe.a,{type:"undo",theme:"outlined",className:"full-card-button"})))):r.a.createElement(ye.a,{title:"unpack synthona export",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){n.props.unpackSynthonaImport(n.props.node.uuid)}},r.a.createElement(pe.a,{type:"appstore",theme:"outlined",className:"full-card-button"}))));default:return}},n.renderExportButton=function(){if("package"!==n.props.node.type)return r.a.createElement(ye.a,{title:"generate export",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){n.props.generateExportByUUID(n.props.node.uuid)}},r.a.createElement(pe.a,{type:"paper-clip",theme:"outlined",className:"full-card-button"}))))},n.state={name:n.props.node.name,hidden:n.props.node.hidden,hiddenIcon:"eye",searchable:n.props.node.searchable,searchableIcon:"search",editable:!1,showDeleteModal:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.node.hidden?this.setState({hiddenIcon:"eye-invisible"}):this.setState({hiddenIcon:"eye"}),this.props.node.searchable?this.setState({searchableIcon:"search"}):this.setState({searchableIcon:"key"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"full-card-options"},this.renderTitle(),r.a.createElement("ul",{className:"full-card-buttons-list"},this.renderContextualButtons(),r.a.createElement(ye.a,{title:"associations",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.node)}},r.a.createElement(pe.a,{type:"branches",theme:"outlined",className:"full-card-button"})))),r.a.createElement(ye.a,{title:"graph",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return window.location.replace("/graph/".concat(e.props.node.uuid))}},r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",className:"full-card-button"})))),this.renderExportButton(),r.a.createElement(ye.a,{title:this.state.hidden?"hidden from feed":"visible in feed",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return e.toggleHidden()}},r.a.createElement(pe.a,{type:this.state.hiddenIcon,theme:"outlined",className:"full-card-button"})))),r.a.createElement(ye.a,{title:this.state.searchable?"searchable":"hidden from search",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return e.toggleSearchable()}},r.a.createElement(pe.a,{type:this.state.searchableIcon,theme:"outlined",className:"full-card-button"})))),r.a.createElement(ye.a,{title:"delete",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return e.toggleDeleteModal()}},r.a.createElement(pe.a,{type:"delete",theme:"outlined",className:"full-card-button delete"}))))),r.a.createElement($.a,{title:"Confirm Deletion",visible:this.state.showDeleteModal,className:"delete-modal",centered:!0,onOk:this.deleteHandler,okType:"danger",okText:"Delete",closable:!1,onCancel:this.toggleDeleteModal},r.a.createElement("p",null,"Are you sure you want to delete ",r.a.createElement("b",null,this.props.node.name||"untitled"),"?")))}}]),a}(n.Component),ve=Object(s.b)(null,{showComponent:H,updateNode:T,unpackSynthonaImport:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.a.success("generating imports...",1),t.prev=1,t.next=4,C.put("/port/import/",{uuid:e});case 4:200===t.sent.status&&(b.a.success("generated import data!",1),window.location.replace("/")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),b.a.error("Could not import instance data",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},deleteNode:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"DELETE_NODE"}),t.prev=1,t.next=4,C.delete("/node",{params:{uuid:e}});case 4:200===t.sent.status&&(p.push("/"),a({type:"DELETE_NODE_SUCCESS",uuid:e}),b.a.success("successfully deleted",1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"DELETE_NODE_ERROR"}),b.a.error("There was a problem deleting the node",1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},clearActiveNode:I,generateExportByUUID:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.a.success("generating export...",2),t.prev=1,a({type:"GENERATE_EXPORT"}),t.next=5,C.put("/port/export/",{uuid:e});case 5:200===(n=t.sent).status&&(b.a.success("generated export",2),a({type:"GENERATE_EXPORT_SUCCESS",payload:n.data}),window.location.replace("/")),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"GENERATE_EXPORT_ERROR"}),b.a.error("Could not export instance data",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},removeSynthonaImportsByPackage:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.a.success("removing imports...",1),t.prev=1,t.next=4,C.patch("/port/export/undo/",{uuid:e});case 4:200===t.sent.status&&(b.a.success("removed imports from this package!",1),window.location.replace("/")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),b.a.error("Could not remove imports for this package",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})(be),Oe=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).renderTitle=function(){return n.state.editable?r.a.createElement("input",{type:"text",className:"nodelist-item-title",onBlur:function(){return n.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:n.state.name,onKeyPress:function(e){"Enter"===e.key&&n.setState({editable:null})},onChange:function(e){n.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):r.a.createElement("h3",{className:"nodelist-item-title",onDoubleClick:function(e){e.preventDefault(),n.setState({editable:!0})}},n.state.name)},n.saveName=function(e){n.state.name!==e&&(n.props.updateNode({uuid:n.props.node.uuid,name:e}),n.props.node.name=e,n.setState({name:e}))},n.state={name:n.props.node.name,editable:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"nodelist-options",style:{display:"flex",width:"100%"}},this.renderTitle(),r.a.createElement("div",{className:"nodelist-options-buttons",style:{marginLeft:"auto"}},r.a.createElement("button",{onClick:function(t){return window.location.replace("/graph/"+e.props.node.uuid)}},r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0"}})),r.a.createElement("button",{onClick:function(t){return e.props.markNodeView(e.props.node)}},r.a.createElement(pe.a,{type:"bulb",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0"}})),r.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.node)}},r.a.createElement(pe.a,{type:"branches",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0"}}))))}}]),a}(n.Component),Se=Object(s.b)(null,{markNodeView:x,showComponent:H,updateNode:T})(Oe),we=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement("p",null,e.node.preview))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("p",null,e.node.preview)));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement(G.a,{to:"/edit/text/".concat(e.node.uuid)},r.a.createElement("p",null,e.node.preview))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ne=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("img",{src:e.node.preview,alt:e.node.name})));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ce=function(e){var t=function(){return e.node.preview?r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",width:"100%"}}):r.a.createElement(pe.a,{type:"bulb",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"3.3rem",height:"100%"}})};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement("a",{href:"/associations/".concat(e.node.uuid),rel:"noopener noreferrer",onClick:function(t){return p.push("/associations/".concat(e.node.uuid))},style:{width:"100%"}},t())));case"preview":return r.a.createElement(n.Fragment,null,e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",width:"100%"}})):r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"bulb",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("a",{href:e.node.path,target:"_blank",rel:"noopener noreferrer",style:{width:"100%"}},t())));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement("a",{href:e.node.path,target:"_blank",rel:"noopener noreferrer",onClick:function(t){return e.handleAssociatonClick()},style:{wordBreak:"break-all"}},e.node.name));default:return}}())},ke=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(pe.a,{type:"file",theme:"outlined",className:"node-card-icon"}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"file",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("a",{href:e.node.preview,target:"_blank",rel:"noopener noreferrer",style:{width:"100%"}},r.a.createElement(pe.a,{type:"file",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"3rem"}}))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()},target:"_blank"},e.node.name));default:return}}())},je=void 0,_e=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(pe.a,{type:"sound",theme:"outlined",className:"node-card-icon"}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"sound",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("a",{href:e.node.preview,target:"_blank",rel:"noopener noreferrer",style:{width:"100%"}},r.a.createElement(pe.a,{type:"sound",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"3rem"}}))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return je.handleLinkClick()}},e.node.name));default:return}}())},Ae=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",className:"node-card-icon"}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("a",{href:e.node.preview,rel:"noopener noreferrer",style:{width:"100%"}},r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"3rem"}}))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Te=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(pe.a,{type:"file-zip",theme:"outlined",className:"node-card-icon"}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(pe.a,{type:"file-zip",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement("a",{href:e.node.preview,target:"_blank",rel:"noopener noreferrer",style:{width:"100%"}},r.a.createElement(pe.a,{type:"file-zip",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"3rem"}}))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},xe=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,function(){var t=0,a=null;switch(e.node.preview&&(t=(a=JSON.parse(e.node.preview)).length),t){case 0:case 1:return r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement(pe.a,{type:"branches",theme:"outlined",className:"node-card-icon"})));case 2:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Fe,{type:a[0].type,element:"preview",node:a[0]})),r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Fe,{type:a[1].type,element:"preview",node:a[1]})))));case 3:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Fe,{type:a[0].type,element:"preview",node:a[0]})),r.a.createElement("li",null,r.a.createElement(Fe,{type:a[1].type,element:"preview",node:a[1]})),r.a.createElement("li",null,r.a.createElement(Fe,{type:a[2].type,element:"preview",node:a[2]})),r.a.createElement("li",null))));case 4:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleClick()}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",null,r.a.createElement(Fe,{type:a[0].type,element:"preview",node:a[0]})),r.a.createElement("li",null,r.a.createElement(Fe,{type:a[1].type,element:"preview",node:a[1]})),r.a.createElement("li",null,r.a.createElement(Fe,{type:a[2].type,element:"preview",node:a[2]})),r.a.createElement("li",null,r.a.createElement(Fe,{type:a[3].type,element:"preview",node:a[3]})))));default:return}}());case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node})));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Re=a(86),Ie=a.n(Re),De=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(Se,{node:e.node}),r.a.createElement(G.a,{to:"/profile/".concat(e.node.path),replace:!0,onClick:function(t){return e.handleClick()}},r.a.createElement("img",{src:e.node.preview||Ie.a,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview||Ie.a,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})));case"full":return r.a.createElement(n.Fragment,null,(console.log(e.node),r.a.createElement("div",{className:"full-node-item"},r.a.createElement(ve,{node:e.node}),r.a.createElement(G.a,{to:"/profile/".concat(e.node.path)},r.a.createElement("p",null,e.node.name)))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{to:"/profile/".concat(e.node.path),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ue=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleNodeClick=function(){var t=e.props.node.uuid;if(e.props.activeNode){var a=e.props.activeNode.uuid;e.props.updateLinkStrength(t,a)}},e.handleAssociatonClick=function(){if(e.props.hideComponent("associationSider"),e.props.siderNodeUUID&&e.props.node.uuid){var t=e.props.siderNodeUUID,a=e.props.node.uuid;e.props.updateLinkStrength(t,a)}},e.renderNode=function(){switch(e.props.type){case"text":return r.a.createElement(we,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"image":return r.a.createElement(Ne,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"url":return r.a.createElement(Ce,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"file":return r.a.createElement(ke,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"audio":return r.a.createElement(_e,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"package":return r.a.createElement(Ae,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"zip":return r.a.createElement(Te,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"collection":return r.a.createElement(xe,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});case"user":return r.a.createElement(De,{element:e.props.element,node:e.props.node,handleClick:e.handleNodeClick,handleAssociatonClick:e.handleAssociatonClick});default:return}},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.renderNode())}}]),a}(n.Component),Fe=Object(s.b)(null,{updateLinkStrength:P,hideComponent:M})(Ue),Le=function(e){return r.a.createElement("div",null,function(){if(e.node)return r.a.createElement(Fe,{type:e.node.type,element:"card",node:e.node,activeNode:e.activeNode})}())},Pe=(a(565),a(210)),He=(a(567),function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleDeleteAssociation=function(){var t=e.props.siderNodeUUID,a=e.props.association.uuid;if(e.props.activeNode)var n=e.props.activeNode.uuid;if(t&&a){e.props.deleteAssociationLink(t,a);var r=window.location.pathname;(r.includes("associations")||r.includes("/edit/text/"))&&n&&n===a?(e.props.removeFromAssociationList(t),e.props.hideComponent("associationSider")):(r.includes("associations")||r.includes("/edit/text/"))&&n&&n===t&&e.props.removeFromAssociationList(a)}},e.renderAssociationLink=function(t){return r.a.createElement("li",{className:"association-list-item"},r.a.createElement(ye.a,{title:t.name,mouseLeaveDelay:0,mouseEnterDelay:.3},r.a.createElement(de.a,{icon:"close",shape:"circle",size:"small",onClick:function(t){return e.handleDeleteAssociation()}}),r.a.createElement(Fe,{type:t.type,element:"association-link",node:t,siderNodeUUID:e.props.siderNodeUUID})))},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderAssociationLink(this.props.association))}}]),a}(n.Component)),Me=Object(s.b)((function(e){return{siderNodeUUID:e.components.componentList.associationSider.content.uuid,activeNode:e.nodes.activeNode}}),{hideComponent:M,deleteAssociationLink:function(e,t){return function(){var a=Object(v.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"DELETE_ASSOCIATION_LINK"}),a.prev=1,a.next=4,C.delete("/association",{params:{nodeA:e,nodeB:t}});case 4:200===(r=a.sent).status&&n({type:"DELETE_ASSOCIATION_LINK_SUCCESS",deletedUUID:r.data.deletedUUID}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n({type:"DELETE_ASSOCIATION_LINK_ERROR"}),b.a.error("There was a problem deleting the node",1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},removeFromAssociationList:function(e){return{type:"REMOVE_FROM_ASSOCIATION_LIST",deletedUUID:e}},updateLinkStrength:P})(He),qe=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).loadMore=function(){e.props.fetchAssociationLinkList({nodeUUID:e.props.nodeUUID,page:e.props.page+1})},e.renderAssociationLinkList=function(){var t=e.props.associations;return null!==t?t.map((function(e){return r.a.createElement(Me,{key:e.uuid,association:e})})):r.a.createElement(ie,null)},e.renderLoadMoreButton=function(){var t=e.props.associations.length;if(e.props.totalItems>t+1)return r.a.createElement("li",{style:{listStyle:"none",marginTop:"0.5rem",textAlign:"center"}},r.a.createElement("button",{style:{margin:"1rem 0",width:"90%",backgroundColor:"#272727",color:"#16e998"},onClick:function(t){return e.loadMore()}},"load more"))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchAssociationLinkList({nodeUUID:this.props.nodeUUID})}},{key:"render",value:function(){return r.a.createElement("ul",{id:"node-info-list",className:"association-list"},this.renderAssociationLinkList(),this.renderLoadMoreButton())}}]),a}(n.Component),ze=Object(s.b)((function(e){return{associations:e.associations.associationLinkList,page:e.associations.associationLinkListPage,totalItems:e.associations.totalLinkListItems}}),{searchNodes:A,fetchAssociationLinkList:F})(qe),Ve=Pe.a.Option,Be=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).createAssociationHandler=function(){var e=Object(v.a)(y.a.mark((function e(t){var a,r,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=n.props.associationSiderData.content,n.state.autocompleteValues.forEach((function(e){e.uuid===t&&a.push(e.uuid)})),o=a[0],i=r.uuid,e.next=7,n.props.createAssociation(i,o);case 7:n.setState({autocompleteOptions:[],autocompleteValues:null,inputText:""}),n.renderAutocompleteValues("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderAutocompleteValues=function(){var e=Object(v.a)(y.a.mark((function e(t){var a,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.associationSiderData.content,n.setState({inputText:t}),e.next=4,n.props.associationAutocomplete({searchQuery:t||"",uuid:a.uuid});case 4:(o=e.sent)&&(n.setState({autocompleteValues:o.map((function(e){return e}))}),i=o.map((function(e){return r.a.createElement(Ve,{key:e.uuid},e.name)})),n.setState({autocompleteOptions:i}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideInfoSider=function(){n.setState({autocompleteOptions:null,autocompleteValues:null,inputText:""}),n.props.hideComponent("associationSider")},n.renderContent=function(){if(n.props.associationSiderData){var e=n.props.associationSiderData.content;return r.a.createElement("div",{className:"node-info-sider-container",style:{textAlign:"center"}},r.a.createElement(ee.a,{className:"node-info-sider",placement:"right",closable:!1,title:e.name,onClose:function(){n.hideInfoSider(),document.documentElement.style.cssText=""},visible:n.props.associationSiderData.visible},r.a.createElement(Pe.a,{style:{width:200},placeholder:"add association",value:n.state.inputText,onChange:function(e){return n.renderAutocompleteValues(e)},onFocus:function(e){return n.renderAutocompleteValues(e)},onSelect:function(e){return n.createAssociationHandler(e)}},n.state.autocompleteOptions),r.a.createElement("br",null),r.a.createElement(ze,{nodeUUID:e.uuid})))}},n.state={autocompleteOptions:null,autocompleteValues:null,inputText:""},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderContent())}}]),a}(n.Component),Ge=Object(s.b)((function(e){return{associationSiderData:e.components.componentList.associationSider,page:e.associations.associationLinkListPage}}),{signOut:D,hideComponent:M,createAssociation:function(e,t){return function(){var a=Object(v.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"CREATE_ASSOCIATION"}),a.next=4,C.put("/association",{nodeUUID:e,linkedNodeUUID:t});case 4:r=a.sent,n({type:"CREATE_ASSOCIATION_SUCCESS",associatedNode:r.data.association.associated,nodeUUID:e}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"CREATE_ASSOCIATION_ERROR"}),b.a.error("Could not create association",1),p.push("/");case 13:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},fetchAssociationLinkList:F,fetchAssociations:L,associationAutocomplete:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.get("/association/autocomplete",{params:{searchQuery:e.searchQuery,nodeUUID:e.uuid}});case 3:return n=t.sent,t.abrupt("return",n.data.nodes);case 7:t.prev=7,t.t0=t.catch(0),b.a.error("Could not search nodes",1),p.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Be),Qe=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).infiniteScroll=function(e){o.endReached()&&!o.props.isFetching&&(o.setState({topOfPage:!1}),o.props.fetchNodes({page:o.props.query.page+1,type:o.props.query.type,searchQuery:o.props.query.searchQuery}))},o.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),r=e+window.pageYOffset;return window.pageYOffset<1&&!o.props.isFetching&&!o.state.topOfPage&&(o.setState({topOfPage:!0}),o.props.fetchNodes({page:1,type:o.props.query.type,searchQuery:o.props.query.searchQuery})),r>=n-733},o.renderNodeList=function(){var e=o.props.nodes;return null!==e?e.map((function(e){return e.uuid?r.a.createElement(Le,{key:e.uuid,node:e}):r.a.createElement(n.Fragment,null)})):r.a.createElement(ie,null)},o.state={topOfPage:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchNodes({page:1,type:this.props.query.type,searchQuery:this.props.query.searchQuery}),window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return r.a.createElement("div",{className:"nodelist-container"},r.a.createElement("ul",{className:"nodelist"},this.renderNodeList()),r.a.createElement(Ge,null))}}]),a}(n.Component),Ke=Object(s.b)((function(e){return{nodes:e.nodes.nodeList,query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{searchNodes:A,fetchNodes:_})(Qe),We=B.a.Content,Xe=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMainSider=function(){if(e.props.mainSider)return r.a.createElement(le,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="home",document.body.style.removeProperty("overflow"),window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(B.a,null,this.renderMainSider(),r.a.createElement(We,{style:{minHeight:"100vh"}},r.a.createElement(ge,null),r.a.createElement("div",{className:"list-container"},r.a.createElement(Ke,null)))))}}]),a}(n.Component),Ye=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(Xe),Je=(a(568),B.a.Content),Ze=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleAvatarModal=function(){!1===n.state.avatarModal?n.setState({avatarModal:!0}):n.setState({avatarModal:!1})},n.initializeFromUrlParams=Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.match.params.username);case 2:(t=e.sent)?(n.setState({initialized:!0,username:t.username,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}),n.props.markNodeView({uuid:t.nodeId}),document.title=t.displayName):(b.a.error("there was a problem loading the user"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.state={initialized:!1,username:"",displayName:"",bio:"",avatar:"",header:"",avatarModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.showComponent("mainSider"),document.title=this.props.match.params.username,this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){document.body.style.removeProperty("overflow"),this.state.username!==this.props.match.params.username&&(document.title=this.props.match.params.username,this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.hideComponent("mainSider")}},{key:"render",value:function(){return this.state.initialized?r.a.createElement("div",{className:"profile-container"},r.a.createElement(le,{showMask:!1,animate:!1}),r.a.createElement(B.a,null,r.a.createElement(Je,{style:{marginBottom:"0"},className:"Profile"},r.a.createElement("div",{className:"profile-card"},r.a.createElement("button",{href:"/profile/".concat(this.state.username)},r.a.createElement("div",{className:"Profile-header"},r.a.createElement("img",{src:this.state.header||Ie.a,alt:"example",draggable:"false"}))),r.a.createElement("div",{className:"Profile-avatar"},r.a.createElement("img",{src:this.state.avatar||re.a,alt:"profile",draggable:"false",onClick:this.toggleAvatarModal})),r.a.createElement("div",{className:"Profile-info"},r.a.createElement("h2",{className:"Profile-displayName"},this.state.displayName,r.a.createElement("div",{className:"verified-sign-container"},r.a.createElement("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",className:"verified-sign"},r.a.createElement("g",null,r.a.createElement("path",{d:"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"}))))),r.a.createElement("i",{className:"Profile-username"},"@".concat(this.state.username)),r.a.createElement("p",{className:"Profile-bio"},this.state.bio))),r.a.createElement($.a,{title:this.state.displayName,visible:this.state.avatarModal,className:"profile-modal",centered:!0,onCancel:this.toggleAvatarModal,closable:!1,footer:null,afterClose:function(){document.body.style.removeProperty("overflow")}},r.a.createElement("img",{src:this.state.avatar||re.a,alt:"avatar"})),r.a.createElement(Ke,null)))):r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(B.a,null,r.a.createElement(B.a,null,r.a.createElement(ie,null))))}}]),a}(n.Component),$e=Object(s.b)((function(e){return{user:e.auth.user}}),{fetchUserByUsername:U,showComponent:H,hideComponent:M,markNodeView:x})(Ze),et=(a(569),B.a.Content),tt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updatePassword=function(e,t){var a=t.setSubmitting;n.togglePasswordModal(),a(!1),n.props.changePassword(e)},n.togglePasswordModal=function(){n.state.showPasswordModal?n.setState({showPasswordModal:!1}):n.setState({showPasswordModal:!0})},n.passwordModal=function(){return r.a.createElement(Q.d,{initialValues:{oldPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:at,onSubmit:n.updatePassword,style:{display:"inline-block"}},(function(e){var t=e.isSubmitting;return r.a.createElement(Q.c,{className:"password-modal-form"},r.a.createElement(Q.b,{type:"password",name:"oldPassword",password:!0,placeholder:"old password",className:"password-modal-field"}),r.a.createElement(Q.a,{name:"oldPassword",component:"div"}),r.a.createElement(Q.b,{type:"password",name:"newPassword",placeholder:"new password",className:"password-modal-field"}),r.a.createElement(Q.a,{name:"newPassword",component:"div"}),r.a.createElement(Q.b,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",className:"password-modal-field"}),r.a.createElement(Q.a,{name:"confirmNewPassword",component:"div"}),r.a.createElement("button",{type:"submit",disabled:t},"change password"))}))},n.initializeFromUrlParams=Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.user.username);case 2:(t=e.sent)?n.setState({initialized:!0,username:t.username,email:n.props.user.email,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}):(b.a.error("there was a problem loading your profile"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.setAvatar=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(v.a)(y.a.mark((function t(){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserAvatar(a);case 4:r=t.sent,n.setState({avatar:r}),t.next=9;break;case 8:b.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.setHeader=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(v.a)(y.a.mark((function t(){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserHeader(a);case 4:r=t.sent,n.setState({header:r}),t.next=9;break;case 8:b.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.renderDisplayName=function(){return r.a.createElement("input",{type:"text",className:"Options-display-name",placeholder:"Display Name",value:n.state.displayName,onChange:function(e){return n.saveDisplayName(e.target.value)}})},n.saveDisplayName=function(e){n.state.displayName!==e&&(n.props.updateUserInfo({username:n.props.user.username,displayName:e}),localStorage.setItem("displayName",e),document.title=e,n.setState({displayName:e}))},n.renderBio=function(){return r.a.createElement("textarea",{type:"text",className:"Options-bio",placeholder:"Bio",value:n.state.bio,onChange:function(e){return n.saveBio(e.target.value)}})},n.saveBio=function(e){n.state.bio!==e&&(n.props.updateUserInfo({username:n.props.user.username,bio:e}),n.setState({bio:e}))},n.renderUsername=function(){return r.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"username",value:n.state.username,onChange:function(e){return n.saveUsername(e.target.value)}})},n.saveUsername=function(e){n.state.username!==e&&(n.props.updateUsername(e),n.setState({username:e}))},n.renderEmail=function(){return r.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"email",value:n.state.email,onChange:function(e){return n.saveEmail(e.target.value)}})},n.saveEmail=function(e){n.state.email!==e&&(n.props.updateEmail(e),n.setState({email:e}))},n.state={showPasswordModal:!1,initialized:!1,username:"",email:"",displayName:"",bio:"",avatar:"",header:""},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.showComponent("mainSider"),document.title="Edit Profile",document.body.style.removeProperty("overflow"),this.initializeFromUrlParams()}},{key:"componentWillUnmount",value:function(){window.getSelection().removeAllRanges(),this.props.hideComponent("mainSider")}},{key:"render",value:function(){var e=this;return r.a.createElement(B.a,{className:"Options-container"},r.a.createElement(le,{showMask:!1,animate:!1}),r.a.createElement(B.a,null,r.a.createElement(et,{className:"Options"},r.a.createElement("div",{className:"Options-card"},r.a.createElement("button",{onClick:this.setHeader},r.a.createElement("div",{className:"Options-header"},r.a.createElement(pe.a,{type:"camera",className:"Options-header-edit-icon"}),r.a.createElement("img",{src:this.state.header||Ie.a,alt:"example",draggable:"false"}))),r.a.createElement("button",{onClick:this.setAvatar},r.a.createElement("div",{className:"Options-avatar"},r.a.createElement(pe.a,{type:"camera",className:"Options-avatar-edit-icon"}),r.a.createElement("img",{src:this.state.avatar||re.a,alt:"profile",draggable:"false"}))),r.a.createElement("div",{className:"Options-info"},r.a.createElement(de.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.togglePasswordModal()}},"change password"),r.a.createElement("br",null),r.a.createElement(de.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){e.props.history.push("/profile/".concat(e.props.user.username)),e.props.generateInstanceExport()}},"export all user data"),r.a.createElement("br",null),this.renderDisplayName(),this.renderUsername(),this.renderEmail(),this.renderBio(),r.a.createElement(de.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"4rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.props.history.push("/profile/".concat(e.props.user.username))}},"done"),r.a.createElement($.a,{title:"change password",visible:this.state.showPasswordModal,className:"password-modal",centered:!0,footer:null,closable:!1,onCancel:this.togglePasswordModal},this.passwordModal()))),r.a.createElement(Ke,null))))}}]),a}(n.Component),at=K.object().shape({oldPassword:K.string().required("old password is required"),newPassword:K.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmNewPassword:K.string().required("please confirm new password").oneOf([K.ref("newPassword")],"Your passwords don't match")}),nt=Object(s.b)((function(e){return{user:e.auth.user}}),{fetchUserByUsername:U,updateUserInfo:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,C.patch("/user/info",{username:e.username,bio:e.bio,displayName:e.displayName});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),b.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateUserAvatar:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_AVATAR"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,C.patch("/user/avatar",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_AVATAR_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:b.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),b.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUserHeader:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_HEADER"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,C.patch("/user/header",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_HEADER_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:b.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_HEADER_ERROR"}),b.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUsername:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,C.patch("/user/username",{username:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),b.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateEmail:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,C.patch("/user/email",{email:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),b.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},changePassword:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.patch("/auth/password",{oldPassword:e.oldPassword,newPassword:e.newPassword});case 3:200===t.sent.status&&b.a.success("changed password",1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),b.a.error("Could not update password",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},showComponent:H,generateInstanceExport:q,hideComponent:M})(tt),rt=(a(143),B.a.Content),ot=function(e){return r.a.createElement(B.a,{className:"page-content"},r.a.createElement(rt,{style:{backgroundColor:"#272727"}},e.children))},it=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(ge,null),r.a.createElement(B.a,null,r.a.createElement(le,null),r.a.createElement(ot,null)))}}]),a}(n.Component),ct=a(145),st=a(76),lt=a.n(st),ut=(a(589),function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).infiniteScroll=function(e){var t=o.props.associations.length;o.endReached()&&o.props.activeNode&&t<o.props.totalNodes&&!o.props.isFetching&&(o.setState({topOfPage:!1}),o.props.fetchAssociations({page:o.props.page+1,nodeUUID:o.props.activeNode.uuid}))},o.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),r=e+window.pageYOffset;return window.pageYOffset<1&&!o.props.isFetching&&!o.state.topOfPage&&(o.setState({topOfPage:!0}),o.props.fetchAssociations({page:1,nodeUUID:o.props.activeNode.uuid})),r>=n-733},o.renderNodes=function(){var e=o.props.associations;return null!==e?e.map((function(e){return r.a.createElement(Le,{key:e.uuid,node:e,activeNode:o.props.activeNode})})):r.a.createElement(ie,null)},o.renderList=function(){return o.props.totalNodes>0?r.a.createElement("ul",{style:{backgroundColor:"black"},className:"nodelist"},o.renderNodes()):o.props.totalNodes<0?r.a.createElement(n.Fragment,null):void 0},o.state={topOfPage:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderList(),r.a.createElement(Ge,null))}}]),a}(n.Component)),dt=Object(s.b)((function(e){return{associations:e.associations.associationList,isFetching:e.associations.isFetching,activeNode:e.nodes.activeNode,page:e.associations.associationListPage,totalNodes:e.associations.totalAssociationListItems}}),{searchNodes:A,fetchAssociations:L})(ut),pt=(a(590),B.a.Content),mt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onPaste",value:function(e){var t=this,a=window.pageYOffset,n=window.pageXOffset;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),o=(new j.a).retain(r.index);this.container.style.top=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0).toString()+"px",this.container.focus(),setTimeout((function(){t.quill.selection.update(st.Quill.sources.SILENT),o=o.concat(t.convert()).delete(r.length),t.quill.updateContents(o,st.Quill.sources.USER),t.quill.setSelection(o.length()-r.length,st.Quill.sources.SILENT);var e=t.quill.getBounds(o.length()-r.length,st.Quill.sources.SILENT);t.quill.scrollingContainer.scrollTop=e.top,window.scrollTo({top:a,left:n})}),1)}}}]),a}(st.Quill.import("modules/clipboard"));st.Quill.register("modules/clipboard",mt,!0);var ht,Et,ft=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).ref=function(e){n.quill=e},n.componentDidUpdate=Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),t=n.props.match.params.uuid,n.state.uuid!==t&&!1===n.state.initializing&&(n.setState({text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!0,readOnly:!0}),n.regeneratePreview(),n.initializeFromUrlParams());case 3:case"end":return e.stop()}}),e)}))),n.initializeFromUrlParams=Object(v.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo({top:0}),t=n.props.match.params.uuid,n.setState({uuid:t}),e.next=5,n.props.setActiveNode(t);case 5:n.props.nodeData&&n.props.nodeData.content?(document.title=n.props.nodeData.name||"Untitled",a=JSON.parse(n.props.nodeData.content),n.setState({text:a,name:n.props.nodeData.name,initializing:!1,readOnly:!1}),n.props.markNodeView(n.props.nodeData),n.quill.getEditor().history.clear(),n.props.fetchAssociations({nodeUUID:t})):(n.setState({error:!0}),n.props.history.push("/"));case 6:case"end":return e.stop()}}),e)}))),n.expandHandler=function(){null===n.state.expanded?(n.setState({expanded:"expanded"}),localStorage.setItem("expanded","expanded")):(n.setState({expanded:null}),localStorage.removeItem("expanded"))},n.exitHandler=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.regeneratePreview();case 2:n.props.history.push("/");case 3:case"end":return e.stop()}}),e)}))),n.regeneratePreview=function(){if(!n.state.deleting&&!n.state.error&&null!==n.state.uuid){var e=n.quill.getEditor().getText().substring(0,500);n.props.processTextNode({uuid:n.state.uuid,preview:e})}},n.selectLocalImage=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png"]),e.click(),e.onchange=Object(v.a)(y.a.mark((function t(){var a,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=9;break}return t.next=4,n.props.createFileNode(a,null,JSON.stringify(n.props.nodeData));case 4:r=t.sent,o=n.quill.getEditor().getSelection(),n.quill.getEditor().insertEmbed(o.index,"image",r),t.next=10;break;case 9:b.a.error("The file must be an image",1);case 10:case"end":return t.stop()}}),t)})))},n.isImageUrl=function(e){return new RegExp(/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)?/gi).test(e)},n.matcherImageHandler=function(e,t){if(n.isImageUrl(e.src)){var a=e.src;return(new j.a).insert({image:a})}return new j.a},n.modules={toolbar:{container:[[{header:[1,2,3,4,5,!1]}],[{font:[]}],[{indent:"-1"},{indent:"+1"}],["bold","italic","underline","strike"],[{color:["#fff","#bbbbbb","#272727","#a80b44","#ff0062","#df1f95","#9933ff","#7fba00","#45d458","#31d697","#00a4ef","#4178df","#000080","#56007a","#007c25","#e2d58a","#f8cc52","#fff12b","#ff4500","#f40000","#a0390d"]},{background:[]}],[{align:null},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],["code-block","blockquote"],["link","image","video"],["clean"],["expand","exit"]],handlers:{expand:n.expandHandler,exit:n.exitHandler,image:n.selectLocalImage}},clipboard:{matchVisual:!1,matchers:[["img",n.matcherImageHandler]]}},n.allowedFormats=["header","font","indent","bold","italic","underline","strike","color","background","align","list","script","code-block","blockquote","link","image","video"],n.renderHeader=function(){if(null===n.state.expanded&&n.props.nodeData)return r.a.createElement(ve,{node:n.props.nodeData})},n.state={text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!1,readOnly:!0},n.handleChange=n.handleChange.bind(Object(ct.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.body.style.overflow="auto",document.body.style.height="100%",document.documentElement.style.height="100%",document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),this.initializeFromUrlParams()}},{key:"handleChange",value:function(e,t,a,n){if(n.getContents()!==this.state.text&&!1===this.state.initializing){var r=JSON.stringify(n.getContents());this.props.editTextNode({uuid:this.props.match.params.uuid,content:r}),this.setState({text:e})}}},{key:"componentWillUnmount",value:function(){document.body.style.overflow=null,document.body.style.height=null,document.documentElement.style.overflow=null,document.documentElement.style.height=null,window.getSelection().removeAllRanges()}},{key:"render",value:function(){return this.props.isLoading?r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(B.a,null,r.a.createElement(B.a,null,this.renderHeader(),r.a.createElement(ie,null)))):r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(pt,{className:"text-editor-content "+this.state.expanded},this.renderHeader(),r.a.createElement(lt.a,{value:this.state.text,onChange:this.handleChange,modules:this.modules,ref:this.ref,readOnly:this.state.readOnly,formats:this.allowedFormats,scrollingContainer:"body"}),r.a.createElement(Ge,null),r.a.createElement(dt,null)))}}]),a}(n.Component),gt=Object(s.b)((function(e){return{nodeData:e.nodes.activeNode,isLoading:e.nodes.isFetching}}),{editTextNode:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"EDIT_TEXT_NODE"}),t.prev=1,t.next=4,C.patch("/text",{uuid:e.uuid,content:e.content});case 4:a({type:"EDIT_TEXT_NODE_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"EDIT_TEXT_NODE_ERROR"}),b.a.error("There was a problem saving your changes",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},processTextNode:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"PROCESS_TEXT_NODE"}),t.prev=1,t.next=4,C.patch("/text/process",{uuid:e.uuid,preview:e.preview});case 4:a({type:"PROCESS_TEXT_NODE_SUCCESS",node:e,preview:e.preview}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"PROCESS_TEXT_NODE_ERROR"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},createFileNode:z,updateNode:T,setActiveNode:R,fetchAssociations:L,markNodeView:x})(ft),yt=B.a.Footer,bt=function(){return r.a.createElement(yt,{className:"page-footer"})},vt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(ge,null),r.a.createElement(B.a,null,r.a.createElement(ot,null,"Collections")),r.a.createElement(bt,null))}}]),a}(n.Component),Ot=B.a.Content,St=B.a.Footer,wt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.createAccount(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="Create Account"}},{key:"render",value:function(){return r.a.createElement(B.a,{className:"login-layout"},r.a.createElement(Ot,{className:"login-content"},r.a.createElement(V.a,{className:"login-card"},r.a.createElement(Q.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:Nt,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return r.a.createElement(Q.c,{className:"login-form"},r.a.createElement("h1",{className:"login-title"},r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}},"\u2728"),"create user",r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingLeft:"0.5rem"}},"\u2728")),r.a.createElement(Q.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),r.a.createElement(Q.a,{name:"email",component:"div"}),r.a.createElement(Q.b,{type:"username",name:"username",placeholder:"username",className:"login-field"}),r.a.createElement(Q.a,{name:"username",component:"div"}),r.a.createElement(Q.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),r.a.createElement(Q.a,{name:"password",component:"div"}),r.a.createElement(Q.b,{type:"password",name:"confirmPassword",placeholder:"confirm password",className:"login-field"}),r.a.createElement(Q.a,{name:"confirmPassword",component:"div"}),r.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"create account"),r.a.createElement(G.a,{to:"/",style:{textAlign:"center"},className:"login-signup"},"back to login"))})))),r.a.createElement(St,null))}}]),a}(n.Component),Nt=K.object().shape({email:K.string().email("E-mail is not valid!").required("email is required"),username:K.string().required("username is required"),password:K.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmPassword:K.string().required("please confirm password").oneOf([K.ref("password")],"Your passwords don't match")}),Ct=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{createAccount:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_ACCOUNT"}),t.prev=1,t.next=4,C.put("/auth/signup",e);case 4:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"CREATE_ACCOUNT_SUCCESS",payload:n.data}),p.push("/"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:"CREATE_ACCOUNT_ERROR"}),b.a.error("There was a problem creating the account",1),p.push("/");case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}})(wt),kt=(a(591),function(e){return r.a.createElement(n.Fragment,null,function(){if(e.node)return r.a.createElement(Fe,{type:e.node.type,element:"full",node:e.node})}())}),jt=B.a.Content,_t=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,window.scrollTo({top:0}),e.next=4,n.props.setActiveNode(t);case 4:return null!==n.props.activeNode&&n.props.markNodeView(n.props.activeNode),e.next=7,n.props.fetchAssociations({nodeUUID:t});case 7:null!==n.props.associations&&null!==n.props.activeNode?(n.setState({initialized:!0,uuid:t}),n.props.activeNode.type&&"collection"===n.props.activeNode.type&&n.regenerateCollectionPreview(n.props.activeNode,n.props.associations),document.title=n.props.activeNode.name):(b.a.error("there was a problem loading the associations"),n.props.history.push("/"));case 8:case"end":return e.stop()}}),e)}))),n.regenerateCollectionPreview=function(){var e=Object(v.a)(y.a.mark((function e(t,a){var r,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{if(t&&a){for(r=0,i=[];r<a.length&&i.length<4;)"collection"!==(o=a[r]).type&&"user"!==o.type&&i.push({type:o.type,preview:o.preview}),r++;n.props.updateNode({uuid:t.uuid,preview:JSON.stringify(i)})}}catch(c){n.props.history.push("/")}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.renderNode=function(){return null!==n.state.uuid&&n.state.uuid===n.props.activeNode.uuid?r.a.createElement(kt,{node:n.props.activeNode}):r.a.createElement(ie,null)},n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(le,null)},n.state={initialized:!1,uuid:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.clearActiveNode()}},{key:"render",value:function(){return r.a.createElement(B.a,{className:"page-layout"},this.renderMainSider(),r.a.createElement(B.a,null,r.a.createElement(jt,{style:{paddingTop:"0",backgroundColor:"black",minHeight:"100vh"}},r.a.createElement(ge,null),r.a.createElement("div",{className:"list-container"},this.renderNode()),r.a.createElement(dt,null))))}}]),a}(n.Component),At=Object(s.b)((function(e){return{associations:e.associations.associationList,isLoading:e.nodes.isFetching,activeNode:e.nodes.activeNode,mainSider:e.components.componentList.mainSider}}),{setActiveNode:R,clearActiveNode:I,fetchAssociations:L,markNodeView:x,updateNode:T})(_t),Tt=a(304),xt=a(603),Rt=a(605),It=a(211),Dt=a(599),Ut=a(604),Ft=a(600),Lt=a(601),Pt=a(602),Ht=a(208),Mt=(a(592),B.a.Content),qt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,e.next=3,n.props.fetchGraphData({anchorNode:t,type:n.props.query.type,searchQuery:n.props.query.searchQuery});case 3:if(null===n.props.graphData){e.next=13;break}if(n.setState({initialized:!0,uuid:t}),n.renderGraph(),!t){e.next=11;break}return e.next=9,n.props.setActiveNode(t);case 9:return e.next=11,n.props.fetchAssociations({nodeUUID:t});case 11:e.next=15;break;case 13:b.a.error("there was a problem loading the data"),n.props.history.push("/");case 15:case"end":return e.stop()}}),e)}))),n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(le,null)},n.renderAssociationSider=function(){if(n.props.associationSider)return r.a.createElement(Ge,null)},n.renderAssociationList=function(){if(n.props.associations&&n.props.associations.length>0&&n.props.activeNode)return r.a.createElement(dt,null)},n.renderGraph=Object(v.a)(y.a.mark((function e(){var t,a,r,o,i,c,s,l,u,d,p,m,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(e){var t=e.transform;u.attr("transform",t)},t=n.props.graphData.nodes,a=n.props.graphData.associations,r=window.innerHeight,o=window.innerWidth,i=Object(It.a)(t).force("link",Object(Dt.a)(a).id((function(e){return e.id}))).force("charge",Object(Ut.a)().strength(-1e5/t.length)).force("x",Object(Ft.a)()).force("y",Object(Lt.a)()).force("center",Object(Pt.a)()),c=Ht.b.scale(.6).translate(0,-15),s=Object(Ht.a)().scaleExtent([.3,3.7]).on("zoom",h),l=Object(Tt.a)(n.node).append("svg").attr("class","graph-svg").attr("viewBox",[-o/2,-r/2,o,r]),u=l.append("g"),d=u.append("g").attr("stroke","grey").attr("stroke-opacity",.6).selectAll("line").data(a).join("line").attr("class","graph-link").attr("stroke-width",(function(e){return Math.sqrt(e.value)})),p=u.append("g").selectAll("circle").data(t).join("g").call(n.drag(i)).append("circle").on("dblclick",(function(e,t){window.location.replace("/graph/"+t.uuid)})).on("contextmenu",(function(e,t){e.preventDefault(),"text"===t.type?window.location.replace("/edit/text/"+t.uuid):"user"===t.type?window.location.replace("/profile/".concat(n.props.user.username)):window.location.replace("/associations/"+t.uuid)})).attr("r",7).attr("cursor","none").attr("fill","#16e998").attr("class","graph-node"),m=Object(xt.a)("g g g").append("text").text((function(e){return e.name.substring(0,100)})).attr("font-size","0.8rem").attr("cursor","grab").attr("class","graph-text"),l.call(s).call(s.transform,c),i.on("tick",(function(){d.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),p.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),m.attr("x",(function(e){return e.x+7})).attr("y",(function(e){return e.y-7}))})),e.abrupt("return",l.node());case 16:case"end":return e.stop()}}),e)}))),n.drag=function(e){return Object(Rt.a)().on("start",(function(t,a){t.active||e.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(t,a){t.active||e.alphaTarget(0),a.fx=null,a.fy=null}))},n.state={initialized:!1,uuid:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"render",value:function(){var e=this;return r.a.createElement(B.a,{className:"page-layout"},this.renderMainSider(),this.renderAssociationSider(),r.a.createElement(B.a,null,r.a.createElement(Mt,{style:{paddingTop:"0"}},r.a.createElement("div",{className:"graph-container",ref:function(t){return e.node=t}}),this.renderAssociationList())))}}]),a}(n.Component),zt=Object(s.b)((function(e){return{associations:e.associations.associationList,user:e.auth.user,activeNode:e.nodes.activeNode,graphData:e.graph.graphData,loading:e.graph.isFetching,associationSider:e.components.componentList.associationSider,mainSider:e.components.componentList.mainSider,nodeList:e.nodes.nodeList,query:e.nodes.query,isFetching:e.nodes.isFetching}}),{fetchNodes:_,showComponent:H,fetchGraphData:function(e){return function(){var t=Object(v.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FETCH_GRAPH_DATA"}),t.next=4,C.get("/node/graph",{params:{anchorNode:e.anchorNode,type:e.type,searchQuery:e.searchQuery}});case 4:n=t.sent,a({type:"FETCH_GRAPH_DATA_SUCCESS",payload:n.data,query:e}),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FETCH_GRAPH_DATA_ERROR"}),a({type:"RESET_APP"}),b.a.error("Could not fetch items",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},fetchAssociations:L,setActiveNode:R})(qt),Vt=(a(593),B.a.Content),Bt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMainSider=function(){if(e.props.mainSider)return r.a.createElement(le,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="Help",document.body.style.removeProperty("overflow")}},{key:"render",value:function(){return r.a.createElement(B.a,{className:"page-layout"},r.a.createElement(B.a,null,this.renderMainSider(),r.a.createElement(Vt,{style:{minHeight:"100vh",backgroundColor:"#e0dcc7",textAlign:"left",paddingBottom:"3rem"}},r.a.createElement("div",{style:{position:"fixed",width:"100%"}},r.a.createElement(ge,null)),r.a.createElement("div",{className:"help-container",style:{padding:"5.5rem 17rem 1rem"}},r.a.createElement("p",null,"Hello there! Welcome to the help page! This is where you can get the help you need, so you can rest easy. Allow me to explain exactly what is going on here. First things first, you are on the help page! You can leave whenever you want or if you like you can hang out here for a while. It's a nice place to hang out. There's all kinds of wonderful things you learn while you are here."),r.a.createElement("h2",null,"What is Synthona?"),r.a.createElement("p",null,"Synthona allows you to create, explore, and share associative-maps made out of content! That might sound confusing but it's really not so bad once you get familiar. It's like learning to read, once you understand Synthona interactions with the interface become second nature."," ",r.a.createElement("b",null,"The good news is that you cannot mess anything up, Synthona will not make any changes to any content outside itself.")," ","Even if you upload a file, Synthona will only make a copy, the original file will still exist on your computer. The worst thing you can do is delete something from Synthona, but that action is clearly marked by a garbage can."),r.a.createElement("h2",null,"What should I do first?"),r.a.createElement("p",null,"You can start by uploading or creating some content, you do this by clicking the rainbow button at the top of the page. This will transform it into a plus sign and put the IO bar into ",r.a.createElement("i",null,"create-mode"),"."),r.a.createElement("p",null,"From there, to the left of the input field there is a dropdown menu which contains some content types. You can select one of those which will prepare the IO bar to create that content. For most content types you can type a name for the node you're about to create into the input field and it will automatically be added to the generated node. The exception is urls which don't allow a name on creation since you have to paste the url into that space instead. To finish creating a node, hit enter in the input bar or click the button to the right side of the text input. That's it! Now it's in the system."),r.a.createElement("h2",null,"What are nodes and associations?"),r.a.createElement("p",null,"Synthona is premised on the idea that all content is a ",r.a.createElement("i",null,"node")," which can be associated, connected, related, to any other piece of content. A connection between any two pieces of content is called an ",r.a.createElement("i",null,"association"),". If you understand these two ideas, you understand Synthona! That's all there is to it, the rest is just building on these two assumptions."),r.a.createElement("h2",null,"How do I edit the name of a node?"),r.a.createElement("p",null,"If you double click the title it should turn into an editable text field."),r.a.createElement("h2",null,"What are do all these icons mean?"),r.a.createElement("p",null,"If you hover over most icons for a couple of seconds a tooltip should show up which explains what the button does, but I've written out a guide here as well so you can be confident of what your clicks will accomplish."),r.a.createElement("h3",null,"1) Associations ",r.a.createElement(pe.a,{type:"branches",theme:"outlined"})),r.a.createElement("p",null,"This is the icon you'll see whenever associations are in-play. It mostly appears on node cards in the node explorer. Clicking it will typically bring up a menu which lists the associations for a given node and allows you to add new ones."),r.a.createElement(pe.a,{type:"branches",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"2) Light Bulb ",r.a.createElement(pe.a,{type:"bulb",theme:"outlined"})),r.a.createElement("p",null,'The light bulb is the universal symbol for having a good idea, which is why it was chosen as the "good idea" button. Whenever you click the light bulb icon the node in question will be pushed to the top of the home page. You can click this button as much as you want and nothing bad will happen!'),r.a.createElement(pe.a,{type:"bulb",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"3) Visible ",r.a.createElement(pe.a,{type:"eye",theme:"outlined"})),r.a.createElement("p",null,"Clicking this icon allows you to toggle whether a node is visible on the homepage or not. Nodes which are hidden from the homepage will only be accessible through their associations. This allows you to hide content behind other content."),r.a.createElement(pe.a,{type:"eye",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"4) Searchable ",r.a.createElement(pe.a,{type:"search",theme:"outlined"})),r.a.createElement("p",null,"Clicking this icon allows you to toggle whether a node will appear in a search or not."),r.a.createElement(pe.a,{type:"search",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"5) Delete ",r.a.createElement(pe.a,{type:"delete",theme:"outlined"})),r.a.createElement("p",null,"This is the garbage can, it lets you put delete nodes from the system! Not bad, pretty good!"),r.a.createElement(pe.a,{type:"delete",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"6) Synthona Package ",r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined"})),r.a.createElement("p",null,"Synthona packages allow you to share nodes and their associations between computers as ",r.a.createElement("i",null,".synth")," files, which can be re-imported by anyone into any synthona instance on any computer. These files are represented within synthona by this icon. If you click this icon, it will generate an export package based on the node you clicked it from. Synthona packages contain the node in question, all the nodes associated with it, and their associations with each other."),r.a.createElement(pe.a,{type:"deployment-unit",theme:"outlined",className:"help-icon"}),r.a.createElement("h3",null,"7) Unpack Synthona Package ",r.a.createElement(pe.a,{type:"appstore",theme:"outlined"})),r.a.createElement("p",null,'If you have created or imported a Synthona package into your Synthona instance, you will see this icon on the package page. Clicking it will "unpack" the package, importing all the nodes and associations it contains into your profile. Once you click this, it will be replaced by an "undo" ',r.a.createElement(pe.a,{type:"undo",theme:"outlined"})," ",'icon which will allow you to "repack" the package. The undo option will delete all the nodes which unpacking created, which makes unpacking a reversible operation.'),r.a.createElement(pe.a,{type:"appstore",theme:"outlined",className:"help-icon"}),r.a.createElement("h2",null,"Can I export all my data?"),r.a.createElement("p",null,'Yes, if you go to the options menu there is a button labeled "export all user data". This will put all your nodes and associations into a .synth file which will be added to your homepage. You can then click through to download that file. That .synth file containing all your data can be imported into an updated version of the app, onto a version on another computer, or stored as a backup. Also, although it\'s not really designed for this, you could break the .synth file open to get at the files themselves. If you need to get at the specific files in there, you can change the file extension from .synth to .zip which should allow your computer to de-compress the archive.'),r.a.createElement("h2",null,"How do I bring data from an older version into the latest version of the app?"),r.a.createElement("p",null,'As mentioned in the previous question, you can go to the options menu on the older version and click the "export all user data" option to get a .synth file containing all your user data. You can then import that into the latest version you\'ve downloaded by unpacking it from within the new version. Once you have imported your data into the new version, you can safely delete the old version of the app from your computer.'),r.a.createElement("h2",null,"Why are there so many concepts here!?"),r.a.createElement("p",null,"That's a good question! I tried to explain everything as best I could but I'm worried it may still be confusing, if you have critiques of specific concepts or ideas I am happy to hear them, because this application is always a work in progress and I would like to make it easier to use! That said, there were certain concepts I had to invent because they just didn't exist. My hope is that as people interact with Synthona they will come up with their own ideas for improvements and ways to increase the clarity of presentation."),r.a.createElement("h2",null,"What if I have an idea for a change to the app?"),r.a.createElement("p",null,"Synthona is an open-source project and is licensed under GPLv3 which means if you want to take things into your own hands you're free to fork the project, but I am also more than willing to hear out your concerns and try to implement changes myself if I can! The goal here is to make something which benefits as many people as possible."),r.a.createElement("h2",null,"I want to financially support development, what should I do?"),r.a.createElement("p",null,"There is a"," ",r.a.createElement("a",{href:"https://www.patreon.com/synthona",target:"_blank",rel:"noopener noreferrer"},"patreon")," ","you can contribute to and I may add more donation options in the future. Anything helps, I spent quite a bit of time developing this idea and am currently between jobs. I have a lot of ideas for improvements to this application including things like P2P features, automatic updates, theme support, plugin support, a lot of other node types, maps, web-features, analytics, social features, 3D features, and so much more, but I can't afford to work on this full-time without enough funding to make rent. This project was originally designed to function as a distrubuted p2p social network and that is not really off the table, but there is still a lot of work to be done before that is possible and funding would allow me to work on it."),r.a.createElement("h2",null,"Can I contact you with a bug report, feature request, or other inquiry?"),r.a.createElement("p",null,"Yes, please send an email to"," ",r.a.createElement("a",{href:"mailto:synthona@gmail.com",target:"_blank",rel:"noopener noreferrer",type:"email"},"synthona@gmail.com")," ","and we will get things sorted out as soon as possible!")))))}}]),a}(n.Component),Gt=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(Bt),Qt=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){null===this.props.isAuth&&this.props.isAuthenticated()}},{key:"render",value:function(){var e;return e=this.props.isAuth?r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:Ye}),r.a.createElement(c.a,{path:"/profile/:username",exact:!0,component:$e}),r.a.createElement(c.a,{path:"/activity",exact:!0,component:it}),r.a.createElement(c.a,{path:"/collections",exact:!0,component:vt}),r.a.createElement(c.a,{path:"/edit/text/:uuid",exact:!0,component:gt}),r.a.createElement(c.a,{path:"/edit/profile",exact:!0,component:nt}),r.a.createElement(c.a,{path:"/associations/:uuid",exact:!0,component:At}),r.a.createElement(c.a,{path:"/graph/:uuid?",exact:!0,component:zt}),r.a.createElement(c.a,{path:"/help",exact:!0,component:Gt})):this.props.isFetchingAuth?r.a.createElement(ie,null):r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:Z}),r.a.createElement(c.a,{path:"/create-account",exact:!0,component:Ct}),r.a.createElement(c.a,{component:Z})),r.a.createElement(n.Fragment,null,e)}}]),a}(n.Component),Kt=Object(s.b)((function(e){return{user:e.auth.user,isFetchingAuth:e.auth.isFetching,isAuth:e.auth.isAuth}}),{isAuthenticated:function(){return function(){var e=Object(v.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REFRESH_AUTH"}),e.next=4,C.get("/auth");case 4:a=e.sent,t({type:"REFRESH_AUTH_SUCCESS",payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"REFRESH_AUTH_ERROR"}),p.push("/");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})(Qt),Wt=a(2),Xt={isAuth:null,isFetching:null,user:null},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ACCOUNT":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"CREATE_ACCOUNT_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"CREATE_ACCOUNT_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_IN":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"SIGN_IN_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"SIGN_IN_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_OUT":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"SIGN_OUT_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"REFRESH_AUTH":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0,user:t.payload,isAuth:t.isAuth});case"REFRESH_AUTH_SUCCESS":return{isFetching:null,user:t.payload,isAuth:!0};case"REFRESH_AUTH_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"UPDATE_USER_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:t.user});case"UPDATE_USER_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"UPDATE_USER_AVATAR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_AVATAR_SUCCESS":return(ht=Object(Wt.a)({},e.user)).avatar=t.url,Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:ht});case"UPDATE_USER_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"UPDATE_USER_HEADER":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_HEADER_SUCCESS":return(ht=Object(Wt.a)({},e.user)).header=t.url,Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,user:ht});case"UPDATE_USER_HEADER_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});default:return e}},Jt=a(36),Zt={isFetching:null,isSaving:null,nodeList:[],totalItems:null,query:{page:1},activeNode:null},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NODES":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"FETCH_NODES_SUCCESS":var a;return a=t.query.page>e.query.page?Object(Jt.a)(e.nodeList):[],Object.values(t.payload.nodes).forEach((function(e){a.push(e)})),a.length>100&&a.splice(0,t.payload.nodes.length),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,query:t.query,totalItems:t.payload.totalItems,nodeList:a});case"FETCH_NODES_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"SEARCH_NODES":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"SEARCH_NODES_SUCCESS":return a=[],Object.values(t.payload.nodes).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),a.length>100&&a.splice(0,t.payload.nodes.length),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,query:{page:1,type:t.query.type,searchQuery:t.query.searchQuery},totalItems:t.payload.totalItems,nodeList:a});case"SEARCH_NODES_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"UPDATE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"UPDATE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"UPDATE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.result.uuid&&(e=t.result),e}))});case"EDIT_TEXT_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"EDIT_TEXT_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,activeNode:Object(Wt.a)(Object(Wt.a)({},e.activeNode),{},{content:t.node.content})});case"EDIT_TEXT_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"PROCESS_TEXT_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"PROCESS_TEXT_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.node.uuid&&(e.preview=t.node.preview),e}))});case"PROCESS_TEXT_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"CREATE_FILE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case" CREATE_FILE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(Jt.a)(e.nodeList))});case"CREATE_FILE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"CREATE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"CREATE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(Jt.a)(e.nodeList.filter((function(e){return e.uuid!==t.payload.uuid})))),activeNode:t.payload.node});case"CREATE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"MARK_NODE_VIEW":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var n;return n=e.nodeList.length<20?[t.node].concat(Object(Jt.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(Jt.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid}))),Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,nodeList:n});case"MARK_NODE_VIEW_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"CLEAR_ACTIVE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{activeNode:null});case"DELETE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"DELETE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{nodeList:Object(Jt.a)(e.nodeList.filter((function(e){return e.uuid!==t.uuid}))),isSaving:null});case"DELETE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"GENERATE_EXPORT":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"GENERATE_EXPORT_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"GENERATE_EXPORT_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,nodeList:[t.payload].concat(Object(Jt.a)(e.nodeList))});default:return e}},ea=a(64),ta={componentList:{}},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_COMPONENT":return Object(Wt.a)(Object(Wt.a)({},e),{},{componentList:Object(Wt.a)(Object(Wt.a)({},e.componentList),{},Object(ea.a)({},t.payload.type,{content:t.payload.content,visible:!0}))});case"HIDE_COMPONENT":return Object(Wt.a)(Object(Wt.a)({},e),{},{componentList:Object(Wt.a)(Object(Wt.a)({},e.componentList),{},Object(ea.a)({},t.payload.type,null))});default:return e}},na={isFetching:null,isSaving:null,associationLinkList:[],associationList:[],totalLinkListItems:null,totalAssociationListItems:null,associationListPage:1,associationLinkListPage:1,activeNode:null},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ASSOCIATIONS_LINK_LIST":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS":var a=Object(Jt.a)(e.associationLinkList);return Object.values(t.payload.associations).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||(a.push(e),a.length>100&&a.splice(0,30))})),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,totalLinkListItems:t.payload.totalItems,associationLinkList:a,associationLinkListPage:t.page||1});case"FETCH_ASSOCIATIONS_LINK_LIST_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATION_LINK_LIST":return Object(Wt.a)(Object(Wt.a)({},e),{},{associationLinkList:[]});case"FETCH_ASSOCIATIONS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_SUCCESS":var n=Object(Jt.a)(e.associationList);return Object.values(t.payload.associations).forEach((function(e){n.some((function(t){return t.uuid===e.uuid}))||(n.push(e),n.length>100&&n.splice(0,30))})),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,totalAssociationListItems:t.payload.totalItems,associationList:n,associationListPage:t.page||1});case"FETCH_ASSOCIATIONS_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATIONS":return Object(Wt.a)(Object(Wt.a)({},e),{},{associationList:[]});case"CREATE_ASSOCIATION":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"CREATE_ASSOCIATION_SUCCESS":return Et=!e.activeNode||t.associatedNode.uuid!==e.activeNode.uuid&&t.nodeUUID!==e.activeNode.uuid?Object(Jt.a)(e.associationList):[t.associatedNode].concat(Object(Jt.a)(e.associationList)),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,associationLinkList:[t.associatedNode].concat(Object(Jt.a)(e.associationLinkList)),associationList:Et,totalAssociationListItems:e.totalAssociationListItems+1});case"CREATE_ASSOCIATION_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"MARK_NODE_VIEW":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var r=!!e.associationList.some((function(e){return e.uuid===t.node.uuid}))&&t.node;return Et=r?[e.associationList.some((function(e){return e.uuid===t.node.uuid}))?t.node:null].concat(Object(Jt.a)(e.associationList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(Jt.a)(e.associationList),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,associationList:Et});case"MARK_NODE_VIEW_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"DELETE_ASSOCIATION_LINK":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:!0});case"DELETE_ASSOCIATION_LINK_SUCCESS":var o=e.totalLinkListItems-1;return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,associationLinkList:Object(Jt.a)(e.associationLinkList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalLinkListItems:o});case"DELETE_ASSOCIATION_LINK_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null});case"REMOVE_FROM_ASSOCIATION_LIST":var i=e.totalAssociationListItems-1;return Object(Wt.a)(Object(Wt.a)({},e),{},{isSaving:null,associationList:Object(Jt.a)(e.associationList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalAssociationListItems:i});default:return e}},oa={isFetching:null,graphNodeList:[],graphAssociationList:[],totalItems:null,query:{page:1},activeNode:null,graphData:null},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GRAPH_DATA":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:!0});case"FETCH_GRAPH_DATA_ERROR":return Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null});case"FETCH_GRAPH_DATA_SUCCESS":var a=[];t.payload.nodes.map((function(e){return a.push(e)}));var n=[];return t.payload.associations.map((function(e){var t={source:e.nodeId,target:e.linkedNode};return n.push(t)})),Object(Wt.a)(Object(Wt.a)({},e),{},{isFetching:null,graphData:{nodes:a,associations:n}});default:return e}},ca=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,sa=Object(l.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"RESET_APP"===t.type&&(e={}),{auth:Yt(e.auth,t),nodes:$t(e.nodes,t),components:aa(e.components,t),associations:ra(e.associations,t),graph:ia(e.graph,t)}}),ca(Object(l.a)(u.a)));i.a.render(r.a.createElement(s.a,{store:sa},r.a.createElement(c.b,{history:p},r.a.createElement(Kt,null))),document.querySelector("#root"))},84:function(e,t,a){e.exports=a.p+"static/media/synthona-logo.b740604b.png"},86:function(e,t,a){e.exports=a.p+"static/media/synthona-header.2a4785ed.png"}},[[309,1,2]]]);
//# sourceMappingURL=main.2a7a269b.chunk.js.map