(this["webpackJsonpsynthona-react-client"]=this["webpackJsonpsynthona-react-client"]||[]).push([[0],{151:function(e,t,a){},152:function(e,t,a){},206:function(e,t,a){},23:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var n=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof e||"object"!==typeof e.versions||!e.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,a(133))},292:function(e,t,a){},320:function(e,t,a){e.exports=a(609)},328:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/missing-file.20cda3d1.png"},55:function(e,t){var a=[{storageKey:"theme",name:"Theme",type:"dropdown",options:["classic","light","translucent","translucent green","translucent blue","translucent red","translucent yellow","translucent orange"],value:"classic"},{storageKey:"quill-theme",name:"Editor Theme",type:"dropdown",options:["classic","dark","warm","off-white","green hacker","iris hacker","dark translucent"],value:"classic"},{storageKey:"image-sizing",name:"Image Sizing",type:"dropdown",options:["classic","actual size","fit-vertically"],value:"classic"},{storageKey:"association-sort",name:"Association Sort Type",type:"dropdown",options:["last accessed","link strength","created at"],value:"last updated"},{storageKey:"association-sort-order",name:"Association Sort Order",type:"dropdown",options:["desc","asc"],value:"desc"},{storageKey:"fallback-search",name:"Fallback Search",type:"dropdown",options:["none","google"],value:"none"},{storageKey:"link-mode",name:"Link Mode",type:"dropdown",options:["bidirectional","unidirectional"],value:"bidirectional"},{storageKey:"graph-render-limit",name:"Graph Render Limit",type:"number",value:100}];t.loadClientConfig=function(){var e;return 1.1<=localStorage.getItem("client-config-version")?e=a.map((function(e){var t=localStorage.getItem(e.storageKey);t||(localStorage.removeItem("client-config-version"),window.location.reload());var a=JSON.parse(t);return e.value=a,e})):(e=a.map((function(e){var t=e.storageKey;return localStorage.setItem(t,JSON.stringify(e.value)),localStorage.setItem("sortOrder","DESC"),localStorage.setItem("sortType","recent"),e})),localStorage.setItem("client-config-version",1.1)),e},t.backendConfigMap={FULLSCREEN:{type:"boolean",name:"Fullscreen on Startup"},OPEN_URLS_IN_BROWSER:{type:"boolean",name:"Open URLs in Browser"},HTTP_CACHE:{type:"boolean",name:"Http Cache"},CLEAR_CACHE_ON_START:{type:"boolean",name:"Clear Cache On Startup"},ENABLE_HARDWARE_ACCELERATION:{type:"boolean",name:"Hardware Acceleration"},DEBUG:{type:"boolean",name:"Debug Mode"},SERVER_PORT:{type:"number",name:"Server Port"},CLIENT_PORT:{type:"number",name:"Client Port"},CLIENT_BASE:{type:"string",name:"Client Base"},APP_NAME:{type:"string",name:"App Name"},SUMMONING_KEY:{type:"dropdown",options:[";","y","'",".",",","[","]","-","=","none"],name:"Summoning Key"}},t.backendConfigFilter=["JWT_SECRET","REFRESH_TOKEN_SECRET","CONFIG_VERSION","CLIENT_PORT","SERVER_PORT","ENABLE_HARDWARE_ACCELERATION","CLIENT_BASE","APP_NAME","DEBUG","CLEAR_CACHE_ON_START"]},556:function(e,t,a){},579:function(e,t,a){},580:function(e,t,a){},581:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(9),c=a.n(i),l=a(33),s=a(16),u=a(48),d=Object(u.a)(),p=a(12),m=a(13),h=a(15),f=a(14),E=(a(328),a(23)),g=(a(44),a(7)),v=a(3),b=a.n(v),y=a(6),w=a(214),O=a.n(w),S=a(300),C=a(114),N=a(2),k={isAuth:null,isFetching:null,user:null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ACCOUNT":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"CREATE_ACCOUNT_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"CREATE_ACCOUNT_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_IN":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"SIGN_IN_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"SIGN_IN_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_OUT":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"SIGN_OUT_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"REFRESH_AUTH":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0,user:t.payload,isAuth:t.isAuth});case"REFRESH_AUTH_SUCCESS":return{isFetching:null,user:t.payload,isAuth:!0};case"REFRESH_AUTH_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"UPDATE_USER_NODE":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"UPDATE_USER_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:t.user});case"UPDATE_USER_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"UPDATE_USER_AVATAR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"UPDATE_USER_AVATAR_SUCCESS":return window.location.reload(),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:Object(N.a)(Object(N.a)({},e.user),{},{avatar:t.url})});case"UPDATE_USER_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"UPDATE_USER_HEADER":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"UPDATE_USER_HEADER_SUCCESS":return window.location.reload(),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,user:Object(N.a)(Object(N.a)({},e.user),{},{header:t.url})});case"UPDATE_USER_HEADER_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});default:return e}},j=a(31),T={isFetching:null,isSaving:null,isDeleting:null,nodeList:[],totalItems:null,query:{page:1,sortOrder:localStorage.getItem("sortOrder")||"DESC",sortType:localStorage.getItem("sortType")||"recent"},activeNode:null},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NODES":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"FETCH_NODES_SUCCESS":var a;return a=t.query.page>e.query.page?Object(j.a)(e.nodeList):[],Object.values(t.payload.nodes).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,query:t.query,totalItems:t.payload.totalItems,nodeList:a});case"FETCH_NODES_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"SEARCH_NODES":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"SEARCH_NODES_SUCCESS":return a=[],Object.values(t.payload.nodes).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,query:{page:1,type:t.query.type,searchQuery:t.query.searchQuery,sortType:t.query.sortType,sortOrder:t.query.sortOrder},totalItems:t.payload.totalItems,nodeList:a});case"SEARCH_NODES_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"UPDATE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"UPDATE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"UPDATE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.result.uuid&&(e=t.result),e}))});case"UPDATE_ACTIVE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"UPDATE_ACTIVE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"UPDATE_ACTIVE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,activeNode:t.result.uuid===e.activeNode.uuid?t.result:e.activeNode,nodeList:e.nodeList.map((function(e){return e.uuid===t.result.uuid&&(e=t.result),e}))});case"EDIT_TEXT_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"EDIT_TEXT_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,activeNode:Object(N.a)(Object(N.a)({},e.activeNode),{},{content:t.node.content})});case"EDIT_TEXT_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"PROCESS_TEXT_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"PROCESS_TEXT_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.node.uuid&&(e.preview=t.node.preview),e}))});case"PROCESS_TEXT_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"CREATE_FILE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case" CREATE_FILE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(j.a)(e.nodeList))});case"CREATE_FILE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"LINK_FILE_NODES":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"LINK_FILE_NODES_SUCCESS":var n=[];return t.nodes.forEach((function(e){n.push(e)})),Object(N.a)(Object(N.a)({},e),{},{isSaving:null,nodeList:[].concat(n,Object(j.a)(e.nodeList))});case"LINK_FILE_NODES_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"CREATE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"CREATE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(j.a)(e.nodeList.filter((function(e){return e.uuid!==t.payload.uuid})))),activeNode:t.payload.node});case"CREATE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"MARK_NODE_VIEW":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var r;return r=e.nodeList.length<50?[t.node].concat(Object(j.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(j.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid}))),Object(N.a)(Object(N.a)({},e),{},{isSaving:null,nodeList:r});case"MARK_NODE_VIEW_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"CLEAR_ACTIVE_NODE":return Object(N.a)(Object(N.a)({},e),{},{activeNode:null});case"DELETE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isDeleting:!0});case"DELETE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{nodeList:Object(j.a)(e.nodeList.filter((function(e){return e.uuid!==t.uuid}))),isDeleting:null});case"DELETE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isDeleting:null});case"GENERATE_EXPORT":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"GENERATE_EXPORT_ERROR":case"GENERATE_EXPORT_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});default:return e}},A=a(59),D={componentList:{}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_COMPONENT":return Object(N.a)(Object(N.a)({},e),{},{componentList:Object(N.a)(Object(N.a)({},e.componentList),{},Object(A.a)({},t.payload.type,{content:t.payload.content,visible:!0}))});case"HIDE_COMPONENT":return Object(N.a)(Object(N.a)({},e),{},{componentList:Object(N.a)(Object(N.a)({},e.componentList),{},Object(A.a)({},t.payload.type,null))});case"LOAD_THEME":return Object(N.a)(Object(N.a)({},e),{},{theme:t.payload.theme,editorTheme:t.payload.editorTheme});default:return e}},I={isFetching:null,isSaving:null,associationLinkList:[],associationList:[],totalLinkListItems:null,totalAssociationListItems:null,associationListPage:1,associationLinkListPage:1,activeNode:null},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ASSOCIATIONS_LINK_LIST":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS":var a=Object(j.a)(e.associationLinkList);return Object.values(t.payload.associations).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,totalLinkListItems:t.payload.totalItems,associationLinkList:a,associationLinkListPage:t.page||1});case"FETCH_ASSOCIATIONS_LINK_LIST_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATION_LINK_LIST":return Object(N.a)(Object(N.a)({},e),{},{associationLinkList:[]});case"FETCH_ASSOCIATIONS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_SUCCESS":var r=Object(j.a)(e.associationList);return Object.values(t.payload.associations).forEach((function(e){r.some((function(t){return t.uuid===e.uuid}))||r.push(e)})),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,totalAssociationListItems:t.payload.totalItems,associationList:r,associationListPage:t.page||1});case"FETCH_ASSOCIATIONS_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATIONS":return Object(N.a)(Object(N.a)({},e),{},{associationList:[]});case"CREATE_ASSOCIATION":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"CREATE_ASSOCIATION_SUCCESS":var o;return o=t.nodeUUID&&t.linkedNode.uuid===t.nodeUUID?t.node:t.linkedNode,n=e.activeNode&&t.nodeUUID===e.activeNode.uuid?[o].concat(Object(j.a)(e.associationList)):Object(j.a)(e.associationList),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,associationLinkList:[o].concat(Object(j.a)(e.associationLinkList)),associationList:n,totalAssociationListItems:e.totalAssociationListItems+1});case"CREATE_ASSOCIATION_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"CONTEXTUAL_CREATE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"CONTEXTUAL_CREATE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"CONTEXTUAL_CREATE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,associationList:[t.node].concat(Object(j.a)(e.associationList.filter((function(e){return e.nodeUUID!==t.node.uuid&&e.linkedNodeUUID!==t.node.uuid&&e.uuid!==t.node.uuid})))),totalAssociationListItems:e.totalAssociationListItems+1});case"MARK_NODE_VIEW":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var i=!!e.associationList.some((function(e){return e.uuid===t.node.uuid}))&&t.node;return n=i?[e.associationList.some((function(e){return e.uuid===t.node.uuid}))?t.node:null].concat(Object(j.a)(e.associationList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(j.a)(e.associationList),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,associationList:n});case"MARK_NODE_VIEW_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"DELETE_ASSOCIATION_LINK":return Object(N.a)(Object(N.a)({},e),{},{isSaving:!0});case"DELETE_ASSOCIATION_LINK_SUCCESS":var c=e.totalLinkListItems-1;return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,associationLinkList:Object(j.a)(e.associationLinkList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalLinkListItems:c});case"DELETE_ASSOCIATION_LINK_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isSaving:null});case"REMOVE_FROM_ASSOCIATION_LIST":var l=e.totalAssociationListItems-1;return Object(N.a)(Object(N.a)({},e),{},{isSaving:null,associationList:Object(j.a)(e.associationList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalAssociationListItems:l});default:return e}},U={isFetching:null,graphNodeList:[],graphAssociationList:[],totalItems:null,query:{page:1},activeNode:null,graphData:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GRAPH_DATA":return Object(N.a)(Object(N.a)({},e),{},{isFetching:!0});case"FETCH_GRAPH_DATA_ERROR":return Object(N.a)(Object(N.a)({},e),{},{isFetching:null});case"FETCH_GRAPH_DATA_SUCCESS":var a=[];t.payload.nodes.map((function(e){return a.push(e)}));var n=[];return t.payload.associations.map((function(e){var t={source:e.nodeId,target:e.linkedNode};return n.push(t)})),Object(N.a)(Object(N.a)({},e),{},{isFetching:null,graphData:{nodes:a,associations:n}});default:return e}},P=O.a.CancelToken,H=P.source(),M=O.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_PORT?"http://"+window.location.hostname+":"+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_PORT:"http://"+window.location.hostname+":"+window.location.port,withCredentials:!0,cancelToken:H.token}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.c,B=Object(C.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"RESET_APP"===t.type&&(e={}),{auth:x(e.auth,t),nodes:_(e.nodes,t),components:R(e.components,t),associations:F(e.associations,t),graph:L(e.graph,t)}}),q(Object(C.a)(S.a))),V=a(93),z=a.n(V),K=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FETCH_NODES"}),t.next=4,M.get("/node/search",{params:{page:e.page,perPage:e.perPage,type:e.type,searchQuery:e.searchQuery,pinned:e.pinned,sortType:e.sortType,sortOrder:e.sortOrder}});case 4:n=t.sent,a({type:"FETCH_NODES_SUCCESS",payload:n.data,query:e}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FETCH_NODES_ERROR"}),a({type:"RESET_APP"}),d.push("/");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"all"===e.type&&(e.type=null),t.prev=1,a({type:"SEARCH_NODES"}),t.next=5,M.get("/node/search",{params:{page:e.page,type:e.type,searchQuery:e.searchQuery,pinned:e.pinned,sortType:e.sortType,sortOrder:e.sortOrder}});case 5:n=t.sent,a({type:"SEARCH_NODES_SUCCESS",payload:n.data,query:e}),d.push("/"),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:"SEARCH_NODES_ERROR"}),a({type:"RESET_APP"}),g.a.error("Could not search nodes",1),d.push("/");case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_NODE"}),t.prev=1,t.next=4,M.patch("/node",{uuid:e.uuid,name:e.name,preview:e.preview,path:e.path});case 4:n=t.sent,a({type:"UPDATE_NODE_SUCCESS",uuid:e.uuid,result:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"UPDATE_NODE_ERROR"}),g.a.error("There was a problem saving your changes",1),d.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Q=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_NODE"}),t.prev=1,t.next=4,M.put("/url",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,path:e.path,content:e.content,linkedNode:e.linkedNode});case 4:n=t.sent,a({type:"CREATE_NODE_SUCCESS",payload:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"CREATE_NODE_ERROR"}),g.a.error("There was a problem adding that URL",1),d.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"MARK_NODE_VIEW"}),t.prev=1,t.next=4,M.patch("/node/viewed",{uuid:e.uuid});case 4:a({type:"MARK_NODE_VIEW_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"MARK_NODE_VIEW_ERROR"}),g.a.error("Could not mark node view",1),d.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SET_ACTIVE_NODE"}),t.prev=1,t.next=4,M.get("/node",{params:{uuid:e}});case 4:n=t.sent,a({type:"SET_ACTIVE_NODE_SUCCESS",payload:n.data}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"SET_ACTIVE_NODE_ERROR"}),d.push("/"),g.a.error("Could not retrieve node",1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Y=function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_ACTIVE_NODE"}),e.prev=1,e.next=4,M.get("/node/random");case 4:a=e.sent,t({type:"SET_ACTIVE_NODE_SUCCESS",payload:a.data}),window.location.replace("/associations/".concat(a.data.node.uuid)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"SET_ACTIVE_NODE_ERROR"}),d.push("/"),g.a.error("Could not retrieve values",1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(){return{type:"CLEAR_ACTIVE_NODE"}},$=a(55),ee=function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SIGN_OUT"}),e.prev=1,e.next=4,M.get("/auth/signout");case 4:t({type:"RESET_APP"}),g.a.success("Signed Out",1),d.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"SIGN_OUT_ERROR"}),g.a.error("There was a problem signing out",1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},te=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_USER_NODE"}),t.prev=1,t.next=4,M.get("/user/username",{params:{username:e}});case 4:return n=t.sent,r=n.data.user,t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(1),g.a.error("Could not fetch user",1);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},ae=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o,i,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",o=JSON.parse(localStorage.getItem("association-sort"))||"last updated",i=JSON.parse(localStorage.getItem("association-sort-order"))||"desc",t.prev=4,e.page||(a({type:"RESET_ASSOCIATIONS"}),e.page=1),a({type:"FETCH_ASSOCIATIONS"}),t.next=9,M.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page,bidirectional:r,sortOrder:i,sortType:o}});case 9:c=t.sent,a({type:"FETCH_ASSOCIATIONS_SUCCESS",payload:c.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),a({type:"FETCH_ASSOCIATIONS_ERROR"}),g.a.error("Could not fetch items",1),d.push("/");case 18:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}()},ne=function(e,t){return function(){var a=Object(y.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M.put("/association/linkstrength",{nodeA:e,nodeB:t});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),g.a.error("There was a problem with your request",1);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})));return function(e){return a.apply(this,arguments)}}()},re=function(e,t){return{type:"SHOW_COMPONENT",payload:{type:e,content:t}}},oe=function(e){return{type:"HIDE_COMPONENT",payload:{type:e}}},ie=function(){return{type:"LOAD_THEME",payload:{theme:function(){var e={};switch(JSON.parse(localStorage.getItem("theme"))){case"classic":e={cardTitleColor:"#03fc88",cardButtonColor:"white",cardHeaderColor:"#111111",cardBodyColor:"#111111",cardTextColor:"#e7e7e7",graphNodeColor:"#ffffff",graphNodeBorderColor:"#fff019",graphNodeHoverColor:"#f0ff99",graphNodeBorderHoverColor:"#f0ff99",textEditorBackground:"white",textEditorText:"black"};break;case"light":e={cardTitleColor:"black",cardButtonColor:"black",cardHeaderColor:"#e7e7e7",cardBodyColor:"#e7e7e7",cardTextColor:"grey",graphNodeColor:"#f0ff99",graphNodeBorderColor:"#f0ff99",graphNodeHoverColor:"white",graphNodeBorderHoverColor:"white",textEditorBackground:"white",textEditorText:"black"};break;case"translucent":e={cardTitleColor:"#03fc88",cardButtonColor:"white",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#ffffff",graphNodeBorderColor:"#fff019",graphNodeHoverColor:"rgba(255, 255, 255, .4)",graphNodeBorderHoverColor:"rgba(255, 255, 255, .4)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent green":e={cardTitleColor:"#03fc88",cardButtonColor:"#03fc88",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#03fc88",graphNodeBorderColor:"#03fc88",graphNodeHoverColor:"rgba(3, 252, 136, .5)",graphNodeBorderHoverColor:"rgba(3, 252, 136, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent blue":e={cardTitleColor:"#7bf2e2",cardButtonColor:"#7bf2a7",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#c3f9f2",graphNodeBorderColor:"#3651ff",graphNodeHoverColor:"rgba(50, 66, 168, .5)",graphNodeBorderHoverColor:"rgba(50, 66, 168, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent red":e={cardTitleColor:"#ff709b",cardButtonColor:"#ff3d78",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#ff3d78",graphNodeBorderColor:"#c70a43",graphNodeHoverColor:"rgba(255, 61, 120, .5)",graphNodeBorderHoverColor:"rgba(255, 61, 120, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent yellow":e={cardTitleColor:"#faff63",cardButtonColor:"#faff63",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#faff63",graphNodeBorderColor:"#e7e7e7",graphNodeHoverColor:"rgba(250, 255, 99, .5)",graphNodeBorderHoverColor:"rgba(250, 255, 99, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent orange":e={cardTitleColor:"#ffa424",cardButtonColor:"#ffa424",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .8)",cardTextColor:"#e7e7e7",graphNodeColor:"#ffa424",graphNodeBorderColor:"#e7e7e7",graphNodeHoverColor:"rgba(255, 164, 36, .5)",graphNodeBorderHoverColor:"rgba(255, 164, 36, .5)",textEditorBackground:"white",textEditorText:"#272727"}}return e}(),editorTheme:function(){var e={};switch(JSON.parse(localStorage.getItem("quill-theme"))){case"classic":e={textEditorBackground:"white",textEditorText:"black"};break;case"dark":e={textEditorBackground:"#272727",textEditorText:"white"};break;case"warm":e={textEditorBackground:"#FFF1DE",textEditorText:"#272727"};break;case"off white":e={textEditorBackground:"#FAF9F6",textEditorText:"#272727"};break;case"green hacker":e={textEditorBackground:"rgba(0, 0, 0, .8)",textEditorText:"#03fc88"};break;case"iris hacker":e={textEditorBackground:"rgba(0, 0, 0, .8)",textEditorText:"#5D3FD3"};break;case"dark translucent":e={textEditorBackground:"rgba(0, 0, 0, .8)",textEditorText:"white"};break;default:e={textEditorBackground:"white",textEditorText:"black"}}return e}()}}},ce=function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.a.success("generating export!",2),e.prev=1,t({type:"GENERATE_EXPORT"}),e.next=5,M.put("/port/export/all");case 5:200===(a=e.sent).status&&(t({type:"GENERATE_EXPORT_SUCCESS",payload:a.data}),d.push("/")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"GENERATE_EXPORT_ERROR"}),g.a.error("Could not export instance data",1),d.push("/");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},le=function(e,t){return function(){var a=Object(y.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"LINK_FILE_NODES"}),a.prev=1,a.next=4,M.put("/file/link",{fileList:JSON.stringify(e),linkedNode:t});case 4:200===(r=a.sent).status?n({type:"LINK_FILE_NODES_SUCCESS",nodes:r.data.nodes}):g.a.error("There was a problem creating the file nodes",1),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n({type:"LINK_FILE_NODES_ERROR"}),g.a.error("There was a problem creating the file nodes",1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},se=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.put("/file/launch",{uuid:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),g.a.error("There was a problem launching the file",1),window.location.reload();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.put("/file/explorer",{uuid:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),g.a.error("There was a problem opening the file in the file explorer",1),window.location.reload();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},de=a(64),pe=a.n(de),me=Object(s.b)(null,{loadTheme:ie})((function(e){Object(r.useEffect)((function(){e.loadTheme(),localStorage.getItem("client-config-version")||Object($.loadClientConfig)()}));var t=function(){var e=localStorage.getItem("background-image"),t=pe.a;return e&&(t=e),t};return o.a.createElement("div",null,o.a.createElement("img",{src:t()?t():pe.a,alt:"background",style:{width:"100vw",height:"100vh",position:"fixed",backgroundColor:"#272727"}}),e.children)})),he=(a(207),a(111)),fe=(a(39),a(10)),Ee=a(8),ge=a(21),ve=a(28),be=(a(206),fe.a.Content),ye=fe.a.Footer,we=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getUsername=function(){return"synthona"},e.onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.signIn(t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="synthona"}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"login-layout"},o.a.createElement(be,{className:"login-content"},o.a.createElement(he.a,{className:"login-card"},o.a.createElement(ge.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:Oe,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return o.a.createElement(ge.c,{className:"login-form"},o.a.createElement("h1",{className:"login-title"},o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728"),"synthona",o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}},"  ","\u2728")),o.a.createElement(ge.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),o.a.createElement(ge.a,{name:"email",component:"div",className:"login-error"}),o.a.createElement(ge.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),o.a.createElement(ge.a,{name:"password",component:"div",className:"login-error"}),o.a.createElement(ge.a,{name:"confirmPassword",component:"div",className:"login-error"}),o.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"login"),o.a.createElement(Ee.a,{to:"/create-account",className:"login-signup"},"create account"))})),o.a.createElement("div",{className:"login-after-card"},o.a.createElement(Ee.a,{to:"/forgot-password",className:"login-forgot-password"},"lost password")))),o.a.createElement(ye,null))}}]),a}(r.Component),Oe=ve.object().shape({email:ve.string().required().email("E-mail is not valid!"),password:ve.string().required().min(5,"Password has to be longer than 6 characters!")}),Se=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SIGN_IN"}),Object($.loadClientConfig)(),t.prev=2,t.next=5,M.put("/auth/login",e);case 5:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"SIGN_IN_SUCCESS",payload:n.data}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"SIGN_IN_ERROR"}),g.a.error("There was a problem signing in",1),d.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})(we),Ce=fe.a.Content,Ne=fe.a.Footer,ke=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.forgotPassword(t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="forgot password"}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"login-layout"},o.a.createElement(Ce,{className:"login-content"},o.a.createElement(he.a,{className:"login-card"},o.a.createElement(ge.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:xe,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return o.a.createElement(ge.c,{className:"login-form"},o.a.createElement("h1",{className:"login-title"}," ",o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728"),"lost password"," ",o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728")),o.a.createElement(ge.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),o.a.createElement(ge.a,{name:"email",component:"div",className:"login-error"}),o.a.createElement(ge.b,{type:"password",name:"newPassword",placeholder:"new password",className:"login-field"}),o.a.createElement(ge.a,{name:"newPassword",component:"div",className:"login-error"}),o.a.createElement(ge.b,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",className:"login-field"}),o.a.createElement(ge.a,{name:"confirmNewPassword",component:"div",className:"login-error"}),o.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"reset"),o.a.createElement(Ee.a,{to:"/",className:"login-signup"},"back to login"))})))),o.a.createElement(Ne,null))}}]),a}(r.Component),xe=ve.object().shape({email:ve.string().required().email("E-mail is not valid!"),newPassword:ve.string().required("new password is required"),confirmNewPassword:ve.string().required("please confirm new password").oneOf([ve.ref("newPassword")],"Your passwords don't match")}),je=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{forgotPassword:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.put("/auth/forgot-password",{email:e.email,newPassword:e.newPassword,confirmNewPassword:e.confirmNewPassword});case 3:200===t.sent.status&&window.location.replace("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g.a.error("something went wrong",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(ke),Te=(a(106),a(46)),_e=(a(289),a(168)),Ae=(a(50),a(5)),De=(a(551),a(306)),Re=(a(553),a(220)),Ie=a(90),Fe=a.n(Ie),Ue=(a(556),a(557),a(304)),Le=function(e){return o.a.createElement(fe.a,null,o.a.createElement(Ue.a,{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"top"===e.alignment?"start":"center"},className:"loading-spinner",size:"large"}))},Pe=Re.a.Item,He=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).signOutHandler=function(){n.props.signOut()},n.toggleSignoutModal=function(){n.state.showSignoutModal?(n.setState({showSignoutModal:!1}),document.body.style.removeProperty("overflow")):n.setState({showSignoutModal:!0})},n.renderDrawerClasses=function(){return!1===n.props.animate?"page-sider no-animation":"page-sider"},n.state={showSignoutModal:null,visible:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.mainSider?o.a.createElement(Le,null):o.a.createElement("div",{className:"sider-container"},o.a.createElement(_e.a,{className:this.renderDrawerClasses(),width:"200px",mask:this.props.showMask,placement:"left",closable:!1,onClose:function(t){return e.props.hideComponent("mainSider")},visible:!!this.props.mainSider&&this.props.mainSider.visible},o.a.createElement(Re.a,{mode:"vertical",defaultSelectedKeys:["1"],className:"sider-menu"},o.a.createElement(Pe,null,o.a.createElement(Ee.a,{to:"/profile/".concat(this.props.user.username),onClick:function(t){return e.props.hideComponent("mainSider")}},o.a.createElement(De.a,{className:"nav-avatar",src:this.props.user.avatar||Fe.a,icon:"user",style:{display:"inline-block",verticalAlign:"middle",marginTop:"0.8rem",width:"2.5rem",height:"2.5rem",objectFit:"contain"}}))),o.a.createElement(Pe,{className:"sider-menu-item sider-title"},o.a.createElement(Ee.a,{to:"/profile/".concat(this.props.user.username),onClick:function(t){return e.props.hideComponent("mainSider")}},o.a.createElement(Ae.a,{type:"sketch",theme:"outlined",style:{margin:"0"}})," ",o.a.createElement("b",null,"Profile"))),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/",onClick:function(t){return e.props.hideComponent("mainSider")}},"Explore")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/pins",onClick:function(t){return e.props.hideComponent("mainSider")}},"Favorites")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/graph",onClick:function(t){e.props.clearActiveNode(),e.props.hideComponent("mainSider")}},"Constellation")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/random",onClick:function(t){return e.props.hideComponent("mainSider")}},"Random")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/edit/profile/",onClick:function(t){return e.props.hideComponent("mainSider")}},"Options")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"/help",onClick:function(t){t.preventDefault(),window.open("https://github.com/synthona/synthona-help/blob/main/README.md","_blank"),e.props.hideComponent("mainSider")}},"Help")),o.a.createElement(Pe,{className:"sider-menu-item"},o.a.createElement(Ee.a,{to:"#",onClick:this.toggleSignoutModal},"Sign Out")))),o.a.createElement(Te.a,{title:this.props.user.displayName,visible:this.state.showSignoutModal,className:"signout-modal",centered:!0,onOk:this.signOutHandler,okType:"primary",okText:"Sign Out",closable:!1,onCancel:this.toggleSignoutModal},o.a.createElement("p",null,"Are you sure you want to sign out?")))}}]),a}(r.Component),Me=Object(s.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{signOut:ee,hideComponent:oe,generateInstanceExport:ce,clearActiveNode:Z})(He),qe=(a(291),a(130)),Be=(a(123),a(27)),Ve=(a(107),a(32)),ze=a(70),Ke=(a(208),a(61)),Je=function(e){try{new URL(e)}catch(t){return!1}return!0},Ge=function(e){return null!=e.match(/\..+(jpeg|jpg|gif|png|webp)/)||e.includes("http://localhost")},Qe=(a(292),fe.a.Header),We=Ke.a.Option,Xe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).toggleInputMode=function(){"query"===n.state.inputMode?n.setState({inputMode:"create",modeIcon:"plus",placeholder:"create",nodeTypes:"text"}):n.setState({inputMode:"query",modeIcon:"search",placeholder:"query",nodeTypes:"all"})},n.toggleMainSider=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.mainSider?n.props.hideComponent("mainSider"):n.props.showComponent("mainSider");case 1:case"end":return e.stop()}}),e)}))),n.toggleSortOrder=function(){"ASC"===n.state.sortOrder?(n.setState({sortOrder:"DESC"}),localStorage.setItem("sortOrder","DESC")):(n.setState({sortOrder:"ASC"}),localStorage.setItem("sortOrder","ASC"))},n.renderCreateFileNodeOption=function(){if(!0===Object(E.a)())return o.a.createElement(We,{value:"file"},"files")},n.commandHandler=function(e){switch(e.target.blur(),n.state.inputMode){case"query":return n.props.searchNodes({searchQuery:n.state.input||"",type:n.state.nodeTypes,sortType:n.state.sortType,sortOrder:n.state.sortOrder});case"create":return n.createNodeHandler();default:return}},n.createNodeHandler=function(){var e;switch(n.props.activeNode&&(e=JSON.stringify(n.props.activeNode)),n.state.nodeTypes){case"text":n.props.createNode({isFile:!1,type:"text",name:n.state.input,preview:"",linkedNode:e}),n.setState({input:""}),d.push("/");break;case"file":Object(E.a)()?n.selectElectronFile():n.selectLocalFile(e);break;case"folder":Object(E.a)()&&n.selectElectronFolder();break;case"url":Ge(n.state.input)?(n.props.createNode({isFile:!1,type:"image",name:n.state.input,preview:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})):Je(n.state.input)?(n.props.createUrlNode({isFile:!1,type:"url",name:n.state.input,preview:n.state.input,path:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})):g.a.error("You must enter a valid URL",1),d.push("/");break;case"collection":n.props.createNode({isFile:!1,type:"collection",name:n.state.input,preview:"",content:n.state.input,linkedNode:e}),n.setState({input:""}),d.push("/");break;default:return}},n.selectElectronFile=function(){window.api&&window.api.send("toMain",{action:"show-file-picker"})},n.selectElectronFolder=function(){window.api&&window.api.send("toMain",{action:"show-folder-picker"})},n.selectLocalFile=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("multiple",!0),t.click(),t.onchange=Object(y.a)(b.a.mark((function a(){var r,o,i,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=[],o=Object(ze.a)(t.files);try{for(o.s();!(i=o.n()).done;)c=i.value,r.push({name:c.name,path:c.path})}catch(l){o.e(l)}finally{o.f()}return a.next=5,n.props.linkFileNodes(r,e);case 5:n.setState({input:""}),d.push("/");case 7:case"end":return a.stop()}}),a)})))},n.renderCreateFolderOption=function(){if(!0===Object(E.a)())return o.a.createElement(We,{value:"folder"},"folders")},n.renderSelectBefore=function(){return"query"===n.state.inputMode?o.a.createElement(Ke.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){n.setState({nodeTypes:e})}},o.a.createElement(We,{value:"all"},"all"),o.a.createElement(We,{value:"url"},"urls"),o.a.createElement(We,{value:"file"},"file"),o.a.createElement(We,{value:"folder"},"folder"),o.a.createElement(We,{value:"text"},"text"),o.a.createElement(We,{value:"image"},"images"),o.a.createElement(We,{value:"package"},"packages"),o.a.createElement(We,{value:"collection"},"collections")):o.a.createElement(Ke.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){n.setState({nodeTypes:e})}},o.a.createElement(We,{value:"text"},"text"),o.a.createElement(We,{value:"url"},"url"),n.renderCreateFileNodeOption(),n.renderCreateFolderOption(),o.a.createElement(We,{value:"collection"},"collection"))},n.renderSelectAfter=function(){return o.a.createElement("div",{className:"io-input-sort"},o.a.createElement(qe.a.Group,null,o.a.createElement(Ke.a,{showSearch:!0,showArrow:!1,value:n.state.sortType,onChange:function(e){n.setState({sortType:e}),localStorage.setItem("sortType",e)}},o.a.createElement(We,{value:"recent"},o.a.createElement(Ae.a,{type:"bulb",theme:"outlined"})," recent"),o.a.createElement(We,{value:"views"},o.a.createElement(Ae.a,{type:"thunderbolt",theme:"outlined"})," top"),o.a.createElement(We,{value:"created"},o.a.createElement(Ae.a,{type:"clock-circle",theme:"outlined"})," created")),o.a.createElement(Be.a,{title:"DESC"===n.state.sortOrder?"a-z":"z-a",mouseEnterDelay:1.1},o.a.createElement(Ve.a,{className:"io-input-button",onClick:function(){return n.toggleSortOrder()}},o.a.createElement(Ae.a,{type:"DESC"===n.state.sortOrder?"arrow-up":"arrow-down",theme:"outlined"})))))},n.state={input:n.props.query.searchQuery||"",nodeTypes:n.props.query.type||"all",sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder,createType:null,queryType:null,inputMode:"query",modeIcon:"search",placeholder:"query"},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Qe,{className:"page-header",style:this.props.fixed?{position:"fixed"}:null},o.a.createElement("ul",{className:"nav-list"},o.a.createElement("li",{className:"nav-item io-sider-button mobile-visible",style:{marginRight:"0"}},o.a.createElement(Ve.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleMainSider()}},o.a.createElement(Ae.a,{type:"bars",theme:"outlined"}))),o.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.3rem"}},o.a.createElement(Be.a,{title:"home",mouseEnterDelay:1.1},o.a.createElement(Ee.a,{type:"default",to:"/"},o.a.createElement(Ae.a,{type:"home",theme:"filled"})))),o.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"-0.1rem"}},o.a.createElement(Be.a,{title:"graph",mouseEnterDelay:1.1},o.a.createElement(Ee.a,{type:"default",to:"#",onClick:function(){e.props.clearActiveNode(),window.location="/graph"}},o.a.createElement(Ae.a,{type:"deployment-unit",theme:"outlined"})))),o.a.createElement("li",{className:"nav-item io-sider-button mobile-hidden",style:{padding:"0",marginRight:"-0.1rem"}},o.a.createElement(Be.a,{title:"random",mouseEnterDelay:1.1},o.a.createElement(Ve.a,{type:"default",shape:"circle",onClick:function(e){return window.location.href="/random"}},o.a.createElement(Ae.a,{type:"thunderbolt",theme:"filled"})))),o.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.1rem"}},o.a.createElement(Be.a,{title:"favorites",mouseEnterDelay:1.1},o.a.createElement(Ee.a,{type:"default",to:"/pins",style:{marginRight:"0.3rem"}},o.a.createElement(Ae.a,{type:"star",theme:"filled"})))),o.a.createElement("li",{className:"nav-item create-node-button"},o.a.createElement(Ve.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleInputMode()}},o.a.createElement(Ae.a,{type:this.state.modeIcon,theme:"outlined"}))),o.a.createElement("li",{className:"nav-search"},o.a.createElement(qe.a,{onPressEnter:function(t,a){return e.commandHandler(t)},maxLength:500,value:this.state.input,onChange:function(t){return e.setState({input:t.target.value})},defaultValue:this.props.query.searchQuery||"",placeholder:this.state.placeholder,addonBefore:this.renderSelectBefore(),addonAfter:this.renderSelectAfter(),className:"nav-search-input",id:"nav-primary-search"})))))}}]),a}(r.Component),Ye=Object(s.b)((function(e){return{user:e.auth.user,query:e.nodes.query,mainSider:e.components.componentList.mainSider,activeNode:e.nodes.activeNode}}),{signOut:ee,searchNodes:J,createNode:function(e,t){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_NODE"}),"text"===e.type&&((n=new z.a).insert(e.name),e.content=JSON.stringify(n)),t.prev=2,t.next=5,M.put("/node",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,content:e.content,linkedNode:e.linkedNode});case 5:r=t.sent,a({type:"CREATE_NODE_SUCCESS",payload:r.data.node}),200===r.status&&"text"===e.type&&d.push("/edit/text/"+r.data.node.uuid),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"CREATE_NODE_ERROR"}),g.a.error("There was a problem creating that node",1),d.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},linkFileNodes:le,createUrlNode:Q,showComponent:re,hideComponent:oe,getRandomNode:Y,clearActiveNode:Z})(Xe),Ze=(a(151),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).saveName=function(e){n.state.name!==e&&n.props.updateActiveNode({uuid:n.props.nodeData.uuid,name:e}),n.setState({name:e})},n.toggleDeleteModal=function(){n.state.showDeleteModal?n.setState({showDeleteModal:!1}):n.setState({showDeleteModal:!0})},n.deleteHandler=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showDeleteModal:!1}),n.setState({deleting:!0}),e.next=4,n.props.deleteNode(n.props.nodeData.uuid);case 4:n.props.clearActiveNode();case 5:case"end":return e.stop()}}),e)}))),n.toggleExportModal=function(){n.state.showExportModal?n.setState({showExportModal:!1}):n.setState({showExportModal:!0})},n.exportHandler=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showExportModal:!1}),e.next=3,n.props.generateExportByUUID(n.props.nodeData.uuid);case 3:case"end":return e.stop()}}),e)}))),n.setUrlPreviewImage=function(e){Ge(e)&&Je(e)?(g.a.success("updated the preview image"),n.props.updateActiveNode({uuid:n.props.nodeData.uuid,preview:e})):""===e?(g.a.success("removed the preview image"),n.props.updateActiveNode({uuid:n.props.nodeData.uuid,preview:""})):g.a.error("there was a problem setting the preview image",1)},n.togglePinned=function(){!0===n.state.pinned?(n.setState({pinned:!1,pinnedState:"outlined"}),n.props.updateActiveNode({uuid:n.props.nodeData.uuid,pinned:!1})):(n.setState({pinned:!0,pinnedState:"filled"}),n.props.updateActiveNode({uuid:n.props.nodeData.uuid,pinned:!0}))},n.setPreviewToLocalFilePath=function(){if(null===n.props.nodeData.preview){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png","image/webp"]),e.click(),e.onchange=Object(y.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.files[0],n.props.updateActiveNode({uuid:n.props.nodeData.uuid,preview:a.path});case 2:case"end":return t.stop()}}),t)})))}else n.props.clearNodePreview(n.props.nodeData)},n.renderTitle=function(){return n.state.editable?o.a.createElement("input",{type:"text",className:"full-card-title",style:{backgroundColor:"transparent"},onBlur:function(){return n.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:n.state.name,onKeyPress:function(e){"Enter"===e.key&&n.setState({editable:null})},onChange:function(e){n.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):o.a.createElement("h3",{className:"full-card-title",style:{color:n.props.theme.cardTitleColor},onDoubleClick:function(e){e.preventDefault(),n.setState({editable:!0})}},n.state.name)},n.renderContextualButtons=function(){switch(n.props.nodeData.type){case"package":var e=null;if(n.props.nodeData.metadata)e="string"===typeof n.props.nodeData.metadata?JSON.parse(n.props.nodeData.metadata):n.props.nodeData.metadata;return e&&e.importing?o.a.createElement(r.Fragment,null):e&&e.expanded?o.a.createElement(Be.a,{title:"restore",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.props.removeImportsByPackage(n.props.nodeData.uuid)}},o.a.createElement(Ae.a,{type:"undo",theme:"outlined",className:"full-card-button"})))):o.a.createElement(Be.a,{title:"expand",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.props.unpackImport(n.props.nodeData.uuid)}},o.a.createElement(Ae.a,{type:"gift",theme:"filled",className:"full-card-button"}))));case"url":return o.a.createElement(Be.a,{title:"preview image",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.setState({showUrlPreviewImageModal:!0})}},o.a.createElement(Ae.a,{type:"picture",theme:"outlined",className:"full-card-button"}))));case"file":return Object(E.a)()?o.a.createElement(Be.a,{title:"replace preview image",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.setPreviewToLocalFilePath()}},o.a.createElement(Ae.a,{type:"picture",theme:"outlined",className:"full-card-button"})))):void 0;case"audio":case"zip":return o.a.createElement(Be.a,{title:"replace preview image",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.setPreviewToLocalFilePath()}},o.a.createElement(Ae.a,{type:"picture",theme:"outlined",className:"full-card-button"}))));case"image":return o.a.createElement(Be.a,{title:"set as app background",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){localStorage.setItem("background-image",n.props.nodeData.preview),window.location.reload()}},o.a.createElement(Ae.a,{type:"layout",className:"full-card-button"}))));default:return}},n.renderRevealInExplorerButton=function(){if(n.props.nodeData.isFile)return o.a.createElement(Be.a,{title:"open in file explorer",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.props.openFileInExplorer(n.props.nodeData.uuid)}},o.a.createElement(Ae.a,{type:"folder-open",theme:"outlined",className:"full-card-button"}))))},n.renderExportButton=function(){if("package"!==n.props.nodeData.type)return o.a.createElement(Be.a,{title:"generate export",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(e){n.toggleExportModal()}},o.a.createElement(Ae.a,{type:"gift",theme:"outlined",className:"full-card-button"}))))},n.state={name:n.props.nodeData.name,preview:n.props.nodeData.preview,pinned:n.props.nodeData.pinned,pinnedState:"outlined",editable:!1,showDeleteModal:null,showExportModal:null,showUrlPreviewImageModal:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.nodeData.pinned?this.setState({pinnedState:"filled"}):this.setState({pinnedState:"outlined"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"full-card-options",style:{backgroundColor:this.props.theme.cardHeaderColor}},this.renderTitle(),o.a.createElement("ul",{className:"full-card-buttons-list"},o.a.createElement(Be.a,{title:"associations",mouseEnterDelay:1.1},o.a.createElement("li",{className:"mobile-visible"},o.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.nodeData)}},o.a.createElement(Ae.a,{type:"branches",theme:"outlined",className:"full-card-button"})))),o.a.createElement(Be.a,{title:"constellation",mouseEnterDelay:1.1},o.a.createElement("li",{className:"mobile-visible"},o.a.createElement("button",{onClick:function(t){return window.location.replace("/graph/".concat(e.props.nodeData.uuid))}},o.a.createElement(Ae.a,{type:"deployment-unit",theme:"outlined",className:"full-card-button"})))),o.a.createElement(Be.a,{title:"heart",mouseEnterDelay:1.1},o.a.createElement("li",{className:"mobile-visible"},o.a.createElement("button",{onClick:function(t){return e.togglePinned()}},o.a.createElement(Ae.a,{type:"heart",theme:this.state.pinnedState,className:"full-card-button"})))),this.renderContextualButtons(),this.renderExportButton(),this.renderRevealInExplorerButton(),o.a.createElement(Be.a,{title:"open in browser",mouseEnterDelay:1.1},o.a.createElement("li",null,o.a.createElement("button",{onClick:function(t){return window.open("/associations/".concat(e.props.nodeData.uuid),"_blank")}},o.a.createElement(Ae.a,{type:"global",theme:"outlined",className:"full-card-button"})))),o.a.createElement(Be.a,{title:"delete",mouseEnterDelay:1.1},o.a.createElement("li",{className:"mobile-visible"},o.a.createElement("button",{onClick:function(t){return e.toggleDeleteModal()}},o.a.createElement(Ae.a,{type:"delete",theme:"outlined",className:"full-card-button delete"}))))),o.a.createElement(Te.a,{title:"Confirm Deletion",visible:this.state.showDeleteModal,className:"delete-modal",centered:!0,onOk:this.deleteHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okType:"danger",okText:"Delete",closable:!1,onCancel:this.toggleDeleteModal},o.a.createElement("p",null,"Are you sure you want to delete ",o.a.createElement("b",null,this.props.nodeData.name||"untitled"),"?")),o.a.createElement(Te.a,{title:"Confirm Export",visible:this.state.showExportModal,className:"delete-modal",centered:!0,onOk:this.exportHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okText:"Generate",closable:!1,onCancel:this.toggleExportModal},o.a.createElement("p",null,"Generate export from ",o.a.createElement("b",null,this.props.nodeData.name||"untitled"),"? The export will contain ",o.a.createElement("b",null,this.props.nodeData.name||"untitled")," along with all its associations, and appear in the favorites when it is completed.")),o.a.createElement(Te.a,{title:"Preview Image",visible:this.state.showUrlPreviewImageModal,className:"full-card-modal",centered:!0,onOk:function(t){e.setState({showUrlPreviewImageModal:!1}),e.setUrlPreviewImage(e.state.preview)},afterClose:function(){document.body.style.removeProperty("overflow")},okText:"save",closable:!1,onCancel:function(t){e.setState({preview:e.props.nodeData.preview,showUrlPreviewImageModal:!1}),window.getSelection().removeAllRanges()}},o.a.createElement("input",{type:"text",className:"full-card-modal-input",autoFocus:!0,maxLength:"250",onFocus:function(e){e.target.select()},placeholder:"image URL",value:this.state.preview||"",onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),e.setState({showUrlPreviewImageModal:!1}),e.setUrlPreviewImage(e.state.preview))},onChange:function(t){return e.setState({preview:t.target.value})}})))}}]),a}(r.Component)),$e=Object(s.b)((function(e){return{nodeData:e.nodes.activeNode,theme:e.components.theme}}),{showComponent:re,updateActiveNode:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_ACTIVE_NODE"}),t.prev=1,t.next=4,M.patch("/node",{uuid:e.uuid,name:e.name,preview:e.preview,pinned:e.pinned});case 4:n=t.sent,a({type:"UPDATE_ACTIVE_NODE_SUCCESS",uuid:e.uuid,result:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"UPDATE_ACTIVE_NODE_ERROR"}),g.a.error("There was a problem saving your changes",1),d.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},clearNodePreview:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_ACTIVE_NODE"}),t.prev=1,t.next=4,M.patch("/node/preview/clear",{uuid:e.uuid});case 4:window.location.reload(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),g.a.error("There was a problem saving your changes",1),d.push("/");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},unpackImport:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.put("/port/import/",{uuid:e});case 3:200===t.sent.status&&(g.a.success("started import process!",3),d.push("/")),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),g.a.error("Could not import instance data",1),d.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},openFileInExplorer:ue,deleteNode:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"DELETE_NODE"}),t.prev=1,t.next=4,M.delete("/node",{params:{uuid:e}});case 4:200===t.sent.status&&(d.push("/"),a({type:"DELETE_NODE_SUCCESS",uuid:e}),g.a.success("successfully deleted",1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"DELETE_NODE_ERROR"}),g.a.error("There was a problem deleting the node",1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},clearActiveNode:Z,generateExportByUUID:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",g.a.success("generating export!",2),t.prev=3,a({type:"GENERATE_EXPORT"}),t.next=7,M.put("/port/export/",{uuid:e,bidirectional:r});case 7:200===(o=t.sent).status&&(a({type:"GENERATE_EXPORT_SUCCESS",payload:o.data}),d.push("/")),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),a({type:"GENERATE_EXPORT_ERROR"}),g.a.error("Could not export instance data",1),d.push("/");case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()},removeImportsByPackage:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.a.success("removing imports...",1),t.prev=1,t.next=4,M.patch("/port/export/undo/",{uuid:e});case 4:200===t.sent.status&&d.push("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),g.a.error("Could not remove imports for this export",1),d.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})(Ze),et=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).renderTitle=function(){return n.state.editable?o.a.createElement("input",{type:"text",className:"nodelist-item-title",style:{backgroundColor:"transparent"},onBlur:function(){return n.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:n.state.name,onKeyPress:function(e){"Enter"===e.key&&n.setState({editable:null})},onChange:function(e){n.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):o.a.createElement("h3",{className:"nodelist-item-title",tabIndex:0,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),n.setState({editable:!0}))},style:{color:n.props.theme.cardTitleColor},onDoubleClick:function(e){e.preventDefault(),n.setState({editable:!0})}},n.state.name)},n.renderLightbulbIcon=function(){if("recent"===localStorage.getItem("sortType")||window.location.href.includes("associations"))return o.a.createElement("button",{onClick:function(e){return n.props.markNodeView(n.props.node)}},o.a.createElement(Ae.a,{type:"bulb",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:n.props.theme.cardButtonColor}}))},n.saveName=function(e){n.state.name!==e&&(n.props.updateNode({uuid:n.props.node.uuid,name:e}),n.props.node.name=e,n.setState({name:e}))},n.state={name:n.props.node.name,editable:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"nodelist-options",style:{backgroundColor:this.props.theme.cardHeaderColor}},this.renderTitle(),o.a.createElement("div",{className:"nodelist-options-buttons",style:{marginLeft:"auto"}},o.a.createElement("button",{tabIndex:0,onClick:function(t){return window.location.replace("/graph/"+e.props.node.uuid)}},o.a.createElement(Ae.a,{type:"deployment-unit",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:this.props.theme.cardButtonColor}})),this.renderLightbulbIcon(),o.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.node)}},o.a.createElement(Ae.a,{type:"branches",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:this.props.theme.cardButtonColor}}))))}}]),a}(r.Component),tt=Object(s.b)((function(e){return{theme:e.components.theme}}),{markNodeView:W,showComponent:re,updateNode:G})(et),at=function(e){return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){t.preventDefault(),t.shiftKey?(e.handleClick(),window.getSelection().removeAllRanges(),window.location.replace("/edit/text/".concat(e.node.uuid))):(t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))},onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),e.handleClick(),window.location.replace("/edit/text/".concat(e.node.uuid)))},onContextMenu:function(t){t.preventDefault(),e.handleClick(),window.getSelection().removeAllRanges(),window.location.replace("/edit/text/".concat(e.node.uuid))}},o.a.createElement("p",{style:{color:e.theme.cardTextColor,backgroundColor:e.theme.cardBodyColor}},e.node.preview))));case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,o.a.createElement("p",null,e.node.preview)));case"full":return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/edit/text/".concat(e.node.uuid),onContextMenu:function(e){window.getSelection().removeAllRanges()}},o.a.createElement("p",{style:{backgroundColor:e.theme.cardBodyColor}},e.node.preview))));case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},nt=a(41),rt=a.n(nt),ot=function(e){var t=!1,a=function(a){e.node.isFile&&(a.target.src=rt.a,t=!0)},n=function(a){!t&&e.node.isFile?(a.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid)):Object(E.a)()&&e.node.isFile?(a.preventDefault(),function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png"]),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path,preview:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))}()):(a.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid)))},i=function(){return null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=rt.a),o.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),o.a.createElement(Ee.a,{id:"image-node-card-link",to:"/associations/".concat(e.node.uuid),onClick:function(t){!function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))}(t)}},o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{objectFit:"cover",width:"100%",height:"13.2rem"}}))))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,i());case"preview":return o.a.createElement(r.Fragment,null,(null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=rt.a),o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{objectFit:"cover",height:"13.2rem",width:"100%"}}))));case"full":return o.a.createElement(r.Fragment,null,function(){null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=rt.a);var r="img-"+(JSON.parse(localStorage.getItem("image-sizing"))||"classic").replace(" ","-");return o.a.createElement("div",{className:"full-node-item "+r},o.a.createElement($e,null),o.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{cursor:"pointer"},onClick:function(e){n(e)}}))}());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},it=function(e){var t=function(){return e.node.preview?o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover"},onError:function(e){return e.target.src=rt.a}}):o.a.createElement(Ae.a,{type:"bulb",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"4.3rem 3.3rem 3.3rem",height:"13.2rem",backgroundColor:e.theme.cardBodyColor}})},a=function(){var a="img-"+(JSON.parse(localStorage.getItem("image-sizing"))||"classic").replace(" ","-");return o.a.createElement("div",{className:"full-node-item "+a},o.a.createElement($e,null),e.node.path.includes("https://www.youtube.com/embed/")?o.a.createElement("iframe",{title:e.node.name,src:e.node.path,style:{width:"100%",height:"100vh",border:"none"},allowFullScreen:!0,sandbox:e.node.path.includes("https://www.youtube.com/embed/")?"allow-scripts allow-same-origin allow-popups":"",id:"node-card-iframe"}):o.a.createElement("a",{href:e.node.path,target:"_blank",rel:"noopener noreferrer"},t()))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,o.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),o.a.createElement("a",{href:"/associations/".concat(e.node.uuid),rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))},onContextMenu:function(t){t.preventDefault(),window.getSelection().removeAllRanges(),window.open(e.node.path,"_blank")},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},t())));case"preview":return o.a.createElement(r.Fragment,null,e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",width:"100%"}})):o.a.createElement(r.Fragment,null,o.a.createElement(Ae.a,{type:"bulb",theme:"outlined",className:"node-card-icon"})));case"full":return o.a.createElement(r.Fragment,null,a());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},ct=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},n=function(n){t?Object(E.a)()?(n.preventDefault(),window.getSelection().removeAllRanges(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.getSelection().removeAllRanges(),e.launchFile(e.node.uuid))},i=function(a){return null===e.node.path&&(t=!0,e.node.preview=rt.a),e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",height:a?"100%":"13.2rem",width:"100%"}})):o.a.createElement(Ae.a,{type:"file",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:a?"100%":"13.2rem"},theme:"filled",className:"node-card-icon"})},c=function(){return o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(a){return function(a){t?Object(E.a)()?(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(a)},onContextMenu:function(e){return n(e)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},i()))},l=function(){return o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)},onContextMenu:function(e){return n(e)}},o.a.createElement(r.Fragment,null,i(!0))))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,c());case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,i()));case"full":return o.a.createElement(r.Fragment,null,l());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},lt=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},n=function(){return null===e.node.path&&(t=!0,e.node.preview=rt.a),e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):o.a.createElement(Ae.a,{type:"folder",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"13.2rem"},theme:"filled",className:"node-card-icon"})},i=function(){return o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(a){return function(a){t?Object(E.a)()?(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(a)},onContextMenu:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},n()))},c=function(){return o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)}},o.a.createElement(r.Fragment,null,n())))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,i());case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,n()));case"full":return o.a.createElement(r.Fragment,null,c());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},st=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},n=function(){return null===e.node.path&&(t=!0,e.node.preview=rt.a),e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",height:"13.2rem",width:"100%"}})):o.a.createElement(Ae.a,{type:"sound",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"13.2rem"},theme:"filled",className:"node-card-icon"})},i=function(){return o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},n()))},c=function(){return o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)}},o.a.createElement(r.Fragment,null,n())))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,i());case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,n()));case"full":return o.a.createElement(r.Fragment,null,c());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},ut=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},n=function(){return null===e.node.path&&(t=!0,e.node.preview=rt.a),e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",height:"13.2rem",width:"100%"}})):o.a.createElement(Ae.a,{type:"gift",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"13.2rem"},theme:"filled",className:"node-card-icon"})},i=function(){return o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},n()))},c=function(){return o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)}},o.a.createElement(r.Fragment,null,n())))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,i());case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,n()));case"full":return o.a.createElement(r.Fragment,null,c());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},dt=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",["application/zip"]),a.click(),a.onchange=Object(y.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},n=function(){return null===e.node.path&&(t=!0,e.node.preview=rt.a),e.node.preview?o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):o.a.createElement(Ae.a,{type:"file-zip",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"100%"},theme:"filled",className:"node-card-icon"})},i=function(){return o.a.createElement("li",{className:"nodelist-item"},o.a.createElement(tt,{node:e.node}),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},n()))},c=function(){return o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(E.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)}},o.a.createElement(r.Fragment,null,n())))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,i());case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,n()));case"full":return o.a.createElement(r.Fragment,null,c());case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},pt=function(e){var t=function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))};return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,function(){var a=0,n=null;switch(e.node.preview&&(a=(n=JSON.parse(e.node.preview)).length),a){case 0:return o.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},o.a.createElement(Ae.a,{type:"branches",theme:"outlined",className:"node-card-icon"})));case 1:return o.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},o.a.createElement(ft,{type:n[0].type,element:"preview",node:n[0]})));case 2:return o.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},o.a.createElement("ul",{className:"nodelist-collection-grid"},o.a.createElement("li",{className:"nodelist-collection-grid-full-width"},o.a.createElement(ft,{type:n[0].type,element:"preview",node:n[0]})),o.a.createElement("li",{className:"nodelist-collection-grid-full-width"},o.a.createElement(ft,{type:n[1].type,element:"preview",node:n[1]})))));case 3:return o.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},o.a.createElement("ul",{className:"nodelist-collection-grid"},o.a.createElement("li",{className:"nodelist-collection-grid-full-width"},o.a.createElement(ft,{type:n[0].type,element:"preview",node:n[0]})),o.a.createElement("li",null,o.a.createElement(ft,{type:n[1].type,element:"preview",node:n[1]})),o.a.createElement("li",null,o.a.createElement(ft,{type:n[2].type,element:"preview",node:n[2]})),o.a.createElement("li",null))));case 4:return o.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},o.a.createElement("ul",{className:"nodelist-collection-grid"},o.a.createElement("li",null,o.a.createElement(ft,{type:n[0].type,element:"preview",node:n[0]})),o.a.createElement("li",null,o.a.createElement(ft,{type:n[1].type,element:"preview",node:n[1]})),o.a.createElement("li",null,o.a.createElement(ft,{type:n[2].type,element:"preview",node:n[2]})),o.a.createElement("li",null,o.a.createElement(ft,{type:n[3].type,element:"preview",node:n[3]})))));default:return}}());case"full":return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null)));case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},mt=function(e){return o.a.createElement(r.Fragment,null,function(){switch(e.element){case"card":return o.a.createElement(r.Fragment,null,o.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),o.a.createElement(Ee.a,{to:"/profile/".concat(e.node.path),replace:!0,onClick:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/profile/".concat(e.node.path))},onContextMenu:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/profile/".concat(e.node.path))}},o.a.createElement("img",{src:e.node.preview||pe.a,alt:e.node.name,style:{objectFit:"cover",height:"13.2rem",width:"100%"}}))));case"preview":return o.a.createElement(r.Fragment,null,o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:e.node.preview||pe.a,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})));case"full":return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"full-node-item"},o.a.createElement($e,null),o.a.createElement(Ee.a,{to:"/profile/".concat(e.node.path)},o.a.createElement("p",null,e.node.name))));case"association-link":return o.a.createElement(r.Fragment,null,o.a.createElement(Ee.a,{to:"/profile/".concat(e.node.path),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},ht=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleNodeClick=function(){var e=n.props.node.uuid;if(n.props.activeNode){var t=n.props.activeNode.uuid;n.props.updateLinkStrength(e,t)}},n.handleAssociatonClick=function(){if(n.props.hideComponent("associationSider"),n.props.siderNodeUUID&&n.props.node.uuid){var e=n.props.siderNodeUUID,t=n.props.node.uuid;n.props.updateLinkStrength(e,t)}},n.toggleHeader=function(){n.state.showHeader?n.setState({showHeader:!1}):n.setState({showHeader:!0})},n.renderHeader=function(){return n.state.showHeader?o.a.createElement(tt,{node:n.props.node}):void 0},n.renderNode=function(){switch(n.props.type){case"text":return o.a.createElement(at,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,theme:n.props.theme});case"image":return o.a.createElement(ot,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,updateNode:n.props.updateNode,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader,launchExplorer:n.props.openFileInExplorer,launchFile:n.props.launchFileNode});case"url":return o.a.createElement(it,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader,theme:n.props.theme});case"file":return o.a.createElement(ct,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchFile:n.props.launchFileNode,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"folder":return o.a.createElement(lt,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchFile:n.props.launchFileNode,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"audio":return o.a.createElement(st,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchFile:n.props.launchFileNode,theme:n.props.theme});case"package":return o.a.createElement(ut,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"zip":return o.a.createElement(dt,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"collection":return o.a.createElement(pt,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader});case"user":return o.a.createElement(mt,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader});default:return}},n.state={showHeader:!0},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,this.renderNode())}}]),a}(r.Component),ft=Object(s.b)((function(e){return{theme:e.components.theme}}),{updateLinkStrength:ne,hideComponent:oe,launchFileNode:se,openFileInExplorer:ue,updateNode:G})(ht),Et=function(e){return o.a.createElement("div",null,function(){if(e.node)return o.a.createElement(ft,{type:e.node.type,element:"card",node:e.node,activeNode:e.activeNode,theme:e.theme})}())},gt=(a(577),a(221)),vt=(a(579),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleDeleteAssociation=function(){var t=e.props.siderNodeUUID,a=e.props.association.uuid?e.props.association.uuid:e.props.association.linkedNodeUUID;if(e.props.activeNode)var n=e.props.activeNode.uuid;if(t&&a){e.props.deleteAssociationLink(t,a);var r=window.location.pathname;(r.includes("associations")||r.includes("/edit/text/"))&&n&&n===t?e.props.removeFromAssociationList(a):(r.includes("associations")||r.includes("/edit/text/"))&&n&&n===a&&(e.props.removeFromAssociationList(t),e.props.hideComponent("associationSider"))}},e.renderAssociationLink=function(t){return o.a.createElement("li",{className:"association-list-item"},o.a.createElement(Be.a,{title:t.name,mouseLeaveDelay:0,mouseEnterDelay:.3},o.a.createElement(Ve.a,{icon:"close",shape:"circle",size:"small",onClick:function(t){return e.handleDeleteAssociation()}}),o.a.createElement(ft,{type:t.type,element:"association-link",node:t,siderNodeUUID:e.props.siderNodeUUID})))},e}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,this.renderAssociationLink(this.props.association))}}]),a}(r.Component)),bt=Object(s.b)((function(e){return{siderNodeUUID:e.components.componentList.associationSider.content.uuid,activeNode:e.nodes.activeNode}}),{hideComponent:oe,deleteAssociationLink:function(e,t){return function(){var a=Object(y.a)(b.a.mark((function a(n){var r,o,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=JSON.parse(localStorage.getItem("link-mode")),o="bidirectional"===r?"yes":"no",n({type:"DELETE_ASSOCIATION_LINK"}),a.prev=3,a.next=6,M.delete("/association",{params:{nodeA:e,nodeB:t,bidirectional:o}});case 6:200===(i=a.sent).status&&n({type:"DELETE_ASSOCIATION_LINK_SUCCESS",deletedUUID:i.data.deletedUUID}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(3),n({type:"DELETE_ASSOCIATION_LINK_ERROR"}),g.a.error("There was a problem deleting the node",1);case 14:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()},removeFromAssociationList:function(e){return{type:"REMOVE_FROM_ASSOCIATION_LIST",deletedUUID:e}},updateLinkStrength:ne})(vt),yt=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).loadMore=function(){e.props.fetchAssociationLinkList({nodeUUID:e.props.nodeUUID,page:parseInt(e.props.page)+1})},e.renderAssociationLinkList=function(){var t=e.props.associations;return e.props.isFetching?o.a.createElement(Le,{alignment:"top"}):null!==t?t.map((function(e){return o.a.createElement(bt,{key:e.uuid,association:e})})):o.a.createElement(Le,null)},e.renderLoadMoreButton=function(){var t=e.props.associations.length;if(e.props.totalItems>t)return o.a.createElement("li",{style:{listStyle:"none",marginTop:"0.5rem",textAlign:"center"}},o.a.createElement("button",{style:{margin:"1rem 0",width:"90%",backgroundColor:"#272727",color:"#16e998"},onClick:e.loadMore},"load more"))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchAssociationLinkList({nodeUUID:this.props.nodeUUID})}},{key:"render",value:function(){return o.a.createElement("ul",{id:"node-info-list",className:"association-list"},this.renderAssociationLinkList(),this.renderLoadMoreButton())}}]),a}(r.Component),wt=Object(s.b)((function(e){return{associations:e.associations.associationLinkList,page:e.associations.associationLinkListPage,totalItems:e.associations.totalLinkListItems,isFetching:e.associations.isFetching,activeNode:e.nodes.activeNode}}),{fetchAssociationLinkList:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o,i,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",o=JSON.parse(localStorage.getItem("association-sort"))||"last updated",i=JSON.parse(localStorage.getItem("association-sort-order"))||"desc",t.prev=4,e.page||(a({type:"RESET_ASSOCIATION_LINK_LIST"}),e.page=1),a({type:"FETCH_ASSOCIATIONS_LINK_LIST"}),t.next=9,M.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page,bidirectional:r,sortOrder:i,sortType:o}});case 9:c=t.sent,a({type:"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS",payload:c.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),a({type:"FETCH_ASSOCIATIONS_LINK_LIST_ERROR"}),g.a.error("Could not fetch items",1),d.push("/");case 18:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}()}})(yt),Ot=gt.a.Option,St=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).createAssociationHandler=function(){var e=Object(y.a)(b.a.mark((function e(t){var a,r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=n.props.associationSiderData.content,n.state.autocompleteValues.forEach((function(e){e.uuid===t&&a.push(e.uuid)})),o=a[0],i=r.uuid,e.next=7,n.props.createAssociation(i,o);case 7:n.setState({autocompleteOptions:[],autocompleteValues:null,inputText:""}),n.renderAutocompleteValues("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderAutocompleteValues=function(){var e=Object(y.a)(b.a.mark((function e(t){var a,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.associationSiderData.content,n.setState({inputText:t}),e.next=4,n.props.associationAutocomplete({searchQuery:t||"",uuid:a.uuid});case 4:(r=e.sent)&&(n.setState({autocompleteValues:r.map((function(e){return e}))}),i=r.map((function(e){return o.a.createElement(Ot,{key:e.uuid},o.a.createElement(Be.a,{title:e.name,mouseEnterDelay:.7,placement:"left"},e.name))})),n.setState({autocompleteOptions:i}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideInfoSider=function(){n.setState({autocompleteOptions:null,autocompleteValues:null,inputText:""}),n.props.hideComponent("associationSider")},n.renderContent=function(){if(n.props.associationSiderData){var e=n.props.associationSiderData.content;return o.a.createElement("div",{className:"node-info-sider-container",style:{textAlign:"center"}},o.a.createElement(_e.a,{className:"node-info-sider",placement:"right",closable:!1,title:e.name,onClose:function(){n.hideInfoSider(),document.documentElement.style.cssText=""},visible:n.props.associationSiderData.visible},o.a.createElement(gt.a,{style:{width:200},placeholder:"associate",value:n.state.inputText,onSearch:function(e){return n.renderAutocompleteValues(e)},onFocus:function(e){return n.renderAutocompleteValues(e)},onSelect:function(e){return n.createAssociationHandler(e)}},n.state.autocompleteOptions),o.a.createElement("br",null),o.a.createElement(wt,{nodeUUID:e.uuid})))}},n.state={autocompleteOptions:null,autocompleteValues:null,inputText:""},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,this.renderContent())}}]),a}(r.Component),Ct=Object(s.b)((function(e){return{associationSiderData:e.components.componentList.associationSider,page:e.associations.associationLinkListPage}}),{signOut:ee,hideComponent:oe,createAssociation:function(e,t){return function(){var a=Object(y.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"CREATE_ASSOCIATION"}),a.next=4,M.put("/association",{nodeUUID:e,linkedNodeUUID:t});case 4:r=a.sent,n({type:"CREATE_ASSOCIATION_SUCCESS",association:r.data.association,node:r.data.node,linkedNode:r.data.linkedNode,nodeUUID:e}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"CREATE_ASSOCIATION_ERROR"}),g.a.error("Could not create association",1),d.push("/");case 13:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},associationAutocomplete:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",t.prev=2,t.next=5,M.get("/association/autocomplete",{params:{searchQuery:e.searchQuery,nodeUUID:e.uuid,bidirectional:r}});case 5:return o=t.sent,t.abrupt("return",o.data.nodes);case 9:t.prev=9,t.t0=t.catch(2),g.a.error("Could not search nodes",1),d.push("/");case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}})(St),Nt=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).infiniteScroll=function(e){n.endReached()&&!n.props.isFetching&&(n.setState({topOfPage:!1}),n.props.fetchNodes({page:n.props.query.page+1,type:n.props.query.type,searchQuery:n.props.query.searchQuery,sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder}))},n.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),o=e+window.pageYOffset;return window.pageYOffset<1&&!n.props.isFetching&&!n.state.topOfPage&&(n.setState({topOfPage:!0}),n.props.fetchNodes({page:1,type:n.props.query.type,searchQuery:n.props.query.searchQuery,sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder})),o>=r-1e3},n.renderNodeList=function(){var e=n.props.nodes;return null!==e&&e.length>0?e.map((function(e){return e.uuid?o.a.createElement(Et,{key:e.uuid,node:e}):o.a.createElement(r.Fragment,null)})):n.props.query.searchQuery&&!n.props.isFetching&&"none"!==JSON.parse(localStorage.getItem("fallback-search"))?o.a.createElement("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",alignItems:"top",color:"white"}},o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/search?q=".concat(encodeURIComponent(n.props.query.searchQuery)),style:{backgroundColor:"#272727",color:"white",borderRadius:"3px",padding:"0.5rem 1rem"}},"no matches ~ search online instead?")):void 0},n.state={topOfPage:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchNodes({page:1,type:this.props.query.type,searchQuery:this.props.query.searchQuery,sortType:this.props.query.sortType,sortOrder:this.props.query.sortOrder}),window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return o.a.createElement("div",{className:"nodelist-container"},o.a.createElement("ul",{className:"nodelist"},this.renderNodeList()),o.a.createElement(Ct,null))}}]),a}(r.Component),kt=Object(s.b)((function(e){return{nodes:e.nodes.nodeList,query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:K})(Nt),xt=fe.a.Content,jt=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderMainSider=function(){if(e.props.mainSider)return o.a.createElement(Me,null)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="home",document.body.style.removeProperty("overflow"),window.scrollTo({top:0,behavior:"smooth"}),localStorage.removeItem("quillScrollY")}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(fe.a,null,this.renderMainSider(),o.a.createElement(xt,{style:{minHeight:"100vh"}},o.a.createElement(Ye,null),o.a.createElement("div",{className:"list-container"},o.a.createElement(kt,null)))))}}]),a}(r.Component),Tt=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(jt),_t=(a(580),fe.a.Content),At=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).toggleAvatarModal=function(){!1===n.state.avatarModal?n.setState({avatarModal:!0}):n.setState({avatarModal:!1})},n.renderMainSider=function(){if(n.props.mainSider)return o.a.createElement(Me,null)},n.initializeFromUrlParams=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.match.params.username);case 2:(t=e.sent)?(n.setState({initialized:!0,username:t.username,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}),n.props.markNodeView({uuid:t.nodeId}),document.title=t.displayName):(g.a.error("there was a problem loading the user"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.state={initialized:!1,username:"",displayName:"",bio:"",avatar:null,header:null,avatarModal:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title=this.props.match.params.username,this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){document.body.style.removeProperty("overflow"),this.state.username!==this.props.match.params.username&&(document.title=this.props.match.params.username,this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.hideComponent("mainSider")}},{key:"render",value:function(){return this.state.initialized?o.a.createElement("div",{className:"profile-container"},this.renderMainSider(),o.a.createElement(fe.a,null,o.a.createElement(_t,{style:{marginBottom:"0"},className:"Profile"},o.a.createElement(Ye,null),o.a.createElement("div",{className:"profile-card"},o.a.createElement("button",{href:"/profile/".concat(this.state.username)},o.a.createElement("div",{className:"Profile-header"},o.a.createElement("img",{src:this.state.header||pe.a,alt:"example",draggable:"false"}))),o.a.createElement("div",{className:"Profile-avatar"},o.a.createElement("img",{src:this.state.avatar||Fe.a,alt:"profile",draggable:"false",onClick:this.toggleAvatarModal})),o.a.createElement("div",{className:"Profile-info"},o.a.createElement("h2",{className:"Profile-displayName"},this.state.displayName,o.a.createElement("div",{className:"verified-sign-container"},o.a.createElement("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",className:"verified-sign"},o.a.createElement("g",null,o.a.createElement("path",{d:"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"}))))),o.a.createElement("i",{className:"Profile-username"},"@".concat(this.state.username)),o.a.createElement("p",{className:"Profile-bio"},this.state.bio))),o.a.createElement(Te.a,{title:this.state.displayName,visible:this.state.avatarModal,className:"profile-modal",centered:!0,onCancel:this.toggleAvatarModal,closable:!1,footer:null,afterClose:function(){document.body.style.removeProperty("overflow")}},o.a.createElement("img",{src:this.state.avatar||Fe.a,alt:"avatar"})),o.a.createElement(kt,null)))):o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(fe.a,null,o.a.createElement(fe.a,null,o.a.createElement(Le,null))))}}]),a}(r.Component),Dt=Object(s.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{fetchUserByUsername:te,showComponent:re,hideComponent:oe,markNodeView:W})(At),Rt=(a(581),a(582),a(309)),It=function(e){return o.a.createElement("div",null,o.a.createElement("li",{style:{color:"black",width:"100%",backgroundColor:"white",padding:"0.7rem 1.7rem",margin:0,borderBottom:"1px solid grey"}},o.a.createElement("div",{style:{float:"left",margin:0,padding:0}},e.name),function(){switch(e.type){case"string":return o.a.createElement("input",{type:"text",defaultValue:e.value,style:{float:"right",margin:0,padding:0},onBlur:function(t){e.onChange(e.keyName,t.target.value)}});case"boolean":return o.a.createElement(Rt.a,{checked:e.value,checkedChildren:"",unCheckedChildren:"",style:{float:"right",margin:0,padding:0},onBlur:function(t){e.onChange(e.keyName,!e.value)}});case"number":return o.a.createElement("input",{type:"text",defaultValue:e.value.toString(),style:{float:"right",margin:0,padding:0},onBlur:function(t){e.onChange(e.keyName,parseInt(t.target.value))}});case"dropdown":var t=e.optionObject.options.map((function(e){return o.a.createElement("option",{value:e,key:e},e)}));return o.a.createElement("select",{name:e.keyName,id:e.keyName,defaultValue:e.value,style:{float:"right",margin:0,padding:0},onChange:function(t){e.onChange(e.keyName,t.target.value)}},t);default:return}}()))},Ft=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).loadOptions=function(){var e=Object($.loadClientConfig)();n.setState({clientConfig:e}),E.a&&n.setState({backendConfig:E.a?JSON.parse(localStorage.getItem("backend-config")):null})},n.updateClientConfigValue=function(e,t){var a=n.state.clientConfig.map((function(a){return e===a.storageKey&&(a.value=t,localStorage.setItem(e,JSON.stringify(t)),"theme"===e&&n.props.loadTheme()),a}));n.setState({clientConfig:a})},n.updateBackendConfigValue=function(e,t){var a=n.state.backendConfig,r=Object(N.a)(Object(N.a)({},a),{},Object(A.a)({},e,t));n.setState({backendConfig:r,showRestartModal:!0}),window.localStorage.setItem("backend-config",JSON.stringify(r)),window.api&&window.api.send("toMain",{action:"update-backend-config",updates:r})},n.restartHandler=function(){window.api&&window.api.send("toMain",{action:"restart-app"})},n.renderOptionsList=function(){if(n.state.clientConfig){var e=[],t=n.state.backendConfig,a=n.state.clientConfig;if(t)for(var r in t)$.backendConfigFilter.includes(r)||e.push(o.a.createElement(It,{key:$.backendConfigMap[r].name,keyName:r,type:$.backendConfigMap[r].type,name:$.backendConfigMap[r].name,optionObject:$.backendConfigMap[r],value:t[r],onChange:n.updateBackendConfigValue}));for(var i in a)"CONFIG_VERSION"!==i&&e.push(o.a.createElement(It,{key:a[i].name,keyName:a[i].storageKey,name:a[i].name,value:a[i].value,type:a[i].type,optionObject:a[i],onChange:n.updateClientConfigValue}));return e}},n.state={topOfPage:!1,backendConfig:null,clientConfig:null,showRestartModal:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.api&&window.api.send("toMain",{action:"get-backend-config"}),this.loadOptions()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"options-list-container"},o.a.createElement("ul",{className:"options-list",style:{padding:0,margin:0}},this.renderOptionsList()),o.a.createElement(Te.a,{title:"Restart Required",visible:this.state.showRestartModal,className:"delete-modal",centered:!0,onOk:this.restartHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okType:"danger",okText:"Restart",cancelText:"Wait",closable:!1,onCancel:function(){return e.setState({showRestartModal:!1})}},o.a.createElement("p",null,"This configuration change requires an app restart to take effect, do you want to restart now or wait?")))}}]),a}(r.Component),Ut=Object(s.b)((function(e){return{query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:K,loadTheme:ie})(Ft),Lt=fe.a.Content,Pt=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).updatePassword=function(e,t){var a=t.setSubmitting;n.togglePasswordModal(),a(!1),n.props.changePassword(e)},n.handleClearNodes=function(e,t){var a=t.setSubmitting;n.toggleDeleteNodesModal(),a(!1),n.props.clearAllNodes(e)},n.togglePasswordModal=function(){n.state.showPasswordModal?n.setState({showPasswordModal:!1}):n.setState({showPasswordModal:!0})},n.toggleDeleteNodesModal=function(){n.state.showDeleteNodesModal?n.setState({showDeleteNodesModal:!1}):n.setState({showDeleteNodesModal:!0})},n.toggleExportModal=function(){n.state.showExportModal?n.setState({showExportModal:!1}):n.setState({showExportModal:!0})},n.exportHandler=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showExportModal:!1}),e.next=3,n.props.generateInstanceExport();case 3:case"end":return e.stop()}}),e)}))),n.passwordModal=function(){return o.a.createElement(ge.d,{initialValues:{oldPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:Ht,onSubmit:n.updatePassword,style:{display:"inline-block"}},(function(e){var t=e.isSubmitting;return o.a.createElement(ge.c,{className:"password-modal-form"},o.a.createElement(ge.b,{type:"password",name:"oldPassword",placeholder:"old password",className:"password-modal-field"}),o.a.createElement(ge.a,{name:"oldPassword",component:"div"}),o.a.createElement(ge.b,{type:"password",name:"newPassword",placeholder:"new password",className:"password-modal-field"}),o.a.createElement(ge.a,{name:"newPassword",component:"div"}),o.a.createElement(ge.b,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",className:"password-modal-field"}),o.a.createElement(ge.a,{name:"confirmNewPassword",component:"div"}),o.a.createElement("button",{type:"submit",disabled:t},"change password"))}))},n.deleteAllNodesModal=function(){return o.a.createElement(ge.d,{initialValues:{passwordValue:"",confirmPassword:""},validationSchema:Mt,onSubmit:n.handleClearNodes,style:{display:"inline-block"}},(function(e){var t=e.isSubmitting;return o.a.createElement(ge.c,{className:"password-modal-form"},o.a.createElement("p",null,"Are you are you want to delete all nodes and associations for this user? This action is not reversible, it's recommended that u make a backup first."),o.a.createElement(ge.b,{type:"password",name:"passwordValue",placeholder:"password",className:"password-modal-field"}),o.a.createElement(ge.a,{name:"passwordValue",component:"div"}),o.a.createElement(ge.b,{type:"password",name:"confirmPassword",placeholder:"confirm password",className:"password-modal-field"}),o.a.createElement(ge.a,{name:"confirmPassword",component:"div"}),o.a.createElement("button",{type:"danger",disabled:t,style:{color:"white",backgroundColor:"red"}},"yes, i want to delete all my data"))}))},n.initializeFromUrlParams=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.user.username);case 2:(t=e.sent)&&!n.state.initialized?n.setState({initialized:!0,username:t.username,email:n.props.user.email,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}):(g.a.error("there was a problem loading your profile"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.setAvatar=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(y.a)(b.a.mark((function t(){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserAvatar(a);case 4:r=t.sent,n.setState({avatar:r}),t.next=9;break;case 8:g.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.setHeader=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(y.a)(b.a.mark((function t(){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserHeader(a);case 4:r=t.sent,n.setState({header:r}),t.next=9;break;case 8:g.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.renderDisplayName=function(){return o.a.createElement("input",{type:"text",className:"Options-display-name",placeholder:"Display Name",value:n.state.displayName,onChange:function(e){return n.saveDisplayName(e.target.value)}})},n.saveDisplayName=function(e){n.state.displayName!==e&&(n.props.updateUserInfo({username:n.props.user.username,displayName:e}),localStorage.setItem("displayName",e),document.title=e,n.setState({displayName:e}))},n.renderBio=function(){return o.a.createElement("textarea",{type:"text",className:"Options-bio",placeholder:"Bio",value:n.state.bio,onChange:function(e){return n.saveBio(e.target.value)}})},n.saveBio=function(e){n.state.bio!==e&&(n.props.updateUserInfo({username:n.props.user.username,bio:e}),n.setState({bio:e}))},n.renderUsername=function(){return o.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"username",value:n.state.username,onChange:function(e){return n.saveUsername(e.target.value)}})},n.saveUsername=function(e){n.state.username!==e&&(n.props.updateUsername(e),n.setState({username:e}))},n.renderEmail=function(){return o.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"email",value:n.state.email,onChange:function(e){return n.saveEmail(e.target.value)}})},n.saveEmail=function(e){n.state.email!==e&&(n.props.updateEmail(e),n.setState({email:e}))},n.renderMainSider=function(){if(n.props.mainSider)return o.a.createElement(Me,null)},n.state={showPasswordModal:!1,showDeleteNodesModal:!1,showExportModal:!1,initialized:!1,username:"",email:"",displayName:"",bio:"",avatar:null,header:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="Edit Profile",document.body.style.removeProperty("overflow"),this.initializeFromUrlParams()}},{key:"componentWillUnmount",value:function(){window.getSelection().removeAllRanges(),this.props.hideComponent("mainSider")}},{key:"render",value:function(){var e=this;return o.a.createElement(fe.a,{className:"Options-container"},this.renderMainSider(),o.a.createElement(fe.a,null,o.a.createElement(Lt,{className:"Options"},o.a.createElement(Ye,null),o.a.createElement("div",{className:"Options-card"},o.a.createElement("button",{onClick:this.setHeader},o.a.createElement("div",{className:"Options-header"},o.a.createElement(Ae.a,{type:"camera",className:"Options-header-edit-icon"}),o.a.createElement("img",{src:this.state.header||pe.a,alt:"example",draggable:"false"}))),o.a.createElement("button",{onClick:this.setAvatar},o.a.createElement("div",{className:"Options-avatar"},o.a.createElement(Ae.a,{type:"camera",className:"Options-avatar-edit-icon"}),o.a.createElement("img",{src:this.state.avatar||Fe.a,alt:"profile",draggable:"false"}))),o.a.createElement("div",{className:"Options-info"},o.a.createElement(Ve.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){e.toggleExportModal()}},"export all user data"),o.a.createElement("br",null),o.a.createElement(Ve.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.togglePasswordModal()}},"change password"),o.a.createElement("br",null),o.a.createElement(Ve.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){window.location.replace("/profile/".concat(e.props.user.username)),e.props.regenerateCollectionPreviews()}},"regenerate previews"),o.a.createElement("br",null),o.a.createElement(Ve.a,{type:"danger",style:{margin:"0 0 10px",backgroundColor:"red",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.toggleDeleteNodesModal()}},"delete all data"),o.a.createElement("br",null),this.renderDisplayName(),this.renderUsername(),this.renderEmail(),this.renderBio(),o.a.createElement(Ve.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"4rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.props.history.push("/profile/".concat(e.props.user.username))}},"done"),o.a.createElement(Te.a,{title:"change password",visible:this.state.showPasswordModal,className:"password-modal",centered:!0,afterClose:function(){return document.body.style.removeProperty("overflow")},footer:null,closable:!1,onCancel:this.togglePasswordModal},this.passwordModal()),o.a.createElement(Te.a,{title:"delete all data",visible:this.state.showDeleteNodesModal,className:"password-modal",centered:!0,afterClose:function(){return document.body.style.removeProperty("overflow")},footer:null,closable:!1,onCancel:this.toggleDeleteNodesModal},this.deleteAllNodesModal()),o.a.createElement(Te.a,{title:"Confirm Export",visible:this.state.showExportModal,className:"delete-modal",centered:!0,onOk:this.exportHandler,okText:"Generate",closable:!1,afterClose:function(){return document.body.style.removeProperty("overflow")},onCancel:this.toggleExportModal},o.a.createElement("p",null,"Generate export from ",o.a.createElement("b",null,this.props.user.displayName||"untitled"),"? The export will contain the profile picture, header, bio, along with all this user's nodes & associations, and appear in your favorites when it is completed. This may take a few minutes.")))),o.a.createElement(Ut,null))))}}]),a}(r.Component),Ht=ve.object().shape({oldPassword:ve.string().required("old password is required"),newPassword:ve.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmNewPassword:ve.string().required("please confirm new password").oneOf([ve.ref("newPassword")],"Your passwords don't match")}),Mt=ve.object().shape({passwordValue:ve.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmPassword:ve.string().required("please confirm password").min(5,"Password has to be longer than 6 characters!").oneOf([ve.ref("passwordValue")],"Your passwords don't match")}),qt=Object(s.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{fetchUserByUsername:te,updateUserInfo:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,M.patch("/user/info",{username:e.username,bio:e.bio,displayName:e.displayName});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),g.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateUserAvatar:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_AVATAR"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,M.patch("/user/avatar",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_AVATAR_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:g.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),g.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUserHeader:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_HEADER"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,M.patch("/user/header",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_HEADER_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:g.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_HEADER_ERROR"}),g.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUsername:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,M.patch("/user/username",{username:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),g.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateEmail:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,M.patch("/user/email",{email:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),g.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},clearAllNodes:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.patch("/user/clear",{password:e.passwordValue});case 3:200===t.sent.status&&(d.push("/"),g.a.success("successfully deleted all your data :)",3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g.a.error("There was a problem, please try again",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},changePassword:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.patch("/auth/password",{oldPassword:e.oldPassword,newPassword:e.newPassword});case 3:200===t.sent.status&&g.a.success("changed password",1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g.a.error("Could not update password",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},showComponent:re,generateInstanceExport:ce,regenerateCollectionPreviews:function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.patch("/collection/regenerate");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),g.a.error("There was a problem regenerating the collection previews",1);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},hideComponent:oe})(Pt),Bt=(a(152),fe.a.Content),Vt=function(e){return o.a.createElement(fe.a,{className:"page-content"},o.a.createElement(Bt,{style:{backgroundColor:"#272727"}},e.children))},zt=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(Ye,null),o.a.createElement(fe.a,null,o.a.createElement(Me,null),o.a.createElement(Vt,null)))}}]),a}(r.Component),Kt=a(154),Jt=a(314),Gt=a(89),Qt=a(67),Wt=a.n(Qt),Xt=(a(604),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).infiniteScroll=function(e){var t=n.props.associations.length;n.endReached()&&n.props.activeNode&&t<n.props.totalNodes&&!n.props.isFetching&&(n.setState({topOfPage:!1}),n.props.fetchAssociations({page:n.props.page+1,nodeUUID:n.props.activeNode.uuid}))},n.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),o=e+window.pageYOffset;return window.pageYOffset<1&&!n.props.isFetching&&!n.state.topOfPage&&(n.setState({topOfPage:!0}),n.props.fetchAssociations({page:1,nodeUUID:n.props.activeNode.uuid})),o>=r-733},n.renderNodes=function(){var e=n.props.associations;return null!==e?e.map((function(e){return o.a.createElement(Et,{key:e.uuid,node:e,activeNode:n.props.activeNode})})):o.a.createElement(Le,null)},n.renderList=function(){return n.props.totalNodes>0?o.a.createElement("ul",{style:{backgroundColor:"black"},className:"nodelist"},n.renderNodes()):o.a.createElement(r.Fragment,null)},n.state={topOfPage:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderList(),o.a.createElement(Ct,null))}}]),a}(r.Component)),Yt=Object(s.b)((function(e){return{associations:e.associations.associationList,isFetching:e.associations.isFetching,activeNode:e.nodes.activeNode,page:e.associations.associationListPage,totalNodes:e.associations.totalAssociationListItems}}),{fetchAssociations:ae,getRandomNode:Y})(Xt),Zt=function(e){var t=e.split("/")[4],a=e.split("/")[5];switch(t){case"text":window.location.replace("/edit/text/".concat(a));break;case"file":case"audio":case"folder":B.dispatch(se(a)),B.dispatch(W({uuid:a}));break;case"image":case"collection":case"zip":case"package":case"user":window.location.replace("/associations/".concat(a));break;default:window.open(e,"_blank")}},$t=(a(605),fe.a.Content),ea=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"onPaste",value:function(e){var t=this,a=window.scrollY,n=window.scrollX;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),o=(new z.a).retain(r.index);this.container.style.top=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0).toString()+"px",this.container.focus(),setTimeout((function(){t.quill.selection.update(Qt.Quill.sources.SILENT),o=o.concat(t.convert()).delete(r.length),t.quill.updateContents(o,Qt.Quill.sources.USER),t.quill.setSelection(o.length()-r.length,Qt.Quill.sources.SILENT);var e=t.quill.getBounds(o.length()-r.length,Qt.Quill.sources.SILENT);t.quill.scrollingContainer.scrollTop=e.top,window.scrollTo({top:a,left:n})}),1)}}}]),a}(Qt.Quill.import("modules/clipboard"));Qt.Quill.register("modules/clipboard",ea,!0);var ta=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"create",value:function(e){var t=Object(Jt.a)(Object(Gt.a)(a),"create",this).call(this,e);return t.setAttribute("href",e),t.removeAttribute("target"),t.addEventListener("click",(function(t){document.querySelector(".ql-tooltip").style.visibility="visible",t.shiftKey&&(e.includes("renderlink")?Zt(e):window.open(e,"_blank"))})),t.addEventListener("contextmenu",(function(t){t.preventDefault(),document.querySelector(".ql-tooltip").style.visibility="hidden",e.includes("renderlink")?Zt(e):window.open(e,"_blank")})),t}}]),a}(Qt.Quill.import("formats/link"));Qt.Quill.register(ta,!0);var aa=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).ref=function(e){n.quill=e},n.componentDidUpdate=Object(y.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),t=n.props.match.params.uuid,n.state.uuid!==t&&!1===n.state.initializing&&(n.setState({text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!0,readOnly:!0}),n.regeneratePreview(),n.initializeFromUrlParams()),(a=JSON.parse(localStorage.getItem("quillScrollY")))&&a.uuid===t&&window.scrollTo({top:a.scroll});case 5:case"end":return e.stop()}}),e)}))),n.initializeFromUrlParams=Object(y.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,window.addEventListener("scroll",(function(){localStorage.setItem("quillScrollY",JSON.stringify({uuid:t,scroll:window.scrollY}))})),localStorage.removeItem("exclusionData"),n.setState({uuid:t}),e.next=6,n.props.setActiveNode(t);case 6:n.props.nodeData&&n.props.nodeData.content?(document.title=n.props.nodeData.name||"Untitled",a=JSON.parse(n.props.nodeData.content),n.setState({text:a,name:n.props.nodeData.name,initializing:!1,readOnly:!1}),n.props.markNodeView(n.props.nodeData),n.quill.getEditor().history.clear(),n.props.fetchAssociations({nodeUUID:t})):(n.setState({error:!0}),n.props.history.push("/"));case 7:case"end":return e.stop()}}),e)}))),n.expandHandler=function(){null===n.state.expanded?(n.setState({expanded:"expanded"}),localStorage.setItem("expanded","expanded")):(n.setState({expanded:null}),localStorage.removeItem("expanded")),n.quill.getEditor().disable()},n.exitHandler=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("exclusionData"),n.regeneratePreview(),n.props.history.push("/");case 3:case"end":return e.stop()}}),e)}))),n.regeneratePreview=function(){if(!n.state.deleting&&!n.state.error&&null!==n.state.uuid&&n.quill){var e=n.quill.getEditor().getText().substring(0,500);n.props.nodeData.preview=e,n.props.processTextNode({uuid:n.state.uuid,preview:e})}},n.selectLocalImage=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png"]),e.click(),e.onchange=Object(y.a)(b.a.mark((function t(){var a,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=9;break}return t.next=4,n.props.createFileNode(a,null,JSON.stringify(n.props.nodeData));case 4:r=t.sent,o=n.quill.getEditor().getSelection(),n.quill.getEditor().insertEmbed(o.index,"image",r),t.next=10;break;case 9:g.a.error("The file must be an image",1);case 10:case"end":return t.stop()}}),t)})))},n.isImageUrl=function(e){return new RegExp(/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)?/gi).test(e)},n.matcherImageHandler=function(e,t){var a=e.src;return(new z.a).insert({image:a})},n.modules={toolbar:{container:[[{header:[1,2,3,4,5,!1]}],[{font:[]}],[{indent:"-1"},{indent:"+1"}],["bold","italic","underline","strike"],[{color:["","#fff","#bbbbbb","#df0000","#a80b44","#ff0062","#df1f95","#9933ff","#c06be2","#c8f0ae","#7fba00","#45d458","#31d697","#00dfd3","#67edff","#00a4ef","#4178df","#4d2ff7","#000080","#56007a","#007c25","#e2d58a","#f8cc52","#fff12b","#eb875f","#ff4500","#f40000","#a0390d"]},{background:[]}],[{align:null},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],["code-block","blockquote"],["link","image","video"],["clean"],["expand","exit"]],handlers:{expand:n.expandHandler,exit:n.exitHandler,image:n.selectLocalImage,link:function(e){}}},clipboard:{matchVisual:!1,matchers:[["img",n.matcherImageHandler]]},keyboard:{bindings:{renderLinkEnter:{key:"Enter",prefix:/\[\[.*?\]\]/g,handler:function(){var e=Object(y.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.handleRenderlinking(a);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},renderLinkSpace:{key:32,prefix:/\[\[.*?\]\]/g,handler:function(){var e=Object(y.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.handleRenderlinking(a);case 2:return e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}}}},n.allowedFormats=["header","font","indent","bold","italic","underline","strike","color","background","align","list","script","code-block","blockquote","link","image","video"],n.handleRenderlinking=function(){var e=Object(y.a)(b.a.mark((function e(t){var a,r,o,i,c,l,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=/\[\[.*?\]\]/g,r=Object(j.a)(t.prefix.matchAll(a)),o=n.props.nodeData.uuid,i=n.quill.getEditor(),c=Object(ze.a)(r),e.prev=5,s=b.a.mark((function e(){var t,a,r,c,s,u,d,p,m,h,f,E,g,v;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.value,a=void 0,r=void 0,c=t[0].substring(2,t[0].length-2),s=c.replace(/[.*+?^${}()|[\]]/g,"\\$&"),u=new RegExp("\\[\\["+s+"\\]\\]","g"),d=Object(j.a)(i.getText(0).matchAll(u)),p=c.substring(0,255),m=i.getLength(0)-i.getText(0).length,h=localStorage.getItem("exclusionData")?JSON.parse(localStorage.getItem("exclusionData")):null,f=h?h.name:null,E=[],f!==c||d.length>1?(localStorage.removeItem("exclusionData"),E=[]):h&&(E=Object(j.a)(h.list)),e.next=15,n.props.contextualCreate(p,o,E);case 15:(g=e.sent)&&(r=g.url,a=g.name,1===d.length?(v=d[0].index,a&&r&&i.updateContents((new z.a).retain(v+m).delete(c.length+4).insert("[["+a+"]]",{link:r}).insert(" "))):d.length>1&&r&&d.forEach((function(e){i.formatText(e.index,c.length+4,"link",r)})),a!==c&&localStorage.setItem("exclusionData",JSON.stringify({list:[].concat(Object(j.a)(E),[g.uuid]),name:c})));case 17:case"end":return e.stop()}}),e)})),c.s();case 8:if((l=c.n()).done){e.next=12;break}return e.delegateYield(s(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),c.e(e.t1);case 17:return e.prev=17,c.f(),e.finish(17);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),n.renderHeader=function(){if(null===n.state.expanded&&n.props.nodeData)return o.a.createElement("div",null,o.a.createElement("div",{style:{height:"3rem"}},o.a.createElement(Ye,{fixed:!0})),o.a.createElement($e,null))},n.renderMainSider=function(){if(n.props.mainSider)return o.a.createElement(Me,null)},n.renderClassName=function(){return"quill-"+(JSON.parse(localStorage.getItem("quill-document-width"))||"").replace(" ","-")},n.state={text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!1,readOnly:!0},n.handleChange=n.handleChange.bind(Object(Kt.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.body.style.overflow="auto",document.body.style.height="100%",document.documentElement.style.height="100%",document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),this.initializeFromUrlParams()}},{key:"handleChange",value:function(e,t,a,n){if(n.getContents()!==this.state.text&&!1===this.state.initializing){var r=JSON.stringify(n.getContents());this.props.editTextNode({uuid:this.props.match.params.uuid,content:r}),this.setState({text:e}),this.regeneratePreview()}}},{key:"componentWillUnmount",value:function(){document.body.style.overflow=null,document.body.style.height=null,document.documentElement.style.overflow=null,document.documentElement.style.height=null,localStorage.removeItem("exclusionData"),window.getSelection().removeAllRanges()}},{key:"render",value:function(){var e=this;return this.props.isLoading?o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(fe.a,null,o.a.createElement(fe.a,null,this.renderHeader(),o.a.createElement(Le,null)))):o.a.createElement(fe.a,{className:"page-layout"},this.renderMainSider(),o.a.createElement($t,{className:"text-editor-content "+this.state.expanded},this.renderHeader(),o.a.createElement(Wt.a,{value:this.state.text,style:{backgroundColor:this.props.editorTheme?this.props.editorTheme.textEditorBackground:null,color:this.props.editorTheme?this.props.editorTheme.textEditorText:null},className:this.renderClassName(),onChange:this.handleChange,modules:this.modules,ref:this.ref,readOnly:this.state.readOnly,formats:this.allowedFormats,scrollingContainer:"body",onKeyDown:function(t){"Enter"!==t.key?localStorage.setItem("quillScrollY",JSON.stringify({uuid:e.state.uuid,scroll:window.scrollY})):window.scrollBy({top:20})},onBlur:function(){localStorage.setItem("quillScrollY",JSON.stringify({uuid:e.state.uuid,scroll:window.scrollY})),e.props.nodeData.preview.length<500&&e.regeneratePreview()}}),o.a.createElement(Ct,null),o.a.createElement(Yt,null)))}}]),a}(r.Component),na=Object(s.b)((function(e){return{nodeData:e.nodes.activeNode,isLoading:e.nodes.isFetching,mainSider:e.components.componentList.mainSider,editorTheme:e.components.editorTheme}}),{editTextNode:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"EDIT_TEXT_NODE"}),t.prev=1,t.next=4,M.patch("/text",{uuid:e.uuid,content:e.content});case 4:a({type:"EDIT_TEXT_NODE_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"EDIT_TEXT_NODE_ERROR"}),g.a.error("There was a problem saving your changes",1),d.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},processTextNode:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"PROCESS_TEXT_NODE"}),t.prev=1,t.next=4,M.patch("/text/process",{uuid:e.uuid,preview:e.preview});case 4:a({type:"PROCESS_TEXT_NODE_SUCCESS",node:e,preview:e.preview}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"PROCESS_TEXT_NODE_ERROR"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},createFileNode:function(e,t,a){return function(){var n=Object(y.a)(b.a.mark((function n(r){var o,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CREATE_FILE_NODE"}),n.prev=1,(o=new FormData).append("image",e),t&&o.append("name",t),a&&o.append("linkedNode",a),n.next=8,M.put("/file",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:if(200!==(i=n.sent).status){n.next=14;break}return r({type:" CREATE_FILE_NODE_SUCCESS",payload:i.data.node}),n.abrupt("return",i.data.node.preview);case 14:g.a.error("There was a problem inserting the file",1);case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),r({type:"CREATE_FILE_NODE_ERROR"}),g.a.error("There was a problem inserting the file",1);case 21:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()},contextualCreate:function(e,t,a){return function(){var n=Object(y.a)(b.a.mark((function n(r){var o,i,c,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CONTEXTUAL_CREATE_NODE"}),(o=new z.a).insert(e),i=JSON.stringify(o),n.prev=4,n.next=7,M.put("/node/contextual-create",{name:e,content:i,linkedNodeUUID:t,exclusionList:a});case 7:return c=n.sent,l=null,c.data&&c.data.node.uuid&&"url"===c.data.node.type?l=c.data.node.content:c.data&&c.data.node.uuid&&(l="".concat(window.location.origin,"/renderlink/").concat(c.data.node.type,"/").concat(c.data.node.uuid)),r({type:"CONTEXTUAL_CREATE_NODE_SUCCESS",node:c.data.node,association:c.data.association}),n.abrupt("return",{url:l,name:c.data.node.name,uuid:c.data.node.uuid});case 14:n.prev=14,n.t0=n.catch(4),console.error(n.t0),r({type:"CONTEXTUAL_CREATE_NODE_ERROR"});case 18:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}()},updateNode:G,setActiveNode:X,fetchAssociations:ae,markNodeView:W})(aa),ra=fe.a.Footer,oa=function(){return o.a.createElement(ra,{className:"page-footer"})},ia=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(Ye,null),o.a.createElement(fe.a,null,o.a.createElement(Vt,null,"Collections")),o.a.createElement(oa,null))}}]),a}(r.Component),ca=fe.a.Content,la=fe.a.Footer,sa=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.createAccount(t)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="Create Account"}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"login-layout"},o.a.createElement(ca,{className:"login-content"},o.a.createElement(he.a,{className:"login-card"},o.a.createElement(ge.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:ua,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return o.a.createElement(ge.c,{className:"login-form"},o.a.createElement("h1",{className:"login-title"},o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}},"\u2728"),"create user",o.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingLeft:"0.5rem"}},"\u2728")),o.a.createElement(ge.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),o.a.createElement(ge.a,{name:"email",component:"div"}),o.a.createElement(ge.b,{type:"username",name:"username",placeholder:"username",className:"login-field"}),o.a.createElement(ge.a,{name:"username",component:"div"}),o.a.createElement(ge.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),o.a.createElement(ge.a,{name:"password",component:"div"}),o.a.createElement(ge.b,{type:"password",name:"confirmPassword",placeholder:"confirm password",className:"login-field"}),o.a.createElement(ge.a,{name:"confirmPassword",component:"div"}),o.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"create account"),o.a.createElement(Ee.a,{to:"/",style:{textAlign:"center"},className:"login-signup"},"back to login"))})))),o.a.createElement(la,null))}}]),a}(r.Component),ua=ve.object().shape({email:ve.string().email("E-mail is not valid!").required("email is required"),username:ve.string().required("username is required"),password:ve.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmPassword:ve.string().required("please confirm password").oneOf([ve.ref("password")],"Your passwords don't match")}),da=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{createAccount:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.api&&window.api.send("toMain",{action:"get-backend-config"}),Object($.loadClientConfig)(),a({type:"CREATE_ACCOUNT"}),t.prev=3,t.next=6,M.put("/auth/signup",e);case 6:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"CREATE_ACCOUNT_SUCCESS",payload:n.data}),d.push("/"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(3),a({type:"CREATE_ACCOUNT_ERROR"}),g.a.error("There was a problem creating the account",1),d.push("/");case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}})(sa),pa=(a(606),function(e){return o.a.createElement(r.Fragment,null,function(){if(e.node)return o.a.createElement(ft,{type:e.node.type,element:"full",node:e.node})}())}),ma=fe.a.Content,ha=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,window.scrollTo({top:0}),e.next=4,n.props.setActiveNode(t);case 4:return null!==n.props.activeNode&&n.props.markNodeView(n.props.activeNode),e.next=7,n.props.fetchAssociations({nodeUUID:t});case 7:null!==n.props.associations&&null!==n.props.activeNode?(n.setState({initialized:!0,uuid:t}),n.props.activeNode.type&&"collection"===n.props.activeNode.type&&n.regenerateCollectionPreview(n.props.activeNode,n.props.associations),document.title=n.props.activeNode.name):(g.a.error("there was a problem loading the associations"),n.props.history.push("/"));case 8:case"end":return e.stop()}}),e)}))),n.regenerateCollectionPreview=function(){var e=Object(y.a)(b.a.mark((function e(t,a){var r,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{if(t&&a){for(r=0,i=[];r<a.length&&i.length<4;)"image"!==(o=a[r]).type&&"url"!==o.type&&"text"!==o.type||i.push({type:o.type,preview:o.preview}),r++;n.props.updateNode({uuid:t.uuid,preview:JSON.stringify(i)})}}catch(c){n.props.history.push("/")}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.renderNode=function(){return null!==n.state.uuid&&n.state.uuid===n.props.activeNode.uuid?o.a.createElement(pa,{node:n.props.activeNode}):o.a.createElement(Le,null)},n.renderMainSider=function(){if(n.props.mainSider)return o.a.createElement(Me,null)},n.state={initialized:!1,uuid:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.clearActiveNode()}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"page-layout"},this.renderMainSider(),o.a.createElement(fe.a,null,o.a.createElement(ma,{style:{paddingTop:"0",minHeight:"100vh"}},o.a.createElement(Ye,null),o.a.createElement("div",{className:"list-container"},this.renderNode()),o.a.createElement(Yt,null))))}}]),a}(r.Component),fa=Object(s.b)((function(e){return{associations:e.associations.associationList,isLoading:e.nodes.isFetching,activeNode:e.nodes.activeNode,mainSider:e.components.componentList.mainSider,isDeleting:e.nodes.isDeleting}}),{setActiveNode:X,clearActiveNode:Z,fetchAssociations:ae,markNodeView:W,updateNode:G})(ha),Ea=a(315),ga=a(618),va=a(620),ba=a(222),ya=a(614),wa=a(619),Oa=a(615),Sa=a(616),Ca=a(617),Na=a(219),ka=(a(607),fe.a.Content),xa=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,e.next=3,n.props.fetchGraphData({anchorNode:t,type:n.props.query.type,searchQuery:n.props.query.searchQuery});case 3:if(null===n.props.graphData){e.next=13;break}if(n.setState({initialized:!0,uuid:t}),n.renderGraph(),!t){e.next=11;break}return e.next=9,n.props.setActiveNode(t);case 9:return e.next=11,n.props.fetchAssociations({nodeUUID:t});case 11:e.next=15;break;case 13:g.a.error("there was a problem loading the data"),n.props.history.push("/");case 15:case"end":return e.stop()}}),e)}))),n.renderMainSider=function(){if(n.props.mainSider)return o.a.createElement(Me,null)},n.renderAssociationSider=function(){if(n.props.associationSider)return o.a.createElement(Ct,null)},n.renderAssociationList=function(){if(n.props.associations&&n.props.associations.length>0&&n.props.activeNode)return o.a.createElement(Yt,null)},n.renderGraph=Object(y.a)(b.a.mark((function e(){var t,a,r,o,i,c,l,s,u,d,p,m,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(e){var t=e.transform;u.attr("transform",t)},t=n.props.graphData.nodes,a=n.props.graphData.associations,r=window.innerHeight,o=window.innerWidth,33,i=Object(ba.a)(t).force("link",Object(ya.a)(a).id((function(e){return e.id}))).force("charge",Object(wa.a)().strength(-7e5/t.length)).force("x",Object(Oa.a)()).force("y",Object(Sa.a)()).force("center",Object(Ca.a)()),c=Na.b.scale(.17).translate(0,-15),l=Object(Na.a)().scaleExtent([.1,1.7]).on("zoom",h),s=Object(Ea.a)(n.node).append("svg").attr("class","graph-svg").attr("viewBox",[-o/2,-r/2,o,r]).on("contextmenu",(function(e){e.preventDefault()})),u=s.append("g"),d=u.append("g").attr("stroke","white").attr("stroke-opacity",.7).selectAll("line").data(a).join("line").attr("class","graph-link").attr("stroke-width",(function(e){return Math.sqrt(e.value)})),p=u.append("g").selectAll("circle").data(t).join("g").call(n.drag(i)).append("circle").attr("fill",n.props.theme.graphNodeColor).attr("stroke",n.props.theme.graphNodeBorderColor).on("contextmenu",(function(e,t){e.preventDefault(),window.location.replace("/graph/"+t.uuid)})).on("mouseover",(function(e,t){Object(Ea.a)(e.currentTarget).style("fill",n.props.theme.graphNodeHoverColor),Object(Ea.a)(e.currentTarget).style("stroke",n.props.theme.graphNodeBorderHoverColor),t.fx=null,t.fy=null})).on("mouseout",(function(e,t){Object(Ea.a)(e.currentTarget).style("fill",n.props.theme.graphNodeColor),Object(Ea.a)(e.currentTarget).style("stroke",n.props.theme.graphNodeBorderColor),t.fx=null,t.fy=null})).on("dblclick",(function(e,t){e.preventDefault(),"text"===t.type?window.location.replace("/edit/text/"+t.uuid):"user"===t.type?window.location.replace("/profile/".concat(n.props.user.username)):window.location.replace("/associations/"+t.uuid)})).attr("r",33).attr("cursor","none").attr("class","graph-node"),m=Object(ga.a)("g g g").append("text").text((function(e){return e.name.substring(0,100)})).attr("font-size","0.8rem").attr("cursor","grab").attr("class","graph-text"),s.call(l).call(l.transform,c),i.on("tick",(function(){d.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),p.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),m.attr("x",(function(e){return e.x+33})).attr("y",(function(e){return e.y-33}))})),e.abrupt("return",s.node());case 17:case"end":return e.stop()}}),e)}))),n.drag=function(e){return Object(va.a)().on("start",(function(t,a){Object(Ea.a)(this).raise(),document.body.style.cursor="none",t.active||e.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y})).on("drag",(function(e,t){document.body.style.cursor="none",t.fx=e.x,t.fy=e.y})).on("end",(function(t,a){t.active||e.alphaTarget(0),window.setTimeout((function(){document.body.style.cursor="auto"}),333)}))},n.state={initialized:!1,uuid:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="constellation",this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"render",value:function(){var e=this;return o.a.createElement(fe.a,{className:"page-layout"},this.renderMainSider(),this.renderAssociationSider(),o.a.createElement(fe.a,null,o.a.createElement(ka,{style:{paddingTop:"0"}},o.a.createElement(Ye,null),o.a.createElement("div",{className:"graph-container",ref:function(t){return e.node=t}}),this.renderAssociationList())))}}]),a}(r.Component),ja=Object(s.b)((function(e){return{associations:e.associations.associationList,user:e.auth.user,activeNode:e.nodes.activeNode,graphData:e.graph.graphData,loading:e.graph.isFetching,associationSider:e.components.componentList.associationSider,mainSider:e.components.componentList.mainSider,nodeList:e.nodes.nodeList,query:e.nodes.query,isFetching:e.nodes.isFetching,theme:e.components.theme}}),{fetchNodes:K,showComponent:re,fetchGraphData:function(e){return function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",(o=JSON.parse(localStorage.getItem("graph-render-limit")))||(o=100),t.prev=4,a({type:"FETCH_GRAPH_DATA"}),t.next=8,M.get("/node/graph",{params:{anchorNode:e.anchorNode,type:e.type,searchQuery:e.searchQuery,graphRenderLimit:o,bidirectional:r}});case 8:i=t.sent,a({type:"FETCH_GRAPH_DATA_SUCCESS",payload:i.data,query:e}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(4),a({type:"FETCH_GRAPH_DATA_ERROR"}),a({type:"RESET_APP"}),g.a.error("Could not fetch items",1),d.push("/");case 18:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}()},fetchAssociations:ae,setActiveNode:X})(xa),Ta=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).infiniteScroll=function(e){n.endReached()&&!n.props.isFetching&&(n.setState({topOfPage:!1}),n.props.fetchNodes({page:n.props.query.page+1,type:n.props.query.type,searchQuery:n.props.query.searchQuery,pinned:!0,sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder}))},n.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,r=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),o=e+window.pageYOffset;return window.pageYOffset<1&&!n.props.isFetching&&!n.state.topOfPage&&(n.setState({topOfPage:!0}),n.props.fetchNodes({page:1,type:n.props.query.type,searchQuery:n.props.query.searchQuery,pinned:!0,sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder})),o>=r-733},n.renderPinList=function(){var e=n.props.nodes;return null!==e?e.map((function(e){return e.uuid?o.a.createElement(Et,{key:e.uuid,node:e}):o.a.createElement(r.Fragment,null)})):o.a.createElement(Le,null)},n.state={topOfPage:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchNodes({page:1,type:this.props.query.type,searchQuery:this.props.query.searchQuery,pinned:!0,sortType:this.props.query.sortType,sortOrder:this.props.query.sortOrder}),window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return o.a.createElement("div",{className:"nodelist-container"},o.a.createElement("ul",{className:"nodelist"},this.renderPinList()),o.a.createElement(Ct,null))}}]),a}(r.Component),_a=Object(s.b)((function(e){return{nodes:e.nodes.nodeList,query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:K})(Ta),Aa=fe.a.Header,Da=Ke.a.Option,Ra=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).toggleMainSider=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.mainSider?n.props.hideComponent("mainSider"):n.props.showComponent("mainSider");case 1:case"end":return e.stop()}}),e)}))),n.commandHandler=function(){return n.props.searchNodes({searchQuery:n.state.input,type:n.state.nodeTypes})},n.renderSelectBefore=function(){return o.a.createElement(Ke.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){return n.setState({nodeTypes:e})}},o.a.createElement(Da,{value:"all"},"all"),o.a.createElement(Da,{value:"url"},"urls"),o.a.createElement(Da,{value:"text"},"text"),o.a.createElement(Da,{value:"file"},"file"),o.a.createElement(Da,{value:"image"},"images"),o.a.createElement(Da,{value:"collection"},"collections"))},n.state={input:n.props.query.searchQuery||"",nodeTypes:n.props.query.type||"all"},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Aa,{className:"page-header"},o.a.createElement("ul",{className:"nav-list",style:{width:"auto",justifyContent:"left",marginLeft:"1.1rem"}},o.a.createElement("li",{className:"nav-item io-sider-button mobile-visible",style:{marginRight:"0"}},o.a.createElement(Ve.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleMainSider()}},o.a.createElement(Ae.a,{type:"bars",theme:"outlined"}))),o.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.5rem"}},o.a.createElement(Ee.a,{type:"default",to:"/graph"},o.a.createElement(Ae.a,{type:"deployment-unit",theme:"outlined"}))),o.a.createElement("li",{className:"nav-item io-sider-button"},o.a.createElement(Ee.a,{type:"default",to:"/"},o.a.createElement(Ae.a,{type:"home",theme:"filled"}))),o.a.createElement("li",{className:"nav-item"},o.a.createElement("p",{style:{color:"grey",paddingLeft:"0.7rem"}},"favorites")))))}}]),a}(r.Component),Ia=Object(s.b)((function(e){return{user:e.auth.user,query:e.nodes.query,mainSider:e.components.componentList.mainSider,activeNode:e.nodes.activeNode}}),{signOut:ee,searchNodes:J,createUrlNode:Q,showComponent:re,hideComponent:oe})(Ra),Fa=fe.a.Content,Ua=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderMainSider=function(){if(e.props.mainSider)return o.a.createElement(Me,null)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.title="pins",document.body.style.removeProperty("overflow"),window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return o.a.createElement(fe.a,{className:"page-layout"},o.a.createElement(fe.a,null,this.renderMainSider(),o.a.createElement(Fa,{style:{minHeight:"100vh"}},o.a.createElement(Ia,null),o.a.createElement("div",{className:"list-container"},o.a.createElement(_a,null)))))}}]),a}(r.Component),La=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(Ua),Pa=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){localStorage.setItem("flash",!1),setInterval(this.props.getRandomNode(),50)}},{key:"render",value:function(){return o.a.createElement(fe.a,{style:{height:"100vh"}})}}]),a}(r.Component),Ha=Object(s.b)(null,{getRandomNode:Y})(Pa),Ma=(a(608),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleElectronSearch=function(e){window.api.send("toMain",{action:"search",query:e.target.value}),setTimeout((function(){n.searchInput.current.focus()}),100)},n.searchInput=o.a.createRef(),n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){window.api.send("toMain",{action:"hide-search"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"electron-search"},o.a.createElement("input",{type:"text",autoFocus:!0,ref:this.searchInput,id:"electron-search-input",onKeyPress:function(t){"Enter"===t.key&&e.handleElectronSearch(t)}}))}}]),a}(r.Component)),qa=Object(s.b)(null,{})(Ma),Ba=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderElectronSearch=function(){if(e.props.electronSearchData&&e.props.electronSearchData.visible)return o.a.createElement(qa,null)},e.renderUpdateAvailableModal=function(){if(e.props.updateAvailable&&e.props.updateAvailable.visible)return o.a.createElement(Te.a,{title:"A New Version Is Available!",visible:!0,className:"signout-modal",centered:!0,onOk:function(e){return window.open("http://www.synthona.net","_blank")},okType:"primary",okText:"Yes!",closable:!1,onCancel:function(){return e.props.hideComponent("updateAvailable")}},o.a.createElement("p",null,"An upgrade for Synthona is available. Do you want to know more?"))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.api&&window.api.receive("fromMain",function(){var t=Object(y.a)(b.a.mark((function t(a){var n,r,o,i,c,l,s,u,p,m,h,f,E;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a.message,t.next="search"===t.t0?3:"update-available"===t.t0?5:"search-all"===t.t0?7:"latest-version"===t.t0?9:"load-backend-config"===t.t0?11:"file-pick-success"===t.t0?13:"folder-pick-success"===t.t0?21:29;break;case 3:return e.props.electronSearchData?e.props.hideComponent("electronSearch"):e.props.showComponent("electronSearch"),t.abrupt("return");case 5:return e.props.updateAvailable?e.props.hideComponent("updateAvailable"):e.props.showComponent("updateAvailable"),t.abrupt("return");case 7:return document.getElementById("nav-primary-search")?(window.scrollTo({top:0}),document.getElementById("nav-primary-search").select()):(d.push("/"),window.scrollTo({top:0}),document.getElementById("nav-primary-search").select()),t.abrupt("return");case 9:return g.a.success("Synthona Is Up To Date",2),t.abrupt("return");case 11:return window.localStorage.setItem("backend-config",JSON.stringify(a.config)),t.abrupt("return");case 13:e.props.activeNode&&(n=JSON.stringify(e.props.activeNode)),o=[],i=Object(ze.a)(a.files);try{for(i.s();!(c=i.n()).done;)l=c.value,s=l.replace(/\\/g,"/"),r=s.substring(s.lastIndexOf("/")+1),o.push({name:r,path:l})}catch(v){i.e(v)}finally{i.f()}return t.next=19,e.props.linkFileNodes(o,n);case 19:return d.push("/"),t.abrupt("return");case 21:e.props.activeNode&&(n=JSON.stringify(e.props.activeNode)),p=[],m=Object(ze.a)(a.files);try{for(m.s();!(h=m.n()).done;)f=h.value,E=f.replace(/\\/g,"/"),u=E.substring(E.lastIndexOf("/")+1),p.push({name:u,path:f})}catch(v){m.e(v)}finally{m.f()}return t.next=27,e.props.linkFileNodes(p,n);case 27:return d.push("/"),t.abrupt("return");case 29:return t.abrupt("break",30);case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,this.renderElectronSearch(),this.renderUpdateAvailableModal())}}]),a}(r.Component),Va=Object(s.b)((function(e){return{electronSearchData:e.components.componentList.electronSearch,updateAvailable:e.components.componentList.updateAvailable,activeNode:e.nodes.activeNode}}),{showComponent:re,hideComponent:oe,linkFileNodes:le})(Ba),za=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderElectronMessage=function(){if(Object(E.a)())return o.a.createElement(Va,null)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){null===this.props.isAuth&&this.props.isAuthenticated()}},{key:"render",value:function(){var e;return e=this.props.isAuth?o.a.createElement(me,null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:Tt}),o.a.createElement(l.a,{path:"/profile/:username",exact:!0,component:Dt}),o.a.createElement(l.a,{path:"/activity",exact:!0,component:zt}),o.a.createElement(l.a,{path:"/collections",exact:!0,component:ia}),o.a.createElement(l.a,{path:"/edit/text/:uuid",exact:!0,component:na}),o.a.createElement(l.a,{path:"/edit/profile",exact:!0,component:qt}),o.a.createElement(l.a,{path:"/associations/:uuid",exact:!0,component:fa}),o.a.createElement(l.a,{path:"/graph/:uuid?",exact:!0,component:ja}),o.a.createElement(l.a,{path:"/pins",exact:!0,component:La}),o.a.createElement(l.a,{path:"/random",exact:!0,component:Ha}))):this.props.isFetchingAuth?o.a.createElement(Le,null):o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:Se}),o.a.createElement(l.a,{path:"/create-account",exact:!0,component:da}),o.a.createElement(l.a,{path:"/forgot-password",exact:!0,component:je}),o.a.createElement(l.a,{component:Se})),o.a.createElement("div",{style:{backgroundColor:"#272727"}},this.renderElectronMessage(),e)}}]),a}(r.Component),Ka=Object(s.b)((function(e){return{user:e.auth.user,isFetchingAuth:e.auth.isFetching,isAuth:e.auth.isAuth}}),{isAuthenticated:function(){return function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REFRESH_AUTH"}),e.next=4,M.get("/auth");case 4:a=e.sent,t({type:"REFRESH_AUTH_SUCCESS",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"REFRESH_AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})(za);c.a.render(o.a.createElement(s.a,{store:B},o.a.createElement(l.b,{history:d},o.a.createElement(Ka,null))),document.querySelector("#root"))},64:function(e,t,a){e.exports=a.p+"static/media/cloud9.22dc8cce.png"},90:function(e,t,a){e.exports=a.p+"static/media/synthona-logo.b740604b.png"}},[[320,1,2]]]);
//# sourceMappingURL=main.322a8650.chunk.js.map