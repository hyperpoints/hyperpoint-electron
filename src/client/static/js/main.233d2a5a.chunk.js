(this["webpackJsonpsynthona-react-client"]=this["webpackJsonpsynthona-react-client"]||[]).push([[0],{149:function(e,t,a){},150:function(e,t,a){},205:function(e,t,a){},26:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var n=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof e||"object"!==typeof e.versions||!e.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,a(131))},291:function(e,t,a){},318:function(e,t,a){e.exports=a(607)},326:function(e,t,a){},46:function(e,t,a){e.exports=a.p+"static/media/missing-file.20cda3d1.png"},554:function(e,t,a){},577:function(e,t,a){},578:function(e,t,a){},579:function(e,t,a){},60:function(e,t){var a=[{storageKey:"theme",name:"Theme",type:"dropdown",options:["classic","light","translucent","translucent green","translucent blue","translucent red","translucent yellow","translucent orange"],value:"classic"},{storageKey:"image-sizing",name:"Image Sizing",type:"dropdown",options:["classic","actual size","fit-vertically"],value:"classic"},{storageKey:"quill-document-width",name:"Document Page Width",type:"dropdown",options:["classic","full width"],value:"full width"},{storageKey:"link-mode",name:"Link Mode",type:"dropdown",options:["unidirectional","bidirectional"],value:"unidirectional"},{storageKey:"graph-render-limit",name:"Graph Render Limit",type:"number",value:100}];t.loadClientConfig=function(){var e;return console.log("loading the client config from our special new function"),1<=localStorage.getItem("client-config-version")?e=a.map((function(e){var t=JSON.parse(localStorage.getItem(e.storageKey));return t||(localStorage.clear("client-config-version"),window.location.reload()),e.value=t,e})):(e=a.map((function(e){var t=e.storageKey;return localStorage.setItem(t,JSON.stringify(e.value)),localStorage.setItem("sortOrder","DESC"),localStorage.setItem("sortType","recent"),e})),localStorage.setItem("client-config-version",1)),e},t.backendConfigMap={FULLSCREEN:{type:"boolean",name:"Fullscreen on Startup"},OPEN_URLS_IN_BROWSER:{type:"boolean",name:"Open URLs in Browser"},HTTP_CACHE:{type:"boolean",name:"Http Cache"},CLEAR_CACHE_ON_START:{type:"boolean",name:"Clear Cache On Startup"},ENABLE_HARDWARE_ACCELERATION:{type:"boolean",name:"Hardware Acceleration"},DEBUG:{type:"boolean",name:"Debug Mode"},SERVER_PORT:{type:"number",name:"Server Port"},CLIENT_PORT:{type:"number",name:"Client Port"},CLIENT_BASE:{type:"string",name:"Client Base"},APP_NAME:{type:"string",name:"App Name"}},t.backendConfigFilter=["JWT_SECRET","REFRESH_TOKEN_SECRET","CONFIG_VERSION","CLIENT_PORT","SERVER_PORT","ENABLE_HARDWARE_ACCELERATION","CLIENT_BASE","APP_NAME","DEBUG","CLEAR_CACHE_ON_START"]},603:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=a(32),l=a(16),s=a(111),u=a(299),d=a(48),p=Object(d.a)(),m=a(12),h=a(13),f=a(15),E=a(14),g=(a(326),a(26)),v=(a(43),a(7)),b=a(3),y=a.n(b),w=a(6),O=a(213),C=a.n(O),S=C.a.CancelToken,N=S.source(),k=C.a.create({baseURL:"http://"+window.location.hostname+":4000",withCredentials:!0,cancelToken:N.token}),j=a(123),x=a.n(j),A=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"FETCH_NODES"}),t.next=4,k.get("/node/search",{params:{page:e.page,type:e.type,searchQuery:e.searchQuery,pinned:e.pinned,sortType:e.sortType,sortOrder:e.sortOrder}});case 4:n=t.sent,a({type:"FETCH_NODES_SUCCESS",payload:n.data,query:e}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:"FETCH_NODES_ERROR"}),a({type:"RESET_APP"}),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"all"===e.type&&(e.type=null),t.prev=1,a({type:"SEARCH_NODES"}),t.next=5,k.get("/node/search",{params:{page:e.page,type:e.type,searchQuery:e.searchQuery,pinned:e.pinned,sortType:e.sortType,sortOrder:e.sortOrder}});case 5:n=t.sent,a({type:"SEARCH_NODES_SUCCESS",payload:n.data,query:e}),p.push("/"),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(1),a({type:"SEARCH_NODES_ERROR"}),a({type:"RESET_APP"}),v.a.error("Could not search nodes",1),p.push("/");case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_NODE"}),t.prev=1,t.next=4,k.patch("/node",{uuid:e.uuid,name:e.name,preview:e.preview,path:e.path});case 4:n=t.sent,a({type:"UPDATE_NODE_SUCCESS",uuid:e.uuid,result:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"UPDATE_NODE_ERROR"}),v.a.error("There was a problem saving your changes",1),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},D=function(e,t){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_NODE"}),"text"===e.type&&((n=new x.a).insert(e.name),e.content=JSON.stringify(n)),t.prev=2,t.next=5,k.put("/node",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,content:e.content,linkedNode:e.linkedNode});case 5:r=t.sent,a({type:"CREATE_NODE_SUCCESS",payload:r.data.node}),200===r.status&&"text"===e.type&&p.push("/edit/text/"+r.data.node.uuid),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"CREATE_NODE_ERROR"}),v.a.error("There was a problem creating that node",1),p.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"CREATE_NODE"}),t.prev=1,t.next=4,k.put("/url",{isFile:e.isFile,type:e.type,name:e.name,preview:e.preview,path:e.path,content:e.content,linkedNode:e.linkedNode});case 4:n=t.sent,a({type:"CREATE_NODE_SUCCESS",payload:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"CREATE_NODE_ERROR"}),v.a.error("There was a problem adding that URL",1),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"MARK_NODE_VIEW"}),t.prev=1,t.next=4,k.patch("/node/viewed",{uuid:e.uuid});case 4:a({type:"MARK_NODE_VIEW_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"MARK_NODE_VIEW_ERROR"}),v.a.error("Could not mark node view",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SET_ACTIVE_NODE"}),t.prev=1,t.next=4,k.get("/node",{params:{uuid:e}});case 4:n=t.sent,a({type:"SET_ACTIVE_NODE_SUCCESS",payload:n.data}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"SET_ACTIVE_NODE_ERROR"}),p.push("/"),v.a.error("Could not retrieve values",1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},U=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_ACTIVE_NODE"}),e.prev=1,e.next=4,k.get("/node/random");case 4:a=e.sent,t({type:"SET_ACTIVE_NODE_SUCCESS",payload:a.data}),window.location.replace("/associations/".concat(a.data.node.uuid)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"SET_ACTIVE_NODE_ERROR"}),p.push("/"),v.a.error("Could not retrieve values",1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},L=function(){return{type:"CLEAR_ACTIVE_NODE"}},P=a(60),H=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SIGN_OUT"}),e.prev=1,e.next=4,k.get("/auth/signout");case 4:t({type:"RESET_APP"}),v.a.success("Signed Out",1),p.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"SIGN_OUT_ERROR"}),v.a.error("There was a problem signing out",1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_USER_NODE"}),t.prev=1,t.next=4,k.get("/user/username",{params:{username:e}});case 4:return n=t.sent,r=n.data.user,t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(1),v.a.error("Could not fetch user",1);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",t.prev=2,e.page||(a({type:"RESET_ASSOCIATION_LINK_LIST"}),e.page=1),a({type:"FETCH_ASSOCIATIONS_LINK_LIST"}),t.next=7,k.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page,bidirectional:r}});case 7:o=t.sent,a({type:"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS",payload:o.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),a({type:"FETCH_ASSOCIATIONS_LINK_LIST_ERROR"}),v.a.error("Could not fetch items",1),p.push("/");case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",t.prev=2,e.page||(a({type:"RESET_ASSOCIATIONS"}),e.page=1),a({type:"FETCH_ASSOCIATIONS"}),t.next=7,k.get("/association",{params:{nodeUUID:e.nodeUUID,page:e.page,bidirectional:r}});case 7:o=t.sent,a({type:"FETCH_ASSOCIATIONS_SUCCESS",payload:o.data,nodeUUID:e.nodeUUID,page:e.page}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),a({type:"FETCH_ASSOCIATIONS_ERROR"}),v.a.error("Could not fetch items",1),p.push("/");case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e,t){return function(){var a=Object(w.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.put("/association/linkstrength",{nodeA:e,nodeB:t});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),v.a.error("There was a problem with your request",1);case 8:case"end":return a.stop()}}),a,null,[[0,5]])})));return function(e){return a.apply(this,arguments)}}()},z=function(e,t){return{type:"SHOW_COMPONENT",payload:{type:e,content:t}}},K=function(e){return{type:"HIDE_COMPONENT",payload:{type:e}}},G=function(){return console.log("load theme called"),{type:"LOAD_THEME",payload:{theme:function(){var e={};switch(JSON.parse(localStorage.getItem("theme"))){case"classic":e={cardTitleColor:"#03fc88",cardButtonColor:"white",cardHeaderColor:"#111111",cardBodyColor:"#111111",cardTextColor:"#e7e7e7",graphNodeColor:"#ffffff",graphNodeBorderColor:"#fff019",graphNodeHoverColor:"#f0ff99",graphNodeBorderHoverColor:"#f0ff99",textEditorBackground:"white",textEditorText:"black"};break;case"light":e={cardTitleColor:"black",cardButtonColor:"black",cardHeaderColor:"#e7e7e7",cardBodyColor:"#e7e7e7",cardTextColor:"grey",graphNodeColor:"#f0ff99",graphNodeBorderColor:"#f0ff99",graphNodeHoverColor:"white",graphNodeBorderHoverColor:"white",textEditorBackground:"white",textEditorText:"black"};break;case"translucent":e={cardTitleColor:"white",cardButtonColor:"white",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"rgba(255, 255, 255, .7)",graphNodeBorderColor:"#e7e7e7",graphNodeHoverColor:"rgba(255, 255, 255, .4)",graphNodeBorderHoverColor:"rgba(255, 255, 255, .4)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent green":e={cardTitleColor:"#03fc88",cardButtonColor:"#03fc88",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"#03fc88",graphNodeBorderColor:"#03fc88",graphNodeHoverColor:"rgba(3, 252, 136, .5)",graphNodeBorderHoverColor:"rgba(3, 252, 136, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent blue":e={cardTitleColor:"#34d5eb",cardButtonColor:"#34d5eb",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"#34d5eb",graphNodeBorderColor:"#3651ff",graphNodeHoverColor:"rgba(50, 66, 168, .5)",graphNodeBorderHoverColor:"rgba(50, 66, 168, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent red":e={cardTitleColor:"#ff3d78",cardButtonColor:"#ff3d78",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"#ff3d78",graphNodeBorderColor:"#c70a43",graphNodeHoverColor:"rgba(255, 61, 120, .5)",graphNodeBorderHoverColor:"rgba(255, 61, 120, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent yellow":e={cardTitleColor:"#faff63",cardButtonColor:"#faff63",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"#faff63",graphNodeBorderColor:"#e7e7e7",graphNodeHoverColor:"rgba(250, 255, 99, .5)",graphNodeBorderHoverColor:"rgba(250, 255, 99, .5)",textEditorBackground:"white",textEditorText:"#272727"};break;case"translucent orange":e={cardTitleColor:"#ffa424",cardButtonColor:"#ffa424",cardHeaderColor:"rgba(0, 0, 0, .6)",cardBodyColor:"rgba(0, 0, 0, .3)",cardTextColor:"#e7e7e7",graphNodeColor:"#ffa424",graphNodeBorderColor:"#e7e7e7",graphNodeHoverColor:"rgba(255, 164, 36, .5)",graphNodeBorderHoverColor:"rgba(255, 164, 36, .5)",textEditorBackground:"white",textEditorText:"#272727"}}return e}()}}},Q=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.success("generating export!",2),e.prev=1,t({type:"GENERATE_EXPORT"}),e.next=5,k.put("/port/export/all");case 5:200===(a=e.sent).status&&(t({type:"GENERATE_EXPORT_SUCCESS",payload:a.data}),p.push("/")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"GENERATE_EXPORT_ERROR"}),v.a.error("Could not export instance data",1),p.push("/");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.put("/file/explorer",{uuid:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),v.a.error("There was a problem opening the file in the file explorer",1),window.location.reload();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},W=a(67),X=a.n(W),Y=Object(l.b)(null,{loadTheme:G})((function(e){Object(n.useEffect)((function(){e.loadTheme(),localStorage.getItem("client-config-version")||Object(P.loadClientConfig)()}));return r.a.createElement("div",{style:{backgroundImage:"url(".concat(function(){var e=localStorage.getItem("background-image"),t=X.a;return e&&(t=e),t}(),")"),backgroundColor:"#272727",backgroundSize:"100vw 107vh",backgroundRepeat:"repeat"}},e.children)})),Z=(a(206),a(108)),$=(a(38),a(9)),ee=a(11),te=a(21),ae=a(28),ne=(a(205),$.a.Content),re=$.a.Footer,oe=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getUsername=function(){return"synthona"},e.onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.signIn(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="synthona"}},{key:"render",value:function(){return r.a.createElement($.a,{className:"login-layout"},r.a.createElement(ne,{className:"login-content"},r.a.createElement(Z.a,{className:"login-card"},r.a.createElement(te.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:ie,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return r.a.createElement(te.c,{className:"login-form"},r.a.createElement("h1",{className:"login-title"},r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728"),"synthona",r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}},"  ","\u2728")),r.a.createElement(te.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),r.a.createElement(te.a,{name:"email",component:"div",className:"login-error"}),r.a.createElement(te.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),r.a.createElement(te.a,{name:"password",component:"div",className:"login-error"}),r.a.createElement(te.a,{name:"confirmPassword",component:"div",className:"login-error"}),r.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"login"),r.a.createElement(ee.a,{to:"/create-account",className:"login-signup"},"create account"))})),r.a.createElement("div",{className:"login-after-card"},r.a.createElement(ee.a,{to:"/forgot-password",className:"login-forgot-password"},"lost password")))),r.a.createElement(re,null))}}]),a}(n.Component),ie=ae.object().shape({email:ae.string().required().email("E-mail is not valid!"),password:ae.string().required().min(5,"Password has to be longer than 6 characters!")}),ce=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"SIGN_IN"}),Object(P.loadClientConfig)(),t.prev=2,t.next=5,k.put("/auth/login",e);case 5:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"SIGN_IN_SUCCESS",payload:n.data}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"SIGN_IN_ERROR"}),v.a.error("There was a problem signing in",1),p.push("/");case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}})(oe),le=$.a.Content,se=$.a.Footer,ue=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.forgotPassword(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="forgot password"}},{key:"render",value:function(){return r.a.createElement($.a,{className:"login-layout"},r.a.createElement(le,{className:"login-content"},r.a.createElement(Z.a,{className:"login-card"},r.a.createElement(te.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:de,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return r.a.createElement(te.c,{className:"login-form"},r.a.createElement("h1",{className:"login-title"}," ",r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728"),"lost password"," ",r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}}," ","\u2728")),r.a.createElement(te.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),r.a.createElement(te.a,{name:"email",component:"div",className:"login-error"}),r.a.createElement(te.b,{type:"password",name:"newPassword",placeholder:"new password",className:"login-field"}),r.a.createElement(te.a,{name:"newPassword",component:"div",className:"login-error"}),r.a.createElement(te.b,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",className:"login-field"}),r.a.createElement(te.a,{name:"confirmNewPassword",component:"div",className:"login-error"}),r.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"reset"),r.a.createElement(ee.a,{to:"/",className:"login-signup"},"back to login"))})))),r.a.createElement(se,null))}}]),a}(n.Component),de=ae.object().shape({email:ae.string().required().email("E-mail is not valid!"),newPassword:ae.string().required("new password is required"),confirmNewPassword:ae.string().required("please confirm new password").oneOf([ae.ref("newPassword")],"Your passwords don't match")}),pe=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{forgotPassword:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.put("/auth/forgot-password",{email:e.email,newPassword:e.newPassword,confirmNewPassword:e.confirmNewPassword});case 3:200===t.sent.status&&window.location.replace("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),v.a.error("something went wrong",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(ue),me=(a(103),a(45)),he=(a(288),a(167)),fe=(a(54),a(5)),Ee=(a(549),a(305)),ge=(a(551),a(219)),ve=a(88),be=a.n(ve),ye=(a(554),a(555),a(303)),we=function(e){return r.a.createElement($.a,null,r.a.createElement(ye.a,{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"top"===e.alignment?"start":"center"},className:"loading-spinner",size:"large"}))},Oe=ge.a.Item,Ce=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).signOutHandler=function(){n.props.signOut()},n.toggleSignoutModal=function(){n.state.showSignoutModal?(n.setState({showSignoutModal:!1}),document.body.style.removeProperty("overflow")):n.setState({showSignoutModal:!0})},n.renderDrawerClasses=function(){return!1===n.props.animate?"page-sider no-animation":"page-sider"},n.state={showSignoutModal:null,visible:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.mainSider?r.a.createElement(we,null):r.a.createElement("div",{className:"sider-container"},r.a.createElement(he.a,{className:this.renderDrawerClasses(),width:"200px",mask:this.props.showMask,placement:"left",closable:!1,onClose:function(t){return e.props.hideComponent("mainSider")},visible:!!this.props.mainSider&&this.props.mainSider.visible},r.a.createElement(ge.a,{mode:"vertical",defaultSelectedKeys:["1"],className:"sider-menu"},r.a.createElement(Oe,null,r.a.createElement(ee.a,{to:"/profile/".concat(this.props.user.username),onClick:function(t){return e.props.hideComponent("mainSider")}},r.a.createElement(Ee.a,{className:"nav-avatar",src:this.props.user.avatar||be.a,icon:"user",style:{display:"inline-block",verticalAlign:"middle",marginTop:"0.8rem",width:"2.5rem",height:"2.5rem",objectFit:"contain"}}))),r.a.createElement(Oe,{className:"sider-menu-item sider-title"},r.a.createElement(ee.a,{to:"/profile/".concat(this.props.user.username),onClick:function(t){return e.props.hideComponent("mainSider")}},r.a.createElement(fe.a,{type:"sketch",theme:"outlined",style:{margin:"0"}})," ",r.a.createElement("b",null,"Profile"))),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/",onClick:function(t){return e.props.hideComponent("mainSider")}},"Explore")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/pins",onClick:function(t){return e.props.hideComponent("mainSider")}},"Favorites")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/graph",onClick:function(t){e.props.clearActiveNode(),e.props.hideComponent("mainSider")}},"Constellation")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/random",onClick:function(t){return e.props.hideComponent("mainSider")}},"Random")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/edit/profile/",onClick:function(t){return e.props.hideComponent("mainSider")}},"Options")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"/help",onClick:function(t){t.preventDefault(),window.open("https://github.com/synthona/synthona-help/blob/main/README.md","_blank"),e.props.hideComponent("mainSider")}},"Help")),r.a.createElement(Oe,{className:"sider-menu-item"},r.a.createElement(ee.a,{to:"#",onClick:this.toggleSignoutModal},"Sign Out")))),r.a.createElement(me.a,{title:this.props.user.displayName,visible:this.state.showSignoutModal,className:"signout-modal",centered:!0,onOk:this.signOutHandler,okType:"primary",okText:"Sign Out",closable:!1,onCancel:this.toggleSignoutModal},r.a.createElement("p",null,"Are you sure you want to sign out?")))}}]),a}(n.Component),Se=Object(l.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{signOut:H,hideComponent:K,generateInstanceExport:Q,clearActiveNode:L})(Ce),Ne=(a(290),a(128)),ke=(a(120),a(27)),je=(a(104),a(31)),xe=a(162),Ae=(a(207),a(61)),Te=function(e){try{new URL(e)}catch(t){return!1}return!0},_e=function(e){return null!=e.match(/\..+(jpeg|jpg|gif|png|webp)/)||e.includes("http://localhost")},De=(a(291),$.a.Header),Re=Ae.a.Option,Ie=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleInputMode=function(){"query"===n.state.inputMode?n.setState({inputMode:"create",modeIcon:"plus",placeholder:"create",nodeTypes:"text"}):n.setState({inputMode:"query",modeIcon:"search",placeholder:"query",nodeTypes:"all"})},n.toggleMainSider=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.mainSider?n.props.hideComponent("mainSider"):n.props.showComponent("mainSider");case 1:case"end":return e.stop()}}),e)}))),n.toggleSortOrder=function(){"ASC"===n.state.sortOrder?(n.setState({sortOrder:"DESC"}),localStorage.setItem("sortOrder","DESC")):(n.setState({sortOrder:"ASC"}),localStorage.setItem("sortOrder","ASC"))},n.renderCreateFileNodeOption=function(){if(!0===Object(g.a)())return r.a.createElement(Re,{value:"file"},"files")},n.commandHandler=function(e){switch(e.target.blur(),n.state.inputMode){case"query":return n.props.searchNodes({searchQuery:n.state.input,type:n.state.nodeTypes,sortType:n.state.sortType,sortOrder:n.state.sortOrder});case"create":return n.createNodeHandler();default:return}},n.createNodeHandler=function(){var e;switch(n.props.activeNode&&(e=JSON.stringify(n.props.activeNode)),n.state.nodeTypes){case"text":n.props.createNode({isFile:!1,type:"text",name:n.state.input,preview:"",linkedNode:e}),n.setState({input:""}),p.push("/");break;case"file":n.selectLocalFile(e);break;case"url":_e(n.state.input)?(n.props.createNode({isFile:!1,type:"image",name:n.state.input,preview:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})):Te(n.state.input)?(n.props.createUrlNode({isFile:!1,type:"url",name:n.state.input,preview:n.state.input,path:n.state.input,content:n.state.input,linkedNode:e}),n.setState({input:""})):v.a.error("You must enter a valid URL",1),p.push("/");break;case"collection":n.props.createNode({isFile:!1,type:"collection",name:n.state.input,preview:"",content:n.state.input,linkedNode:e}),n.setState({input:""}),p.push("/");break;default:return}},n.selectLocalFile=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("multiple",!0),t.click(),t.onchange=Object(w.a)(y.a.mark((function a(){var r,o,i,c;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=[],o=Object(xe.a)(t.files);try{for(o.s();!(i=o.n()).done;)c=i.value,r.push({name:c.name,path:c.path,type:c.type})}catch(l){o.e(l)}finally{o.f()}return a.next=5,n.props.linkFileNodes(r,e);case 5:n.setState({input:""}),p.push("/");case 7:case"end":return a.stop()}}),a)})))},n.renderSelectBefore=function(){return"query"===n.state.inputMode?r.a.createElement(Ae.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){n.setState({nodeTypes:e})}},r.a.createElement(Re,{value:"all"},"all"),r.a.createElement(Re,{value:"url"},"urls"),r.a.createElement(Re,{value:"file"},"file"),r.a.createElement(Re,{value:"text"},"text"),r.a.createElement(Re,{value:"image"},"images"),r.a.createElement(Re,{value:"package"},"packages"),r.a.createElement(Re,{value:"collection"},"collections")):r.a.createElement(Ae.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){n.setState({nodeTypes:e})}},r.a.createElement(Re,{value:"text"},"text"),n.renderCreateFileNodeOption(),r.a.createElement(Re,{value:"url"},"url"),r.a.createElement(Re,{value:"collection"},"collection"))},n.renderSelectAfter=function(){return r.a.createElement("div",{className:"io-input-sort"},r.a.createElement(Ne.a.Group,null,r.a.createElement(Ae.a,{showSearch:!0,showArrow:!1,value:n.state.sortType,onChange:function(e){n.setState({sortType:e}),localStorage.setItem("sortType",e)}},r.a.createElement(Re,{value:"recent"},r.a.createElement(fe.a,{type:"bulb",theme:"outlined"})," recent"),r.a.createElement(Re,{value:"views"},r.a.createElement(fe.a,{type:"thunderbolt",theme:"outlined"})," top"),r.a.createElement(Re,{value:"created"},r.a.createElement(fe.a,{type:"clock-circle",theme:"outlined"})," created")),r.a.createElement(ke.a,{title:"DESC"===n.state.sortOrder?"a-z":"z-a",mouseEnterDelay:1.1},r.a.createElement(je.a,{className:"io-input-button",onClick:function(){return n.toggleSortOrder()}},r.a.createElement(fe.a,{type:"DESC"===n.state.sortOrder?"arrow-up":"arrow-down",theme:"outlined"})))))},n.state={input:n.props.query.searchQuery,nodeTypes:n.props.query.type||"all",sortType:n.props.query.sortType,sortOrder:n.props.query.sortOrder,createType:null,queryType:null,inputMode:"query",modeIcon:"search",placeholder:"query"},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(De,{className:"page-header",style:this.props.fixed?{position:"fixed"}:null},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-item io-sider-button mobile-visible",style:{marginRight:"0"}},r.a.createElement(je.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleMainSider()}},r.a.createElement(fe.a,{type:"bars",theme:"outlined"}))),r.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.3rem"}},r.a.createElement(ke.a,{title:"home",mouseEnterDelay:1.1},r.a.createElement(ee.a,{type:"default",to:"/"},r.a.createElement(fe.a,{type:"home",theme:"filled"})))),r.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"-0.1rem"}},r.a.createElement(ke.a,{title:"graph",mouseEnterDelay:1.1},r.a.createElement(ee.a,{type:"default",to:"#",onClick:function(){e.props.clearActiveNode(),window.location="/graph"}},r.a.createElement(fe.a,{type:"deployment-unit",theme:"outlined"})))),r.a.createElement("li",{className:"nav-item io-sider-button mobile-hidden",style:{padding:"0",marginRight:"-0.1rem"}},r.a.createElement(ke.a,{title:"random",mouseEnterDelay:1.1},r.a.createElement(je.a,{type:"default",shape:"circle",onClick:function(e){return window.location.href="/random"}},r.a.createElement(fe.a,{type:"thunderbolt",theme:"filled"})))),r.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.1rem"}},r.a.createElement(ke.a,{title:"favorites",mouseEnterDelay:1.1},r.a.createElement(ee.a,{type:"default",to:"/pins",style:{marginRight:"0.3rem"}},r.a.createElement(fe.a,{type:"star",theme:"filled"})))),r.a.createElement("li",{className:"nav-item create-node-button"},r.a.createElement(je.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleInputMode()}},r.a.createElement(fe.a,{type:this.state.modeIcon,theme:"outlined"}))),r.a.createElement("li",{className:"nav-search"},r.a.createElement(Ne.a,{onPressEnter:function(t,a){return e.commandHandler(t)},maxLength:500,value:this.state.input,onChange:function(t){return e.setState({input:t.target.value})},defaultValue:this.props.query.searchQuery||"",placeholder:this.state.placeholder,addonBefore:this.renderSelectBefore(),addonAfter:this.renderSelectAfter(),className:"nav-search-input",id:"nav-primary-search"})))))}}]),a}(n.Component),Fe=Object(l.b)((function(e){return{user:e.auth.user,query:e.nodes.query,mainSider:e.components.componentList.mainSider,activeNode:e.nodes.activeNode}}),{signOut:H,searchNodes:T,createNode:D,linkFileNodes:function(e,t){return function(){var a=Object(w.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"LINK_FILE_NODES"}),a.prev=1,a.next=4,k.put("/file/link",{fileList:JSON.stringify(e),linkedNode:t});case 4:200===(r=a.sent).status?n({type:"LINK_FILE_NODES_SUCCESS",nodes:r.data.nodes}):v.a.error("There was a problem creating the file nodes",1),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n({type:"LINK_FILE_NODES_ERROR"}),v.a.error("There was a problem creating the file nodes",1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},createUrlNode:R,showComponent:z,hideComponent:K,getRandomNode:U,clearActiveNode:L})(Ie),Ue=(a(149),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).saveName=function(e){o.state.name!==e&&o.props.updateActiveNode({uuid:o.props.nodeData.uuid,name:e}),o.setState({name:e})},o.toggleDeleteModal=function(){o.state.showDeleteModal?o.setState({showDeleteModal:!1}):o.setState({showDeleteModal:!0})},o.deleteHandler=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({showDeleteModal:!1}),o.setState({deleting:!0}),e.next=4,o.props.deleteNode(o.props.nodeData.uuid);case 4:o.props.clearActiveNode();case 5:case"end":return e.stop()}}),e)}))),o.toggleExportModal=function(){o.state.showExportModal?o.setState({showExportModal:!1}):o.setState({showExportModal:!0})},o.exportHandler=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({showExportModal:!1}),e.next=3,o.props.generateExportByUUID(o.props.nodeData.uuid);case 3:case"end":return e.stop()}}),e)}))),o.setUrlPreviewImage=function(e){_e(e)&&Te(e)?(v.a.success("updated the preview image"),o.props.updateActiveNode({uuid:o.props.nodeData.uuid,preview:e})):""===e?(v.a.success("removed the preview image"),o.props.updateActiveNode({uuid:o.props.nodeData.uuid,preview:""})):v.a.error("there was a problem setting the preview image",1)},o.togglePinned=function(){!0===o.state.pinned?(o.setState({pinned:!1,pinnedState:"outlined"}),o.props.updateActiveNode({uuid:o.props.nodeData.uuid,pinned:!1})):(o.setState({pinned:!0,pinnedState:"filled"}),o.props.updateActiveNode({uuid:o.props.nodeData.uuid,pinned:!0}))},o.setPreviewToLocalFilePath=function(){if(null===o.props.nodeData.preview){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png","image/webp"]),e.click(),e.onchange=Object(w.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.files[0],o.props.updateActiveNode({uuid:o.props.nodeData.uuid,preview:a.path});case 2:case"end":return t.stop()}}),t)})))}else o.props.clearNodePreview(o.props.nodeData)},o.renderTitle=function(){return o.state.editable?r.a.createElement("input",{type:"text",className:"full-card-title",style:{backgroundColor:"transparent"},onBlur:function(){return o.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:o.state.name,onKeyPress:function(e){"Enter"===e.key&&o.setState({editable:null})},onChange:function(e){o.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):r.a.createElement("h3",{className:"full-card-title",style:{color:o.props.theme.cardTitleColor},onDoubleClick:function(e){e.preventDefault(),o.setState({editable:!0})}},o.state.name)},o.renderContextualButtons=function(){switch(o.props.nodeData.type){case"package":return o.props.nodeData.metadata&&o.props.nodeData.metadata.importing?r.a.createElement(n.Fragment,null):o.props.nodeData.metadata&&o.props.nodeData.metadata.expanded?r.a.createElement(ke.a,{title:"restore",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.props.removeImportsByPackage(o.props.nodeData.uuid)}},r.a.createElement(fe.a,{type:"undo",theme:"outlined",className:"full-card-button"})))):r.a.createElement(ke.a,{title:"expand",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.props.unpackImport(o.props.nodeData.uuid)}},r.a.createElement(fe.a,{type:"gift",theme:"filled",className:"full-card-button"}))));case"url":return r.a.createElement(ke.a,{title:"preview image",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.setState({showUrlPreviewImageModal:!0})}},r.a.createElement(fe.a,{type:"picture",theme:"outlined",className:"full-card-button"}))));case"file":return Object(g.a)()?r.a.createElement(ke.a,{title:"replace preview image",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.setPreviewToLocalFilePath()}},r.a.createElement(fe.a,{type:"picture",theme:"outlined",className:"full-card-button"})))):void 0;case"audio":case"zip":return r.a.createElement(ke.a,{title:"replace preview image",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.setPreviewToLocalFilePath()}},r.a.createElement(fe.a,{type:"picture",theme:"outlined",className:"full-card-button"}))));case"image":return r.a.createElement(ke.a,{title:"set as app background",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){localStorage.setItem("background-image",o.props.nodeData.preview),window.location.reload()}},r.a.createElement(fe.a,{type:"layout",className:"full-card-button"}))));default:return}},o.renderRevealInExplorerButton=function(){if(o.props.nodeData.isFile)return r.a.createElement(ke.a,{title:"open in file explorer",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.props.openFileInExplorer(o.props.nodeData.uuid)}},r.a.createElement(fe.a,{type:"folder-open",theme:"outlined",className:"full-card-button"}))))},o.renderExportButton=function(){if("package"!==o.props.nodeData.type)return r.a.createElement(ke.a,{title:"generate export",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){o.toggleExportModal()}},r.a.createElement(fe.a,{type:"gift",theme:"outlined",className:"full-card-button"}))))},o.state={name:o.props.nodeData.name,preview:o.props.nodeData.preview,pinned:o.props.nodeData.pinned,pinnedState:"outlined",editable:!1,showDeleteModal:null,showExportModal:null,showUrlPreviewImageModal:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.nodeData.pinned?this.setState({pinnedState:"filled"}):this.setState({pinnedState:"outlined"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"full-card-options",style:{backgroundColor:this.props.theme.cardHeaderColor}},this.renderTitle(),r.a.createElement("ul",{className:"full-card-buttons-list"},r.a.createElement(ke.a,{title:"associations",mouseEnterDelay:1.1},r.a.createElement("li",{className:"mobile-visible"},r.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.nodeData)}},r.a.createElement(fe.a,{type:"branches",theme:"outlined",className:"full-card-button"})))),r.a.createElement(ke.a,{title:"constellation",mouseEnterDelay:1.1},r.a.createElement("li",{className:"mobile-visible"},r.a.createElement("button",{onClick:function(t){return window.location.replace("/graph/".concat(e.props.nodeData.uuid))}},r.a.createElement(fe.a,{type:"deployment-unit",theme:"outlined",className:"full-card-button"})))),r.a.createElement(ke.a,{title:"star",mouseEnterDelay:1.1},r.a.createElement("li",{className:"mobile-visible"},r.a.createElement("button",{onClick:function(t){return e.togglePinned()}},r.a.createElement(fe.a,{type:"star",theme:this.state.pinnedState,className:"full-card-button"})))),this.renderContextualButtons(),this.renderExportButton(),this.renderRevealInExplorerButton(),r.a.createElement(ke.a,{title:"open in browser",mouseEnterDelay:1.1},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return window.open("/associations/".concat(e.props.nodeData.uuid),"_blank")}},r.a.createElement(fe.a,{type:"global",theme:"outlined",className:"full-card-button"})))),r.a.createElement(ke.a,{title:"delete",mouseEnterDelay:1.1},r.a.createElement("li",{className:"mobile-visible"},r.a.createElement("button",{onClick:function(t){return e.toggleDeleteModal()}},r.a.createElement(fe.a,{type:"delete",theme:"outlined",className:"full-card-button delete"}))))),r.a.createElement(me.a,{title:"Confirm Deletion",visible:this.state.showDeleteModal,className:"delete-modal",centered:!0,onOk:this.deleteHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okType:"danger",okText:"Delete",closable:!1,onCancel:this.toggleDeleteModal},r.a.createElement("p",null,"Are you sure you want to delete ",r.a.createElement("b",null,this.props.nodeData.name||"untitled"),"?")),r.a.createElement(me.a,{title:"Confirm Export",visible:this.state.showExportModal,className:"delete-modal",centered:!0,onOk:this.exportHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okText:"Generate",closable:!1,onCancel:this.toggleExportModal},r.a.createElement("p",null,"Generate export from ",r.a.createElement("b",null,this.props.nodeData.name||"untitled"),"? The export will contain ",r.a.createElement("b",null,this.props.nodeData.name||"untitled")," along with all its associations, and appear in the favorites when it is completed.")),r.a.createElement(me.a,{title:"Preview Image",visible:this.state.showUrlPreviewImageModal,className:"full-card-modal",centered:!0,onOk:function(t){e.setState({showUrlPreviewImageModal:!1}),e.setUrlPreviewImage(e.state.preview)},afterClose:function(){document.body.style.removeProperty("overflow")},okText:"save",closable:!1,onCancel:function(t){e.setState({preview:e.props.nodeData.preview,showUrlPreviewImageModal:!1}),window.getSelection().removeAllRanges()}},r.a.createElement("input",{type:"text",className:"full-card-modal-input",autoFocus:!0,maxLength:"250",onFocus:function(e){e.target.select()},placeholder:"image URL",value:this.state.preview||"",onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),e.setState({showUrlPreviewImageModal:!1}),e.setUrlPreviewImage(e.state.preview))},onChange:function(t){return e.setState({preview:t.target.value})}})))}}]),a}(n.Component)),Le=Object(l.b)((function(e){return{nodeData:e.nodes.activeNode,theme:e.components.theme}}),{showComponent:z,updateActiveNode:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_ACTIVE_NODE"}),t.prev=1,t.next=4,k.patch("/node",{uuid:e.uuid,name:e.name,preview:e.preview,pinned:e.pinned});case 4:n=t.sent,a({type:"UPDATE_ACTIVE_NODE_SUCCESS",uuid:e.uuid,result:n.data.node}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"UPDATE_ACTIVE_NODE_ERROR"}),v.a.error("There was a problem saving your changes",1),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},clearNodePreview:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_ACTIVE_NODE"}),t.prev=1,t.next=4,k.patch("/node/preview/clear",{uuid:e.uuid});case 4:window.location.reload(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),v.a.error("There was a problem saving your changes",1),p.push("/");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},unpackImport:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.put("/port/import/",{uuid:e});case 3:200===t.sent.status&&(v.a.success("started import process!",3),p.push("/")),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),v.a.error("Could not import instance data",1),p.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},openFileInExplorer:J,deleteNode:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"DELETE_NODE"}),t.prev=1,t.next=4,k.delete("/node",{params:{uuid:e}});case 4:200===t.sent.status&&(p.push("/"),a({type:"DELETE_NODE_SUCCESS",uuid:e}),v.a.success("successfully deleted",1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"DELETE_NODE_ERROR"}),v.a.error("There was a problem deleting the node",1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},clearActiveNode:L,generateExportByUUID:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v.a.success("generating export!",2),t.prev=1,a({type:"GENERATE_EXPORT"}),t.next=5,k.put("/port/export/",{uuid:e});case 5:200===(n=t.sent).status&&(a({type:"GENERATE_EXPORT_SUCCESS",payload:n.data}),p.push("/")),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"GENERATE_EXPORT_ERROR"}),v.a.error("Could not export instance data",1),p.push("/");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},removeImportsByPackage:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v.a.success("removing imports...",1),t.prev=1,t.next=4,k.patch("/port/export/undo/",{uuid:e});case 4:200===t.sent.status&&p.push("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),v.a.error("Could not remove imports for this export",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})(Ue),Pe=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).renderTitle=function(){return n.state.editable?r.a.createElement("input",{type:"text",className:"nodelist-item-title",style:{backgroundColor:"transparent"},onBlur:function(){return n.setState({editable:null})},maxLength:"250",autoFocus:!0,placeholder:"name",value:n.state.name,onKeyPress:function(e){"Enter"===e.key&&n.setState({editable:null})},onChange:function(e){n.saveName(e.target.value)},onFocus:function(e){e.target.select()}}):r.a.createElement("h3",{className:"nodelist-item-title",style:{color:n.props.theme.cardTitleColor},onDoubleClick:function(e){e.preventDefault(),n.setState({editable:!0})}},n.state.name)},n.renderLightbulbIcon=function(){var e=localStorage.getItem("sortType");if(console.log(window.location.href),"recent"===e||window.location.href.includes("associations"))return r.a.createElement("button",{onClick:function(e){return n.props.markNodeView(n.props.node)}},r.a.createElement(fe.a,{type:"bulb",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:n.props.theme.cardButtonColor}}))},n.saveName=function(e){n.state.name!==e&&(n.props.updateNode({uuid:n.props.node.uuid,name:e}),n.props.node.name=e,n.setState({name:e}))},n.state={name:n.props.node.name,editable:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"nodelist-options",style:{backgroundColor:this.props.theme.cardHeaderColor}},this.renderTitle(),r.a.createElement("div",{className:"nodelist-options-buttons",style:{marginLeft:"auto"}},r.a.createElement("button",{onClick:function(t){return window.location.replace("/graph/"+e.props.node.uuid)}},r.a.createElement(fe.a,{type:"deployment-unit",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:this.props.theme.cardButtonColor}})),this.renderLightbulbIcon(),r.a.createElement("button",{onClick:function(t){e.props.showComponent("associationSider",e.props.node)}},r.a.createElement(fe.a,{type:"branches",theme:"outlined",style:{fontSize:"0.9rem",display:"block",textAlign:"center",padding:"0",color:this.props.theme.cardButtonColor}}))))}}]),a}(n.Component),He=Object(l.b)((function(e){return{theme:e.components.theme}}),{markNodeView:I,showComponent:z,updateNode:_})(Pe),Me=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(He,{node:e.node}),r.a.createElement(ee.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){t.preventDefault(),window.getSelection().removeAllRanges(),window.location.replace("/associations/".concat(e.node.uuid))},onContextMenu:function(t){t.preventDefault(),e.handleClick(),window.getSelection().removeAllRanges(),window.location.replace("/edit/text/".concat(e.node.uuid))}},r.a.createElement("p",{style:{color:e.theme.cardTextColor,backgroundColor:e.theme.cardBodyColor}},e.node.preview))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("p",null,e.node.preview)));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/edit/text/".concat(e.node.uuid),onContextMenu:function(e){window.getSelection().removeAllRanges()}},r.a.createElement("p",{style:{backgroundColor:e.theme.cardBodyColor}},e.node.preview))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/edit/text/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},qe=a(46),Be=a.n(qe),Ve=function(e){var t=!1,a=function(a){e.node.isFile&&(a.target.src=Be.a,t=!0)},o=function(a){!t&&e.node.isFile?(a.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid)):Object(g.a)()&&e.node.isFile?(a.preventDefault(),function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png"]),a.click(),a.onchange=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path,preview:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))}()):(a.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid)))},i=function(){return null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=Be.a),r.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),r.a.createElement(ee.a,{id:"image-node-card-link",to:"/associations/".concat(e.node.uuid),onClick:function(t){!function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))}(t)}},r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{objectFit:"cover",minHeight:"100%",width:"100%"}}))))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,i());case"preview":return r.a.createElement(n.Fragment,null,(null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=Be.a),r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{objectFit:"cover",minHeight:"100%",width:"100%"}}))));case"full":return r.a.createElement(n.Fragment,null,function(){null===e.node.path&&e.node.isFile&&(t=!0,e.node.preview=Be.a);var n="img-"+(JSON.parse(localStorage.getItem("image-sizing"))||"classic").replace(" ","-");return r.a.createElement("div",{className:"full-node-item "+n},r.a.createElement(Le,null),r.a.createElement("img",{src:e.node.preview,alt:e.node.name,onError:function(e){return a(e)},style:{cursor:"pointer"},onClick:function(e){o(e)}}))}());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},ze=function(e){var t=function(){return e.node.preview?r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover"},onError:function(e){return e.target.src=Be.a}}):r.a.createElement(fe.a,{type:"bulb",theme:"outlined",style:{fontSize:"5rem",color:"#b8b8b8",display:"block",textAlign:"center",padding:"4.3rem 3.3rem 3.3rem",height:"100%",backgroundColor:e.theme.cardBodyColor}})},a=function(){var a="img-"+(JSON.parse(localStorage.getItem("image-sizing"))||"classic").replace(" ","-");return r.a.createElement("div",{className:"full-node-item "+a},r.a.createElement(Le,null),e.node.path.includes("https://www.youtube.com/embed/")?r.a.createElement("iframe",{title:e.node.name,src:e.node.path,style:{width:"100%",height:"100vh",border:"none"},allowFullScreen:!0,sandbox:e.node.path.includes("https://www.youtube.com/embed/")?"allow-scripts allow-same-origin allow-popups":"",id:"node-card-iframe"}):r.a.createElement("a",{href:e.node.path,target:"_blank",rel:"noopener noreferrer"},t()))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),r.a.createElement("a",{href:"/associations/".concat(e.node.uuid),rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))},onContextMenu:function(t){t.preventDefault(),window.open(e.node.path,"_blank")},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},t())));case"preview":return r.a.createElement(n.Fragment,null,e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",width:"100%"}})):r.a.createElement(n.Fragment,null,r.a.createElement(fe.a,{type:"bulb",theme:"outlined",className:"node-card-icon"})));case"full":return r.a.createElement(n.Fragment,null,a());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ke=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},o=function(){return null===e.node.path&&(t=!0,e.node.preview=Be.a),e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):r.a.createElement(fe.a,{type:"thunderbolt",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"100%"},theme:"filled",className:"node-card-icon"})},i=function(){return r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(He,{node:e.node}),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(a){return function(a){t?Object(g.a)()?(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(a.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(a)},onContextMenu:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},o()))},c=function(){return r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)}},r.a.createElement(n.Fragment,null,o())))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,i());case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,o()));case"full":return r.a.createElement(n.Fragment,null,c());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ge=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},o=function(){return null===e.node.path&&(t=!0,e.node.preview=Be.a),e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):r.a.createElement(fe.a,{type:"sound",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"100%"},theme:"filled",className:"node-card-icon"})},i=function(){return r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(He,{node:e.node}),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},o()))},c=function(){return r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchFile(e.node.uuid))}(n)}},r.a.createElement(n.Fragment,null,o())))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,i());case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,o()));case"full":return r.a.createElement(n.Fragment,null,c());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Qe=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.click(),a.onchange=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},o=function(){return null===e.node.path&&(t=!0,e.node.preview=Be.a),e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):r.a.createElement(fe.a,{type:"gift",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"100%"},theme:"filled",className:"node-card-icon"})},i=function(){return r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(He,{node:e.node}),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},o()))},c=function(){return r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)}},r.a.createElement(n.Fragment,null,o())))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,i());case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,o()));case"full":return r.a.createElement(n.Fragment,null,c());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Je=function(e){var t=!1,a=function(t){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",["application/zip"]),a.click(),a.onchange=Object(w.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.files[0],t.next=3,e.updateNode({uuid:e.node.uuid,path:n.path});case 3:window.location.reload();case 4:case"end":return t.stop()}}),t)})))},o=function(){return null===e.node.path&&(t=!0,e.node.preview=Be.a),e.node.preview?r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})):r.a.createElement(fe.a,{type:"file-zip",style:{color:"white",backgroundColor:e.theme.cardBodyColor,height:"100%"},theme:"filled",className:"node-card-icon"})},i=function(){return r.a.createElement("li",{className:"nodelist-item"},r.a.createElement(He,{node:e.node}),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid)))}(n)},onContextMenu:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)},style:{width:"100%",backgroundColor:e.theme.cardBodyColor}},o()))},c=function(){return r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(n){return function(n){t?Object(g.a)()?(n.preventDefault(),a()):(n.preventDefault(),window.location.replace("/associations/".concat(e.node.uuid))):(n.preventDefault(),e.handleClick(),e.launchExplorer(e.node.uuid))}(n)}},r.a.createElement(n.Fragment,null,o())))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,i());case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,o()));case"full":return r.a.createElement(n.Fragment,null,c());case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},We=function(e){var t=function(t){t.preventDefault(),e.handleClick(),window.location.replace("/associations/".concat(e.node.uuid))};return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,function(){var a=0,n=null;switch(e.node.preview&&(a=(n=JSON.parse(e.node.preview)).length),a){case 0:return r.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},r.a.createElement(fe.a,{type:"branches",theme:"outlined",className:"node-card-icon"})));case 1:return r.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},r.a.createElement(Ze,{type:n[0].type,element:"preview",node:n[0]})));case 2:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Ze,{type:n[0].type,element:"preview",node:n[0]})),r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Ze,{type:n[1].type,element:"preview",node:n[1]})))));case 3:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",{className:"nodelist-collection-grid-full-width"},r.a.createElement(Ze,{type:n[0].type,element:"preview",node:n[0]})),r.a.createElement("li",null,r.a.createElement(Ze,{type:n[1].type,element:"preview",node:n[1]})),r.a.createElement("li",null,r.a.createElement(Ze,{type:n[2].type,element:"preview",node:n[2]})),r.a.createElement("li",null))));case 4:return r.a.createElement("li",{className:"nodelist-item nodelist-item-collection"},e.renderHeader(),r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(e){return t(e)},onContextMenu:function(e){}},r.a.createElement("ul",{className:"nodelist-collection-grid"},r.a.createElement("li",null,r.a.createElement(Ze,{type:n[0].type,element:"preview",node:n[0]})),r.a.createElement("li",null,r.a.createElement(Ze,{type:n[1].type,element:"preview",node:n[1]})),r.a.createElement("li",null,r.a.createElement(Ze,{type:n[2].type,element:"preview",node:n[2]})),r.a.createElement("li",null,r.a.createElement(Ze,{type:n[3].type,element:"preview",node:n[3]})))));default:return}}());case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null)));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/associations/".concat(e.node.uuid),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Xe=function(e){return r.a.createElement(n.Fragment,null,function(){switch(e.element){case"card":return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nodelist-item"},e.renderHeader(),r.a.createElement(ee.a,{to:"/profile/".concat(e.node.path),replace:!0,onClick:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/profile/".concat(e.node.path))},onContextMenu:function(t){t.preventDefault(),e.handleClick(),window.location.replace("/profile/".concat(e.node.path))}},r.a.createElement("img",{src:e.node.preview||X.a,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}}))));case"preview":return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:e.node.preview||X.a,alt:e.node.name,style:{objectFit:"cover",minHeight:"100%",width:"100%"}})));case"full":return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"full-node-item"},r.a.createElement(Le,null),r.a.createElement(ee.a,{to:"/profile/".concat(e.node.path)},r.a.createElement("p",null,e.node.name))));case"association-link":return r.a.createElement(n.Fragment,null,r.a.createElement(ee.a,{to:"/profile/".concat(e.node.path),onClick:function(t){return e.handleAssociatonClick()}},e.node.name));default:return}}())},Ye=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleNodeClick=function(){var e=n.props.node.uuid;if(n.props.activeNode){var t=n.props.activeNode.uuid;n.props.updateLinkStrength(e,t)}},n.handleAssociatonClick=function(){if(n.props.hideComponent("associationSider"),n.props.siderNodeUUID&&n.props.node.uuid){var e=n.props.siderNodeUUID,t=n.props.node.uuid;n.props.updateLinkStrength(e,t)}},n.toggleHeader=function(){n.state.showHeader?n.setState({showHeader:!1}):n.setState({showHeader:!0})},n.renderHeader=function(){return n.state.showHeader?r.a.createElement(He,{node:n.props.node}):void 0},n.renderNode=function(){switch(n.props.type){case"text":return r.a.createElement(Me,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,theme:n.props.theme});case"image":return r.a.createElement(Ve,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,updateNode:n.props.updateNode,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader,launchExplorer:n.props.openFileInExplorer,launchFile:n.props.launchFileNode});case"url":return r.a.createElement(ze,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader,theme:n.props.theme});case"file":return r.a.createElement(Ke,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchFile:n.props.launchFileNode,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"audio":return r.a.createElement(Ge,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchFile:n.props.launchFileNode,theme:n.props.theme});case"package":return r.a.createElement(Qe,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"zip":return r.a.createElement(Je,{element:n.props.element,node:n.props.node,updateNode:n.props.updateNode,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,launchExplorer:n.props.openFileInExplorer,theme:n.props.theme});case"collection":return r.a.createElement(We,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader});case"user":return r.a.createElement(Xe,{element:n.props.element,node:n.props.node,handleClick:n.handleNodeClick,handleAssociatonClick:n.handleAssociatonClick,toggleHeader:n.toggleHeader,renderHeader:n.renderHeader});default:return}},n.state={showHeader:!0},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.renderNode())}}]),a}(n.Component),Ze=Object(l.b)((function(e){return{theme:e.components.theme}}),{updateLinkStrength:V,hideComponent:K,launchFileNode:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.put("/file/launch",{uuid:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),v.a.error("There was a problem launching the file",1),window.location.reload();case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},openFileInExplorer:J,updateNode:_})(Ye),$e=function(e){return r.a.createElement("div",null,function(){if(e.node)return r.a.createElement(Ze,{type:e.node.type,element:"card",node:e.node,activeNode:e.activeNode,theme:e.theme})}())},et=(a(575),a(220)),tt=(a(577),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleDeleteAssociation=function(){var t=e.props.siderNodeUUID,a=e.props.association.uuid;if(e.props.activeNode)var n=e.props.activeNode.uuid;if(t&&a){e.props.deleteAssociationLink(t,a);var r=window.location.pathname;(r.includes("associations")||r.includes("/edit/text/"))&&n&&n===t&&e.props.removeFromAssociationList(a)}},e.renderAssociationLink=function(t){return r.a.createElement("li",{className:"association-list-item"},r.a.createElement(ke.a,{title:t.name,mouseLeaveDelay:0,mouseEnterDelay:.3},r.a.createElement(je.a,{icon:"close",shape:"circle",size:"small",onClick:function(t){return e.handleDeleteAssociation()}}),r.a.createElement(Ze,{type:t.type,element:"association-link",node:t,siderNodeUUID:e.props.siderNodeUUID})))},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderAssociationLink(this.props.association))}}]),a}(n.Component)),at=Object(l.b)((function(e){return{siderNodeUUID:e.components.componentList.associationSider.content.uuid,activeNode:e.nodes.activeNode}}),{hideComponent:K,deleteAssociationLink:function(e,t){return function(){var a=Object(w.a)(y.a.mark((function a(n){var r,o,i;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=JSON.parse(localStorage.getItem("link-mode")),o="bidirectional"===r?"yes":"no",n({type:"DELETE_ASSOCIATION_LINK"}),a.prev=3,a.next=6,k.delete("/association",{params:{nodeA:e,nodeB:t,bidirectional:o}});case 6:200===(i=a.sent).status&&n({type:"DELETE_ASSOCIATION_LINK_SUCCESS",deletedUUID:i.data.deletedUUID}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(3),n({type:"DELETE_ASSOCIATION_LINK_ERROR"}),v.a.error("There was a problem deleting the node",1);case 14:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()},removeFromAssociationList:function(e){return{type:"REMOVE_FROM_ASSOCIATION_LIST",deletedUUID:e}},updateLinkStrength:V})(tt),nt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).loadMore=function(){e.props.fetchAssociationLinkList({nodeUUID:e.props.nodeUUID,page:parseInt(e.props.page)+1})},e.renderAssociationLinkList=function(){var t=e.props.associations;return e.props.isFetching?r.a.createElement(we,{alignment:"top"}):null!==t?t.map((function(e){return r.a.createElement(at,{key:e.uuid,association:e})})):r.a.createElement(we,null)},e.renderLoadMoreButton=function(){var t=e.props.associations.length;if(e.props.totalItems>t)return r.a.createElement("li",{style:{listStyle:"none",marginTop:"0.5rem",textAlign:"center"}},r.a.createElement("button",{style:{margin:"1rem 0",width:"90%",backgroundColor:"#272727",color:"#16e998"},onClick:e.loadMore},"load more"))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchAssociationLinkList({nodeUUID:this.props.nodeUUID})}},{key:"render",value:function(){return r.a.createElement("ul",{id:"node-info-list",className:"association-list"},this.renderAssociationLinkList(),this.renderLoadMoreButton())}}]),a}(n.Component),rt=Object(l.b)((function(e){return{associations:e.associations.associationLinkList,page:e.associations.associationLinkListPage,totalItems:e.associations.totalLinkListItems,isFetching:e.associations.isFetching,activeNode:e.nodes.activeNode}}),{fetchAssociationLinkList:q})(nt),ot=et.a.Option,it=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).createAssociationHandler=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,r,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=n.props.associationSiderData.content,n.state.autocompleteValues.forEach((function(e){e.uuid===t&&a.push(e.uuid)})),o=a[0],i=r.uuid,e.next=7,n.props.createAssociation(i,o);case 7:n.setState({autocompleteOptions:[],autocompleteValues:null,inputText:""}),n.renderAutocompleteValues("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderAutocompleteValues=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.associationSiderData.content,n.setState({inputText:t}),e.next=4,n.props.associationAutocomplete({searchQuery:t||"",uuid:a.uuid});case 4:(o=e.sent)&&(n.setState({autocompleteValues:o.map((function(e){return e}))}),i=o.map((function(e){return r.a.createElement(ot,{key:e.uuid},r.a.createElement(ke.a,{title:e.name,mouseEnterDelay:.7,placement:"left"},e.name))})),n.setState({autocompleteOptions:i}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hideInfoSider=function(){n.setState({autocompleteOptions:null,autocompleteValues:null,inputText:""}),n.props.hideComponent("associationSider")},n.renderContent=function(){if(n.props.associationSiderData){var e=n.props.associationSiderData.content;return r.a.createElement("div",{className:"node-info-sider-container",style:{textAlign:"center"}},r.a.createElement(he.a,{className:"node-info-sider",placement:"right",closable:!1,title:e.name,onClose:function(){n.hideInfoSider(),document.documentElement.style.cssText=""},visible:n.props.associationSiderData.visible},r.a.createElement(et.a,{style:{width:200},placeholder:"link",value:n.state.inputText,onSearch:function(e){return n.renderAutocompleteValues(e)},onFocus:function(e){return n.renderAutocompleteValues(e)},onSelect:function(e){return n.createAssociationHandler(e)}},n.state.autocompleteOptions),r.a.createElement("br",null),r.a.createElement(rt,{nodeUUID:e.uuid})))}},n.state={autocompleteOptions:null,autocompleteValues:null,inputText:""},n}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderContent())}}]),a}(n.Component),ct=Object(l.b)((function(e){return{associationSiderData:e.components.componentList.associationSider,page:e.associations.associationLinkListPage}}),{signOut:H,hideComponent:K,createAssociation:function(e,t){return function(){var a=Object(w.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"CREATE_ASSOCIATION"}),a.next=4,k.put("/association",{nodeUUID:e,linkedNodeUUID:t});case 4:r=a.sent,n({type:"CREATE_ASSOCIATION_SUCCESS",nodes:r.data.association,nodeUUID:e}),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:"CREATE_ASSOCIATION_ERROR"}),v.a.error("Could not create association",1),p.push("/");case 13:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},fetchAssociationLinkList:q,associationAutocomplete:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("link-mode")),r="bidirectional"===n?"yes":"no",t.prev=2,t.next=5,k.get("/association/autocomplete",{params:{searchQuery:e.searchQuery,nodeUUID:e.uuid,bidirectional:r}});case 5:return o=t.sent,t.abrupt("return",o.data.nodes);case 9:t.prev=9,t.t0=t.catch(2),v.a.error("Could not search nodes",1),p.push("/");case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}})(it),lt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).infiniteScroll=function(e){o.endReached()&&!o.props.isFetching&&(o.setState({topOfPage:!1}),o.props.fetchNodes({page:o.props.query.page+1,type:o.props.query.type,searchQuery:o.props.query.searchQuery,sortType:o.props.query.sortType,sortOrder:o.props.query.sortOrder}))},o.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),r=e+window.pageYOffset;return window.pageYOffset<1&&!o.props.isFetching&&!o.state.topOfPage&&(o.setState({topOfPage:!0}),o.props.fetchNodes({page:1,type:o.props.query.type,searchQuery:o.props.query.searchQuery,sortType:o.props.query.sortType,sortOrder:o.props.query.sortOrder})),r>=n-1e3},o.renderNodeList=function(){var e=o.props.nodes;return null!==e&&e.length>0?e.map((function(e){return e.uuid?r.a.createElement($e,{key:e.uuid,node:e}):r.a.createElement(n.Fragment,null)})):o.props.query.searchQuery&&!o.props.isFetching?r.a.createElement("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",alignItems:"top",color:"white"}},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/search?q=".concat(encodeURIComponent(o.props.query.searchQuery)),style:{backgroundColor:"#272727",color:"white",borderRadius:"3px",padding:"0.5rem 1rem"}},"no matches ~ search google instead?")):void 0},o.state={topOfPage:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchNodes({page:1,type:this.props.query.type,searchQuery:this.props.query.searchQuery,sortType:this.props.query.sortType,sortOrder:this.props.query.sortOrder}),window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return r.a.createElement("div",{className:"nodelist-container"},r.a.createElement("ul",{className:"nodelist"},this.renderNodeList()),r.a.createElement(ct,null))}}]),a}(n.Component),st=Object(l.b)((function(e){return{nodes:e.nodes.nodeList,query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:A})(lt),ut=$.a.Content,dt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMainSider=function(){if(e.props.mainSider)return r.a.createElement(Se,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="home",document.body.style.removeProperty("overflow"),window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement($.a,{className:"page-layout"},r.a.createElement($.a,null,this.renderMainSider(),r.a.createElement(ut,{style:{minHeight:"100vh"}},r.a.createElement(Fe,null),r.a.createElement("div",{className:"list-container"},r.a.createElement(st,null)))))}}]),a}(n.Component),pt=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(dt),mt=(a(578),$.a.Content),ht=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleAvatarModal=function(){!1===n.state.avatarModal?n.setState({avatarModal:!0}):n.setState({avatarModal:!1})},n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(Se,null)},n.initializeFromUrlParams=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.match.params.username);case 2:(t=e.sent)?(n.setState({initialized:!0,username:t.username,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}),n.props.markNodeView({uuid:t.nodeId}),document.title=t.displayName):(v.a.error("there was a problem loading the user"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.state={initialized:!1,username:"",displayName:"",bio:"",avatar:null,header:null,avatarModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title=this.props.match.params.username,this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){document.body.style.removeProperty("overflow"),this.state.username!==this.props.match.params.username&&(document.title=this.props.match.params.username,this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.hideComponent("mainSider")}},{key:"render",value:function(){return this.state.initialized?r.a.createElement("div",{className:"profile-container"},this.renderMainSider(),r.a.createElement($.a,null,r.a.createElement(mt,{style:{marginBottom:"0"},className:"Profile"},r.a.createElement(Fe,null),r.a.createElement("div",{className:"profile-card"},r.a.createElement("button",{href:"/profile/".concat(this.state.username)},r.a.createElement("div",{className:"Profile-header"},r.a.createElement("img",{src:this.state.header||X.a,alt:"example",draggable:"false"}))),r.a.createElement("div",{className:"Profile-avatar"},r.a.createElement("img",{src:this.state.avatar||be.a,alt:"profile",draggable:"false",onClick:this.toggleAvatarModal})),r.a.createElement("div",{className:"Profile-info"},r.a.createElement("h2",{className:"Profile-displayName"},this.state.displayName,r.a.createElement("div",{className:"verified-sign-container"},r.a.createElement("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",className:"verified-sign"},r.a.createElement("g",null,r.a.createElement("path",{d:"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"}))))),r.a.createElement("i",{className:"Profile-username"},"@".concat(this.state.username)),r.a.createElement("p",{className:"Profile-bio"},this.state.bio))),r.a.createElement(me.a,{title:this.state.displayName,visible:this.state.avatarModal,className:"profile-modal",centered:!0,onCancel:this.toggleAvatarModal,closable:!1,footer:null,afterClose:function(){document.body.style.removeProperty("overflow")}},r.a.createElement("img",{src:this.state.avatar||be.a,alt:"avatar"})),r.a.createElement(st,null)))):r.a.createElement($.a,{className:"page-layout"},r.a.createElement($.a,null,r.a.createElement($.a,null,r.a.createElement(we,null))))}}]),a}(n.Component),ft=Object(l.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{fetchUserByUsername:M,showComponent:z,hideComponent:K,markNodeView:I})(ht),Et=(a(579),a(58)),gt=a(2),vt=(a(580),a(308)),bt=function(e){return r.a.createElement("div",null,r.a.createElement("li",{style:{color:"black",width:"100%",backgroundColor:"white",padding:"0.7rem 1.7rem",margin:0,borderBottom:"1px solid grey"}},r.a.createElement("div",{style:{float:"left",margin:0,padding:0}},e.name),function(){switch(e.type){case"string":return r.a.createElement("input",{type:"text",defaultValue:e.value,style:{float:"right",margin:0,padding:0},onBlur:function(){e.onChange(e.keyName,e.value)}});case"boolean":return r.a.createElement(vt.a,{checked:e.value,checkedChildren:"",unCheckedChildren:"",style:{float:"right",margin:0,padding:0},onBlur:function(t){e.onChange(e.keyName,!e.value)}});case"number":return r.a.createElement("input",{type:"text",defaultValue:e.value.toString(),style:{float:"right",margin:0,padding:0},onBlur:function(t){e.onChange(e.keyName,parseInt(t.target.value))}});case"dropdown":var t=e.optionObject.options.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}));return r.a.createElement("select",{name:e.keyName,id:e.keyName,defaultValue:e.value,style:{float:"right",margin:0,padding:0},onChange:function(t){e.onChange(e.keyName,t.target.value)}},t);default:return}}()))},yt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).loadOptions=function(){var e=Object(P.loadClientConfig)();n.setState({clientConfig:e}),g.a&&n.setState({backendConfig:g.a?JSON.parse(localStorage.getItem("backend-config")):null})},n.updateClientConfigValue=function(e,t){var a=n.state.clientConfig.map((function(a){return e===a.storageKey&&(a.value=t,localStorage.setItem(e,JSON.stringify(t)),"theme"===e&&n.props.loadTheme()),a}));n.setState({clientConfig:a})},n.updateBackendConfigValue=function(e,t){var a=n.state.backendConfig,r=Object(gt.a)(Object(gt.a)({},a),{},Object(Et.a)({},e,t));n.setState({backendConfig:r,showRestartModal:!0}),window.localStorage.setItem("backend-config",JSON.stringify(r)),window.api&&window.api.send("toMain",{action:"update-backend-config",updates:r})},n.restartHandler=function(){window.api&&window.api.send("toMain",{action:"restart-app"})},n.renderOptionsList=function(){if(n.state.clientConfig){var e=[],t=n.state.backendConfig,a=n.state.clientConfig;if(t)for(var o in t)P.backendConfigFilter.includes(o)||e.push(r.a.createElement(bt,{key:P.backendConfigMap[o].name,keyName:o,type:P.backendConfigMap[o].type,name:P.backendConfigMap[o].name,value:t[o],onChange:n.updateBackendConfigValue}));for(var i in a)"CONFIG_VERSION"!==i&&e.push(r.a.createElement(bt,{key:a[i].name,keyName:a[i].storageKey,name:a[i].name,value:a[i].value,type:a[i].type,optionObject:a[i],onChange:n.updateClientConfigValue}));return e}},n.state={topOfPage:!1,backendConfig:null,clientConfig:null,showRestartModal:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.api&&window.api.send("toMain",{action:"get-backend-config"}),this.loadOptions()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"options-list-container"},r.a.createElement("ul",{className:"options-list",style:{padding:0,margin:0}},this.renderOptionsList()),r.a.createElement(me.a,{title:"Restart Required",visible:this.state.showRestartModal,className:"delete-modal",centered:!0,onOk:this.restartHandler,afterClose:function(){return document.body.style.removeProperty("overflow")},okType:"danger",okText:"Restart",cancelText:"Wait",closable:!1,onCancel:function(){return e.setState({showRestartModal:!1})}},r.a.createElement("p",null,"This configuration change requires an app restart to take effect, do you want to restart now or wait?")))}}]),a}(n.Component),wt=Object(l.b)((function(e){return{query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:A,loadTheme:G})(yt),Ot=$.a.Content,Ct=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updatePassword=function(e,t){var a=t.setSubmitting;n.togglePasswordModal(),a(!1),n.props.changePassword(e)},n.handleClearNodes=function(e,t){var a=t.setSubmitting;n.toggleDeleteNodesModal(),a(!1),n.props.clearAllNodes(e)},n.togglePasswordModal=function(){n.state.showPasswordModal?n.setState({showPasswordModal:!1}):n.setState({showPasswordModal:!0})},n.toggleDeleteNodesModal=function(){n.state.showDeleteNodesModal?n.setState({showDeleteNodesModal:!1}):n.setState({showDeleteNodesModal:!0})},n.toggleExportModal=function(){n.state.showExportModal?n.setState({showExportModal:!1}):n.setState({showExportModal:!0})},n.exportHandler=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({showExportModal:!1}),e.next=3,n.props.generateInstanceExport();case 3:case"end":return e.stop()}}),e)}))),n.passwordModal=function(){return r.a.createElement(te.d,{initialValues:{oldPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:St,onSubmit:n.updatePassword,style:{display:"inline-block"}},(function(e){var t=e.isSubmitting;return r.a.createElement(te.c,{className:"password-modal-form"},r.a.createElement(te.b,{type:"password",name:"oldPassword",placeholder:"old password",className:"password-modal-field"}),r.a.createElement(te.a,{name:"oldPassword",component:"div"}),r.a.createElement(te.b,{type:"password",name:"newPassword",placeholder:"new password",className:"password-modal-field"}),r.a.createElement(te.a,{name:"newPassword",component:"div"}),r.a.createElement(te.b,{type:"password",name:"confirmNewPassword",placeholder:"confirm new password",className:"password-modal-field"}),r.a.createElement(te.a,{name:"confirmNewPassword",component:"div"}),r.a.createElement("button",{type:"submit",disabled:t},"change password"))}))},n.deleteAllNodesModal=function(){return r.a.createElement(te.d,{initialValues:{passwordValue:"",confirmPassword:""},validationSchema:Nt,onSubmit:n.handleClearNodes,style:{display:"inline-block"}},(function(e){var t=e.isSubmitting;return r.a.createElement(te.c,{className:"password-modal-form"},r.a.createElement("p",null,"Are you are you want to delete all nodes and associations for this user? This action is not reversible, it's recommended that u make a backup first."),r.a.createElement(te.b,{type:"password",name:"passwordValue",placeholder:"password",className:"password-modal-field"}),r.a.createElement(te.a,{name:"passwordValue",component:"div"}),r.a.createElement(te.b,{type:"password",name:"confirmPassword",placeholder:"confirm password",className:"password-modal-field"}),r.a.createElement(te.a,{name:"confirmPassword",component:"div"}),r.a.createElement("button",{type:"danger",disabled:t,style:{color:"white",backgroundColor:"red"}},"yes, i want to delete all my data"))}))},n.initializeFromUrlParams=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.fetchUserByUsername(n.props.user.username);case 2:(t=e.sent)&&!n.state.initialized?n.setState({initialized:!0,username:t.username,email:n.props.user.email,displayName:t.displayName,bio:t.bio,avatar:t.avatar,header:t.header}):(v.a.error("there was a problem loading your profile"),n.props.history.push("/"));case 4:case"end":return e.stop()}}),e)}))),n.setAvatar=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(w.a)(y.a.mark((function t(){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserAvatar(a);case 4:r=t.sent,n.setState({avatar:r}),t.next=9;break;case 8:v.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.setHeader=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.click(),e.onchange=Object(w.a)(y.a.mark((function t(){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=8;break}return t.next=4,n.props.updateUserHeader(a);case 4:r=t.sent,n.setState({header:r}),t.next=9;break;case 8:v.a.error("The file must be an image",1);case 9:case"end":return t.stop()}}),t)})))},n.renderDisplayName=function(){return r.a.createElement("input",{type:"text",className:"Options-display-name",placeholder:"Display Name",value:n.state.displayName,onChange:function(e){return n.saveDisplayName(e.target.value)}})},n.saveDisplayName=function(e){n.state.displayName!==e&&(n.props.updateUserInfo({username:n.props.user.username,displayName:e}),localStorage.setItem("displayName",e),document.title=e,n.setState({displayName:e}))},n.renderBio=function(){return r.a.createElement("textarea",{type:"text",className:"Options-bio",placeholder:"Bio",value:n.state.bio,onChange:function(e){return n.saveBio(e.target.value)}})},n.saveBio=function(e){n.state.bio!==e&&(n.props.updateUserInfo({username:n.props.user.username,bio:e}),n.setState({bio:e}))},n.renderUsername=function(){return r.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"username",value:n.state.username,onChange:function(e){return n.saveUsername(e.target.value)}})},n.saveUsername=function(e){n.state.username!==e&&(n.props.updateUsername(e),n.setState({username:e}))},n.renderEmail=function(){return r.a.createElement("input",{type:"text",className:"Options-standard-input",placeholder:"email",value:n.state.email,onChange:function(e){return n.saveEmail(e.target.value)}})},n.saveEmail=function(e){n.state.email!==e&&(n.props.updateEmail(e),n.setState({email:e}))},n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(Se,null)},n.state={showPasswordModal:!1,showDeleteNodesModal:!1,showExportModal:!1,initialized:!1,username:"",email:"",displayName:"",bio:"",avatar:null,header:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="Edit Profile",document.body.style.removeProperty("overflow"),this.initializeFromUrlParams()}},{key:"componentWillUnmount",value:function(){window.getSelection().removeAllRanges(),this.props.hideComponent("mainSider")}},{key:"render",value:function(){var e=this;return r.a.createElement($.a,{className:"Options-container"},this.renderMainSider(),r.a.createElement($.a,null,r.a.createElement(Ot,{className:"Options"},r.a.createElement(Fe,null),r.a.createElement("div",{className:"Options-card"},r.a.createElement("button",{onClick:this.setHeader},r.a.createElement("div",{className:"Options-header"},r.a.createElement(fe.a,{type:"camera",className:"Options-header-edit-icon"}),r.a.createElement("img",{src:this.state.header||X.a,alt:"example",draggable:"false"}))),r.a.createElement("button",{onClick:this.setAvatar},r.a.createElement("div",{className:"Options-avatar"},r.a.createElement(fe.a,{type:"camera",className:"Options-avatar-edit-icon"}),r.a.createElement("img",{src:this.state.avatar||be.a,alt:"profile",draggable:"false"}))),r.a.createElement("div",{className:"Options-info"},r.a.createElement(je.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){e.toggleExportModal()}},"export all user data"),r.a.createElement("br",null),r.a.createElement(je.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.togglePasswordModal()}},"change password"),r.a.createElement("br",null),r.a.createElement(je.a,{type:"danger",style:{margin:"0 0 10px",backgroundColor:"red",width:"10rem",padding:"0.5rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.toggleDeleteNodesModal()}},"delete all data"),r.a.createElement("br",null),this.renderDisplayName(),this.renderUsername(),this.renderEmail(),this.renderBio(),r.a.createElement(je.a,{type:"default",style:{margin:"0 0 10px",backgroundColor:"white",width:"4rem",display:"inline-block",textAlign:"center"},onClick:function(t){return e.props.history.push("/profile/".concat(e.props.user.username))}},"done"),r.a.createElement(me.a,{title:"change password",visible:this.state.showPasswordModal,className:"password-modal",centered:!0,afterClose:function(){return document.body.style.removeProperty("overflow")},footer:null,closable:!1,onCancel:this.togglePasswordModal},this.passwordModal()),r.a.createElement(me.a,{title:"delete all data",visible:this.state.showDeleteNodesModal,className:"password-modal",centered:!0,afterClose:function(){return document.body.style.removeProperty("overflow")},footer:null,closable:!1,onCancel:this.toggleDeleteNodesModal},this.deleteAllNodesModal()),r.a.createElement(me.a,{title:"Confirm Export",visible:this.state.showExportModal,className:"delete-modal",centered:!0,onOk:this.exportHandler,okText:"Generate",closable:!1,afterClose:function(){return document.body.style.removeProperty("overflow")},onCancel:this.toggleExportModal},r.a.createElement("p",null,"Generate export from ",r.a.createElement("b",null,this.props.user.displayName||"untitled"),"? The export will contain the profile picture, header, bio, along with all this user's nodes & associations, and appear in your favorites when it is completed. This may take a few minutes.")))),r.a.createElement(wt,null))))}}]),a}(n.Component),St=ae.object().shape({oldPassword:ae.string().required("old password is required"),newPassword:ae.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmNewPassword:ae.string().required("please confirm new password").oneOf([ae.ref("newPassword")],"Your passwords don't match")}),Nt=ae.object().shape({passwordValue:ae.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmPassword:ae.string().required("please confirm password").min(5,"Password has to be longer than 6 characters!").oneOf([ae.ref("passwordValue")],"Your passwords don't match")}),kt=Object(l.b)((function(e){return{user:e.auth.user,mainSider:e.components.componentList.mainSider}}),{fetchUserByUsername:M,updateUserInfo:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,k.patch("/user/info",{username:e.username,bio:e.bio,displayName:e.displayName});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),v.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateUserAvatar:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_AVATAR"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,k.patch("/user/avatar",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_AVATAR_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:v.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),v.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUserHeader:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_HEADER"}),t.prev=1,(n=new FormData).append("image",e),t.next=6,k.patch("/user/header",n,{headers:{"Content-Type":"multipart/form-data"}});case 6:if(200!==(r=t.sent).status){t.next=12;break}return a({type:"UPDATE_USER_HEADER_SUCCESS",url:r.data.url}),t.abrupt("return",r.data.url);case 12:v.a.error("There was a problem uploading the image",1);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a({type:"UPDATE_USER_HEADER_ERROR"}),v.a.error("There was a problem uploading the image",1);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},updateUsername:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,k.patch("/user/username",{username:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),v.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},updateEmail:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_USER_NODE"}),t.prev=1,t.next=4,k.patch("/user/email",{email:e});case 4:return n=t.sent,r=n.data.user,a({type:"UPDATE_USER_NODE_SUCCESS",user:r}),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),a({type:"UPDATE_USER_NODE_ERROR"}),v.a.error("Could not update user",1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},clearAllNodes:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.patch("/user/clear",{password:e.passwordValue});case 3:200===t.sent.status&&(p.push("/"),v.a.success("successfully deleted all your data :)",3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),v.a.error("There was a problem, please try again",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},changePassword:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.patch("/auth/password",{oldPassword:e.oldPassword,newPassword:e.newPassword});case 3:200===t.sent.status&&v.a.success("changed password",1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),v.a.error("Could not update password",1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},showComponent:z,generateInstanceExport:Q,hideComponent:K})(Ct),jt=(a(150),$.a.Content),xt=function(e){return r.a.createElement($.a,{className:"page-content"},r.a.createElement(jt,{style:{backgroundColor:"#272727"}},e.children))},At=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement($.a,{className:"page-layout"},r.a.createElement(Fe,null),r.a.createElement($.a,null,r.a.createElement(Se,null),r.a.createElement(xt,null)))}}]),a}(n.Component),Tt=a(152),_t=a(79),Dt=a.n(_t),Rt=(a(602),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).infiniteScroll=function(e){var t=o.props.associations.length;o.endReached()&&o.props.activeNode&&t<o.props.totalNodes&&!o.props.isFetching&&(o.setState({topOfPage:!1}),o.props.fetchAssociations({page:o.props.page+1,nodeUUID:o.props.activeNode.uuid}))},o.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),r=e+window.pageYOffset;return window.pageYOffset<1&&!o.props.isFetching&&!o.state.topOfPage&&(o.setState({topOfPage:!0}),o.props.fetchAssociations({page:1,nodeUUID:o.props.activeNode.uuid})),r>=n-733},o.renderNodes=function(){var e=o.props.associations;return null!==e?e.map((function(e){return r.a.createElement($e,{key:e.uuid,node:e,activeNode:o.props.activeNode})})):r.a.createElement(we,null)},o.renderList=function(){return o.props.totalNodes>0?r.a.createElement("ul",{style:{backgroundColor:"black"},className:"nodelist"},o.renderNodes()):o.props.totalNodes<0?r.a.createElement(n.Fragment,null):void 0},o.state={topOfPage:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderList(),r.a.createElement(ct,null))}}]),a}(n.Component)),It=Object(l.b)((function(e){return{associations:e.associations.associationList,isFetching:e.associations.isFetching,activeNode:e.nodes.activeNode,page:e.associations.associationListPage,totalNodes:e.associations.totalAssociationListItems}}),{fetchAssociations:B,getRandomNode:U})(Rt),Ft=(a(603),$.a.Content),Ut=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onPaste",value:function(e){var t=this,a=window.pageYOffset,n=window.pageXOffset;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),o=(new x.a).retain(r.index);this.container.style.top=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0).toString()+"px",this.container.focus(),setTimeout((function(){t.quill.selection.update(_t.Quill.sources.SILENT),o=o.concat(t.convert()).delete(r.length),t.quill.updateContents(o,_t.Quill.sources.USER),t.quill.setSelection(o.length()-r.length,_t.Quill.sources.SILENT);var e=t.quill.getBounds(o.length()-r.length,_t.Quill.sources.SILENT);t.quill.scrollingContainer.scrollTop=e.top,window.scrollTo({top:a,left:n})}),1)}}}]),a}(_t.Quill.import("modules/clipboard"));_t.Quill.register("modules/clipboard",Ut,!0);var Lt,Pt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).ref=function(e){n.quill=e},n.componentDidUpdate=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),t=n.props.match.params.uuid,n.state.uuid!==t&&!1===n.state.initializing&&(n.setState({text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!0,readOnly:!0}),n.regeneratePreview(),n.initializeFromUrlParams());case 3:case"end":return e.stop()}}),e)}))),n.initializeFromUrlParams=Object(w.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo({top:0}),t=n.props.match.params.uuid,n.setState({uuid:t}),e.next=5,n.props.setActiveNode(t);case 5:n.props.nodeData&&n.props.nodeData.content?(document.title=n.props.nodeData.name||"Untitled",a=JSON.parse(n.props.nodeData.content),n.setState({text:a,name:n.props.nodeData.name,initializing:!1,readOnly:!1}),n.props.markNodeView(n.props.nodeData),n.quill.getEditor().history.clear(),n.props.fetchAssociations({nodeUUID:t})):(n.setState({error:!0}),n.props.history.push("/"));case 6:case"end":return e.stop()}}),e)}))),n.expandHandler=function(){null===n.state.expanded?(n.setState({expanded:"expanded"}),localStorage.setItem("expanded","expanded")):(n.setState({expanded:null}),localStorage.removeItem("expanded"))},n.exitHandler=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.regeneratePreview(),n.props.history.push("/");case 2:case"end":return e.stop()}}),e)}))),n.regeneratePreview=function(){if(!n.state.deleting&&!n.state.error&&null!==n.state.uuid&&n.quill){var e=n.quill.getEditor().getText().substring(0,500);n.props.nodeData.preview=e,n.props.processTextNode({uuid:n.state.uuid,preview:e})}},n.selectLocalImage=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",["image/gif","image/jpg","image/jpeg","image/png"]),e.click(),e.onchange=Object(w.a)(y.a.mark((function t(){var a,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files[0],!/^image\//.test(a.type)){t.next=9;break}return t.next=4,n.props.createFileNode(a,null,JSON.stringify(n.props.nodeData));case 4:r=t.sent,o=n.quill.getEditor().getSelection(),n.quill.getEditor().insertEmbed(o.index,"image",r),t.next=10;break;case 9:v.a.error("The file must be an image",1);case 10:case"end":return t.stop()}}),t)})))},n.isImageUrl=function(e){return new RegExp(/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)?/gi).test(e)},n.matcherImageHandler=function(e,t){var a=e.src;return(new x.a).insert({image:a})},n.modules={toolbar:{container:[[{header:[1,2,3,4,5,!1]}],[{font:[]}],[{indent:"-1"},{indent:"+1"}],["bold","italic","underline","strike"],[{color:["","#fff","#bbbbbb","#df0000","#a80b44","#ff0062","#df1f95","#9933ff","#c06be2","#c8f0ae","#7fba00","#45d458","#31d697","#00dfd3","#67edff","#00a4ef","#4178df","#4d2ff7","#000080","#56007a","#007c25","#e2d58a","#f8cc52","#fff12b","#eb875f","#ff4500","#f40000","#a0390d"]},{background:[]}],[{align:null},{align:"center"},{align:"right"},{align:"justify"}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],["code-block","blockquote"],["link","image","video"],["clean"],["expand","exit"]],handlers:{expand:n.expandHandler,exit:n.exitHandler,image:n.selectLocalImage}},clipboard:{matchVisual:!1,matchers:[["img",n.matcherImageHandler]]}},n.allowedFormats=["header","font","indent","bold","italic","underline","strike","color","background","align","list","script","code-block","blockquote","link","image","video"],n.renderHeader=function(){if(null===n.state.expanded&&n.props.nodeData)return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"3rem"}},r.a.createElement(Fe,{fixed:!0})),r.a.createElement(Le,null))},n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(Se,null)},n.renderClassName=function(){return"quill-"+(JSON.parse(localStorage.getItem("quill-document-width"))||"").replace(" ","-")},n.state={text:"",name:"",expanded:localStorage.getItem("expanded"),uuid:null,error:null,initializing:!1,readOnly:!0},n.handleChange=n.handleChange.bind(Object(Tt.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.body.style.overflow="auto",document.body.style.height="100%",document.documentElement.style.height="100%",document.querySelectorAll(".ql-picker").forEach((function(e){e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()}))})),this.initializeFromUrlParams()}},{key:"handleChange",value:function(e,t,a,n){if(n.getContents()!==this.state.text&&!1===this.state.initializing){var r=JSON.stringify(n.getContents());this.props.editTextNode({uuid:this.props.match.params.uuid,content:r}),this.setState({text:e}),this.regeneratePreview()}}},{key:"componentWillUnmount",value:function(){document.body.style.overflow=null,document.body.style.height=null,document.documentElement.style.overflow=null,document.documentElement.style.height=null,window.getSelection().removeAllRanges()}},{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement($.a,{className:"page-layout"},r.a.createElement($.a,null,r.a.createElement($.a,null,this.renderHeader(),r.a.createElement(we,null)))):r.a.createElement($.a,{className:"page-layout"},this.renderMainSider(),r.a.createElement(Ft,{className:"text-editor-content "+this.state.expanded},this.renderHeader(),r.a.createElement(Dt.a,{value:this.state.text,style:{backgroundColor:this.props.theme?this.props.theme.textEditorBackground:null,color:this.props.theme?this.props.theme.textEditorText:null},className:this.renderClassName(),onChange:this.handleChange,modules:this.modules,ref:this.ref,readOnly:this.state.readOnly,formats:this.allowedFormats,scrollingContainer:"body",onBlur:function(t){t.target&&t.target.focus(),e.props.nodeData.preview.length<500&&e.regeneratePreview()}}),r.a.createElement(ct,null),r.a.createElement(It,null)))}}]),a}(n.Component),Ht=Object(l.b)((function(e){return{nodeData:e.nodes.activeNode,isLoading:e.nodes.isFetching,mainSider:e.components.componentList.mainSider,theme:e.components.theme}}),{editTextNode:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"EDIT_TEXT_NODE"}),t.prev=1,t.next=4,k.patch("/text",{uuid:e.uuid,content:e.content});case 4:a({type:"EDIT_TEXT_NODE_SUCCESS",node:e}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"EDIT_TEXT_NODE_ERROR"}),v.a.error("There was a problem saving your changes",1),p.push("/");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},processTextNode:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"PROCESS_TEXT_NODE"}),t.prev=1,t.next=4,k.patch("/text/process",{uuid:e.uuid,preview:e.preview});case 4:a({type:"PROCESS_TEXT_NODE_SUCCESS",node:e,preview:e.preview}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"PROCESS_TEXT_NODE_ERROR"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},createFileNode:function(e,t,a){return function(){var n=Object(w.a)(y.a.mark((function n(r){var o,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CREATE_FILE_NODE"}),n.prev=1,(o=new FormData).append("image",e),t&&o.append("name",t),a&&o.append("linkedNode",a),n.next=8,k.put("/file",o,{headers:{"Content-Type":"multipart/form-data"}});case 8:if(200!==(i=n.sent).status){n.next=14;break}return r({type:" CREATE_FILE_NODE_SUCCESS",payload:i.data.node}),n.abrupt("return",i.data.node.preview);case 14:v.a.error("There was a problem inserting the file",1);case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),r({type:"CREATE_FILE_NODE_ERROR"}),v.a.error("There was a problem inserting the file",1);case 21:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()},updateNode:_,setActiveNode:F,fetchAssociations:B,markNodeView:I})(Pt),Mt=$.a.Footer,qt=function(){return r.a.createElement(Mt,{className:"page-footer"})},Bt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement($.a,{className:"page-layout"},r.a.createElement(Fe,null),r.a.createElement($.a,null,r.a.createElement(xt,null,"Collections")),r.a.createElement(qt,null))}}]),a}(n.Component),Vt=$.a.Content,zt=$.a.Footer,Kt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t,a){(0,a.setSubmitting)(!1),e.props.createAccount(t)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="Create Account"}},{key:"render",value:function(){return r.a.createElement($.a,{className:"login-layout"},r.a.createElement(Vt,{className:"login-content"},r.a.createElement(Z.a,{className:"login-card"},r.a.createElement(te.d,{initialValues:{email:"",password:"",confirmPassword:""},validationSchema:Gt,onSubmit:this.onSubmit},(function(e){var t=e.isSubmitting;return r.a.createElement(te.c,{className:"login-form"},r.a.createElement("h1",{className:"login-title"},r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingRight:"0.5rem"}},"\u2728"),"create user",r.a.createElement("span",{role:"img","aria-label":"jsx-a11y/accessible-emoji",style:{paddingLeft:"0.5rem"}},"\u2728")),r.a.createElement(te.b,{type:"email",name:"email",placeholder:"email",className:"login-field"}),r.a.createElement(te.a,{name:"email",component:"div"}),r.a.createElement(te.b,{type:"username",name:"username",placeholder:"username",className:"login-field"}),r.a.createElement(te.a,{name:"username",component:"div"}),r.a.createElement(te.b,{type:"password",name:"password",placeholder:"password",className:"login-field"}),r.a.createElement(te.a,{name:"password",component:"div"}),r.a.createElement(te.b,{type:"password",name:"confirmPassword",placeholder:"confirm password",className:"login-field"}),r.a.createElement(te.a,{name:"confirmPassword",component:"div"}),r.a.createElement("button",{type:"submit",disabled:t,className:"login-submit"},"create account"),r.a.createElement(ee.a,{to:"/",style:{textAlign:"center"},className:"login-signup"},"back to login"))})))),r.a.createElement(zt,null))}}]),a}(n.Component),Gt=ae.object().shape({email:ae.string().email("E-mail is not valid!").required("email is required"),username:ae.string().required("username is required"),password:ae.string().min(5,"Password has to be longer than 6 characters!").required("password is required"),confirmPassword:ae.string().required("please confirm password").oneOf([ae.ref("password")],"Your passwords don't match")}),Qt=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{createAccount:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.api&&window.api.send("toMain",{action:"get-backend-config"}),Object(P.loadClientConfig)(),a({type:"CREATE_ACCOUNT"}),t.prev=3,t.next=6,k.put("/auth/signup",e);case 6:n=t.sent,localStorage.setItem("displayName",n.data.displayName),a({type:"CREATE_ACCOUNT_SUCCESS",payload:n.data}),p.push("/"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(3),a({type:"CREATE_ACCOUNT_ERROR"}),v.a.error("There was a problem creating the account",1),p.push("/");case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}})(Kt),Jt=(a(604),function(e){return r.a.createElement(n.Fragment,null,function(){if(e.node)return r.a.createElement(Ze,{type:e.node.type,element:"full",node:e.node})}())}),Wt=$.a.Content,Xt=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,window.scrollTo({top:0}),e.next=4,n.props.setActiveNode(t);case 4:return null!==n.props.activeNode&&n.props.markNodeView(n.props.activeNode),e.next=7,n.props.fetchAssociations({nodeUUID:t});case 7:null!==n.props.associations&&null!==n.props.activeNode?(n.setState({initialized:!0,uuid:t}),n.props.activeNode.type&&"collection"===n.props.activeNode.type&&n.regenerateCollectionPreview(n.props.activeNode,n.props.associations),document.title=n.props.activeNode.name):(v.a.error("there was a problem loading the associations"),n.props.history.push("/"));case 8:case"end":return e.stop()}}),e)}))),n.regenerateCollectionPreview=function(){var e=Object(w.a)(y.a.mark((function e(t,a){var r,o,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{if(t&&a){for(r=0,i=[];r<a.length&&i.length<4;)"collection"!==(o=a[r]).type&&"user"!==o.type&&i.push({type:o.type,preview:o.preview}),r++;n.props.updateNode({uuid:t.uuid,preview:JSON.stringify(i)})}}catch(c){n.props.history.push("/")}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.renderNode=function(){return null!==n.state.uuid&&n.state.uuid===n.props.activeNode.uuid?r.a.createElement(Jt,{node:n.props.activeNode}):r.a.createElement(we,null)},n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(Se,null)},n.state={initialized:!1,uuid:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"componentWillUnmount",value:function(){this.props.clearActiveNode()}},{key:"render",value:function(){return r.a.createElement($.a,{className:"page-layout"},this.renderMainSider(),r.a.createElement($.a,null,r.a.createElement(Wt,{style:{paddingTop:"0",minHeight:"100vh"}},r.a.createElement(Fe,null),r.a.createElement("div",{className:"list-container"},this.renderNode()),r.a.createElement(It,null))))}}]),a}(n.Component),Yt=Object(l.b)((function(e){return{associations:e.associations.associationList,isLoading:e.nodes.isFetching,activeNode:e.nodes.activeNode,mainSider:e.components.componentList.mainSider,isDeleting:e.nodes.isDeleting}}),{setActiveNode:F,clearActiveNode:L,fetchAssociations:B,markNodeView:I,updateNode:_})(Xt),Zt=a(313),$t=a(616),ea=a(618),ta=a(221),aa=a(612),na=a(617),ra=a(613),oa=a(614),ia=a(615),ca=a(218),la=(a(605),$.a.Content),sa=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).initializeFromUrlParams=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.uuid,e.next=3,n.props.fetchGraphData({anchorNode:t,type:n.props.query.type,searchQuery:n.props.query.searchQuery});case 3:if(null===n.props.graphData){e.next=13;break}if(n.setState({initialized:!0,uuid:t}),n.renderGraph(),!t){e.next=11;break}return e.next=9,n.props.setActiveNode(t);case 9:return e.next=11,n.props.fetchAssociations({nodeUUID:t});case 11:e.next=15;break;case 13:v.a.error("there was a problem loading the data"),n.props.history.push("/");case 15:case"end":return e.stop()}}),e)}))),n.renderMainSider=function(){if(n.props.mainSider)return r.a.createElement(Se,null)},n.renderAssociationSider=function(){if(n.props.associationSider)return r.a.createElement(ct,null)},n.renderAssociationList=function(){if(n.props.associations&&n.props.associations.length>0&&n.props.activeNode)return r.a.createElement(It,null)},n.renderGraph=Object(w.a)(y.a.mark((function e(){var t,a,r,o,i,c,l,s,u,d,p,m,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(e){var t=e.transform;u.attr("transform",t)},t=n.props.graphData.nodes,a=n.props.graphData.associations,r=window.innerHeight,o=window.innerWidth,33,i=Object(ta.a)(t).force("link",Object(aa.a)(a).id((function(e){return e.id}))).force("charge",Object(na.a)().strength(-7e5/t.length)).force("x",Object(ra.a)()).force("y",Object(oa.a)()).force("center",Object(ia.a)()),c=ca.b.scale(.17).translate(0,-15),l=Object(ca.a)().scaleExtent([.1,1.7]).on("zoom",h),s=Object(Zt.a)(n.node).append("svg").attr("class","graph-svg").attr("viewBox",[-o/2,-r/2,o,r]).on("contextmenu",(function(e){e.preventDefault()})),u=s.append("g"),d=u.append("g").attr("stroke","white").attr("stroke-opacity",.7).selectAll("line").data(a).join("line").attr("class","graph-link").attr("stroke-width",(function(e){return Math.sqrt(e.value)})),p=u.append("g").selectAll("circle").data(t).join("g").call(n.drag(i)).append("circle").attr("fill",n.props.theme.graphNodeColor).attr("stroke",n.props.theme.graphNodeBorderColor).on("contextmenu",(function(e,t){e.preventDefault(),window.location.replace("/graph/"+t.uuid)})).on("mouseover",(function(e,t){Object(Zt.a)(e.currentTarget).style("fill",n.props.theme.graphNodeHoverColor),Object(Zt.a)(e.currentTarget).style("stroke",n.props.theme.graphNodeBorderHoverColor),t.fx=null,t.fy=null})).on("mouseout",(function(e,t){Object(Zt.a)(e.currentTarget).style("fill",n.props.theme.graphNodeColor),Object(Zt.a)(e.currentTarget).style("stroke",n.props.theme.graphNodeBorderColor),t.fx=null,t.fy=null})).on("dblclick",(function(e,t){e.preventDefault(),"text"===t.type?window.location.replace("/edit/text/"+t.uuid):"user"===t.type?window.location.replace("/profile/".concat(n.props.user.username)):window.location.replace("/associations/"+t.uuid)})).attr("r",33).attr("cursor","none").attr("class","graph-node"),m=Object($t.a)("g g g").append("text").text((function(e){return e.name.substring(0,100)})).attr("font-size","0.8rem").attr("cursor","grab").attr("class","graph-text"),s.call(l).call(l.transform,c),i.on("tick",(function(){d.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),p.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),m.attr("x",(function(e){return e.x+33})).attr("y",(function(e){return e.y-33}))})),e.abrupt("return",s.node());case 17:case"end":return e.stop()}}),e)}))),n.drag=function(e){return Object(ea.a)().on("start",(function(t,a){Object(Zt.a)(this).raise(),document.body.style.cursor="none",t.active||e.alphaTarget(.3).restart(),a.fx=a.x,a.fy=a.y})).on("drag",(function(e,t){document.body.style.cursor="none",t.fx=e.x,t.fy=e.y})).on("end",(function(t,a){t.active||e.alphaTarget(0),window.setTimeout((function(){document.body.style.cursor="auto"}),333)}))},n.state={initialized:!1,uuid:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="constellation",this.state.initialized||this.initializeFromUrlParams()}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params.uuid;this.state.initialized&&this.state.uuid!==e&&(this.setState({initialized:!1}),this.initializeFromUrlParams())}},{key:"render",value:function(){var e=this;return r.a.createElement($.a,{className:"page-layout"},this.renderMainSider(),this.renderAssociationSider(),r.a.createElement($.a,null,r.a.createElement(la,{style:{paddingTop:"0"}},r.a.createElement(Fe,null),r.a.createElement("div",{className:"graph-container",ref:function(t){return e.node=t}}),this.renderAssociationList())))}}]),a}(n.Component),ua=Object(l.b)((function(e){return{associations:e.associations.associationList,user:e.auth.user,activeNode:e.nodes.activeNode,graphData:e.graph.graphData,loading:e.graph.isFetching,associationSider:e.components.componentList.associationSider,mainSider:e.components.componentList.mainSider,nodeList:e.nodes.nodeList,query:e.nodes.query,isFetching:e.nodes.isFetching,theme:e.components.theme}}),{fetchNodes:A,showComponent:z,fetchGraphData:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(a){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=JSON.parse(localStorage.getItem("graph-render-limit")))||(n=100),t.prev=2,a({type:"FETCH_GRAPH_DATA"}),t.next=6,k.get("/node/graph",{params:{anchorNode:e.anchorNode,type:e.type,searchQuery:e.searchQuery,graphRenderLimit:n}});case 6:r=t.sent,a({type:"FETCH_GRAPH_DATA_SUCCESS",payload:r.data,query:e}),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"FETCH_GRAPH_DATA_ERROR"}),a({type:"RESET_APP"}),v.a.error("Could not fetch items",1),p.push("/");case 16:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},fetchAssociations:B,setActiveNode:F})(sa),da=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var o;return Object(m.a)(this,a),(o=t.call(this,e)).infiniteScroll=function(e){o.endReached()&&!o.props.isFetching&&(o.setState({topOfPage:!1}),o.props.fetchNodes({page:o.props.query.page+1,type:o.props.query.type,searchQuery:o.props.query.searchQuery,pinned:!0,sortType:o.props.query.sortType,sortOrder:o.props.query.sortOrder}))},o.endReached=function(){var e="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,t=document.body,a=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight),r=e+window.pageYOffset;return window.pageYOffset<1&&!o.props.isFetching&&!o.state.topOfPage&&(o.setState({topOfPage:!0}),o.props.fetchNodes({page:1,type:o.props.query.type,searchQuery:o.props.query.searchQuery,pinned:!0,sortType:o.props.query.sortType,sortOrder:o.props.query.sortOrder})),r>=n-733},o.renderPinList=function(){var e=o.props.nodes;return null!==e?e.map((function(e){return e.uuid?r.a.createElement($e,{key:e.uuid,node:e}):r.a.createElement(n.Fragment,null)})):r.a.createElement(we,null)},o.state={topOfPage:!1},o}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchNodes({page:1,type:this.props.query.type,searchQuery:this.props.query.searchQuery,pinned:!0,sortType:this.props.query.sortType,sortOrder:this.props.query.sortOrder}),window.addEventListener("scroll",this.infiniteScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.infiniteScroll)}},{key:"render",value:function(){return r.a.createElement("div",{className:"nodelist-container"},r.a.createElement("ul",{className:"nodelist"},this.renderPinList()),r.a.createElement(ct,null))}}]),a}(n.Component),pa=Object(l.b)((function(e){return{nodes:e.nodes.nodeList,query:e.nodes.query,totalNodes:e.nodes.totalItems,isFetching:e.nodes.isFetching}}),{fetchNodes:A})(da),ma=$.a.Header,ha=Ae.a.Option,fa=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleMainSider=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.mainSider?n.props.hideComponent("mainSider"):n.props.showComponent("mainSider");case 1:case"end":return e.stop()}}),e)}))),n.commandHandler=function(){return n.props.searchNodes({searchQuery:n.state.input,type:n.state.nodeTypes})},n.renderSelectBefore=function(){return r.a.createElement(Ae.a,{showSearch:!0,showArrow:!1,value:n.state.nodeTypes,onChange:function(e){return n.setState({nodeTypes:e})}},r.a.createElement(ha,{value:"all"},"all"),r.a.createElement(ha,{value:"url"},"urls"),r.a.createElement(ha,{value:"text"},"text"),r.a.createElement(ha,{value:"file"},"file"),r.a.createElement(ha,{value:"image"},"images"),r.a.createElement(ha,{value:"collection"},"collections"))},n.state={input:n.props.query.searchQuery||"",nodeTypes:n.props.query.type||"all"},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ma,{className:"page-header"},r.a.createElement("ul",{className:"nav-list",style:{width:"auto",justifyContent:"left",marginLeft:"1.1rem"}},r.a.createElement("li",{className:"nav-item io-sider-button mobile-visible",style:{marginRight:"0"}},r.a.createElement(je.a,{type:"default",shape:"circle",onClick:function(t){return e.toggleMainSider()}},r.a.createElement(fe.a,{type:"bars",theme:"outlined"}))),r.a.createElement("li",{className:"nav-item io-sider-button",style:{marginRight:"0.5rem"}},r.a.createElement(ee.a,{type:"default",to:"/graph"},r.a.createElement(fe.a,{type:"deployment-unit",theme:"outlined"}))),r.a.createElement("li",{className:"nav-item io-sider-button"},r.a.createElement(ee.a,{type:"default",to:"/"},r.a.createElement(fe.a,{type:"home",theme:"filled"}))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("p",{style:{color:"grey",paddingLeft:"0.7rem"}},"favorites")))))}}]),a}(n.Component),Ea=Object(l.b)((function(e){return{user:e.auth.user,query:e.nodes.query,mainSider:e.components.componentList.mainSider,activeNode:e.nodes.activeNode}}),{signOut:H,searchNodes:T,createNode:D,createUrlNode:R,showComponent:z,hideComponent:K})(fa),ga=$.a.Content,va=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMainSider=function(){if(e.props.mainSider)return r.a.createElement(Se,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title="pins",document.body.style.removeProperty("overflow"),window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement($.a,{className:"page-layout"},r.a.createElement($.a,null,this.renderMainSider(),r.a.createElement(ga,{style:{minHeight:"100vh"}},r.a.createElement(Ea,null),r.a.createElement("div",{className:"list-container"},r.a.createElement(pa,null)))))}}]),a}(n.Component),ba=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn,mainSider:e.components.componentList.mainSider}}))(va),ya=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){localStorage.setItem("flash",!1),setInterval(this.props.getRandomNode(),50)}},{key:"render",value:function(){return r.a.createElement($.a,{style:{height:"100vh"}})}}]),a}(n.Component),wa=Object(l.b)(null,{getRandomNode:U})(ya),Oa=(a(606),function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleElectronSearch=function(e){window.api.send("toMain",{action:"search",query:e.target.value}),setTimeout((function(){n.searchInput.current.focus()}),100)},n.searchInput=r.a.createRef(),n}return Object(h.a)(a,[{key:"componentWillUnmount",value:function(){window.api.send("toMain",{action:"hide-search"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"electron-search"},r.a.createElement("input",{type:"text",autoFocus:!0,ref:this.searchInput,id:"electron-search-input",onKeyPress:function(t){"Enter"===t.key&&e.handleElectronSearch(t)}}))}}]),a}(n.Component)),Ca=Object(l.b)(null,{})(Oa),Sa=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderElectronSearch=function(){if(e.props.electronSearchData&&e.props.electronSearchData.visible)return r.a.createElement(Ca,null)},e.renderUpdateAvailableModal=function(){if(e.props.updateAvailable&&e.props.updateAvailable.visible)return r.a.createElement(me.a,{title:"A New Version Is Available!",visible:!0,className:"signout-modal",centered:!0,onOk:function(e){return window.open("http://www.synthona.net","_blank")},okType:"primary",okText:"Yes!",closable:!1,onCancel:function(){return e.props.hideComponent("updateAvailable")}},r.a.createElement("p",null,"An upgrade for Synthona is available. Do you want to know more?"))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.api&&window.api.receive("fromMain",(function(t){switch(t.message){case"search":return void(e.props.electronSearchData?e.props.hideComponent("electronSearch"):e.props.showComponent("electronSearch"));case"update-available":return void(e.props.updateAvailable?e.props.hideComponent("updateAvailable"):e.props.showComponent("updateAvailable"));case"search-all":return void(document.getElementById("nav-primary-search")?(window.scrollTo({top:0}),document.getElementById("nav-primary-search").select()):(p.push("/"),window.scrollTo({top:0}),document.getElementById("nav-primary-search").select()));case"latest-version":return void v.a.success("Synthona Is Up To Date",2);case"load-backend-config":return void window.localStorage.setItem("backend-config",JSON.stringify(t.config))}}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.renderElectronSearch(),this.renderUpdateAvailableModal())}}]),a}(n.Component),Na=Object(l.b)((function(e){return{electronSearchData:e.components.componentList.electronSearch,updateAvailable:e.components.componentList.updateAvailable}}),{showComponent:z,hideComponent:K})(Sa),ka=function(e){Object(f.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderElectronMessage=function(){if(Object(g.a)())return r.a.createElement(Na,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){null===this.props.isAuth&&this.props.isAuthenticated()}},{key:"render",value:function(){var e;return e=this.props.isAuth?r.a.createElement(Y,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:pt}),r.a.createElement(c.a,{path:"/profile/:username",exact:!0,component:ft}),r.a.createElement(c.a,{path:"/activity",exact:!0,component:At}),r.a.createElement(c.a,{path:"/collections",exact:!0,component:Bt}),r.a.createElement(c.a,{path:"/edit/text/:uuid",exact:!0,component:Ht}),r.a.createElement(c.a,{path:"/edit/profile",exact:!0,component:kt}),r.a.createElement(c.a,{path:"/associations/:uuid",exact:!0,component:Yt}),r.a.createElement(c.a,{path:"/graph/:uuid?",exact:!0,component:ua}),r.a.createElement(c.a,{path:"/pins",exact:!0,component:ba}),r.a.createElement(c.a,{path:"/random",exact:!0,component:wa}))):this.props.isFetchingAuth?r.a.createElement(we,null):r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:ce}),r.a.createElement(c.a,{path:"/create-account",exact:!0,component:Qt}),r.a.createElement(c.a,{path:"/forgot-password",exact:!0,component:pe}),r.a.createElement(c.a,{component:ce})),r.a.createElement("div",{style:{backgroundColor:"#272727"}},this.renderElectronMessage(),e)}}]),a}(n.Component),ja=Object(l.b)((function(e){return{user:e.auth.user,isFetchingAuth:e.auth.isFetching,isAuth:e.auth.isAuth}}),{isAuthenticated:function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REFRESH_AUTH"}),e.next=4,k.get("/auth");case 4:a=e.sent,t({type:"REFRESH_AUTH_SUCCESS",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"REFRESH_AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}})(ka),xa={isAuth:null,isFetching:null,user:null},Aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ACCOUNT":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"CREATE_ACCOUNT_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"CREATE_ACCOUNT_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_IN":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"SIGN_IN_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!1,user:t.payload,isAuth:!0});case"SIGN_IN_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"SIGN_OUT":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"SIGN_OUT_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"REFRESH_AUTH":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0,user:t.payload,isAuth:t.isAuth});case"REFRESH_AUTH_SUCCESS":return{isFetching:null,user:t.payload,isAuth:!0};case"REFRESH_AUTH_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:null,isAuth:!1});case"UPDATE_USER_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:t.user});case"UPDATE_USER_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"UPDATE_USER_AVATAR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_AVATAR_SUCCESS":return window.location.reload(),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:Object(gt.a)(Object(gt.a)({},e.user),{},{avatar:t.url})});case"UPDATE_USER_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"UPDATE_USER_HEADER":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"UPDATE_USER_HEADER_SUCCESS":return window.location.reload(),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,user:Object(gt.a)(Object(gt.a)({},e.user),{},{header:t.url})});case"UPDATE_USER_HEADER_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});default:return e}},Ta=a(40),_a={isFetching:null,isSaving:null,isDeleting:null,nodeList:[],totalItems:null,query:{page:1,sortOrder:localStorage.getItem("sortOrder")||"DESC",sortType:localStorage.getItem("sortType")||"recent"},activeNode:null},Da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NODES":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"FETCH_NODES_SUCCESS":var a;return a=t.query.page>e.query.page?Object(Ta.a)(e.nodeList):[],Object.values(t.payload.nodes).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,query:t.query,totalItems:t.payload.totalItems,nodeList:a});case"FETCH_NODES_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"SEARCH_NODES":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"SEARCH_NODES_SUCCESS":return a=[],Object.values(t.payload.nodes).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,query:{page:1,type:t.query.type,searchQuery:t.query.searchQuery,sortType:t.query.sortType,sortOrder:t.query.sortOrder},totalItems:t.payload.totalItems,nodeList:a});case"SEARCH_NODES_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"UPDATE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"UPDATE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"UPDATE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.result.uuid&&(e=t.result),e}))});case"UPDATE_ACTIVE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"UPDATE_ACTIVE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"UPDATE_ACTIVE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,activeNode:t.result.uuid===e.activeNode.uuid?t.result:e.activeNode,nodeList:e.nodeList.map((function(e){return e.uuid===t.result.uuid&&(e=t.result),e}))});case"EDIT_TEXT_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"EDIT_TEXT_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,activeNode:Object(gt.a)(Object(gt.a)({},e.activeNode),{},{content:t.node.content})});case"EDIT_TEXT_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"PROCESS_TEXT_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"PROCESS_TEXT_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,nodeList:e.nodeList.map((function(e){return e.uuid===t.node.uuid&&(e.preview=t.node.preview),e}))});case"PROCESS_TEXT_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"CREATE_FILE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case" CREATE_FILE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(Ta.a)(e.nodeList))});case"CREATE_FILE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"LINK_FILE_NODES":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"LINK_FILE_NODES_SUCCESS":var n=[];return t.nodes.forEach((function(e){n.push(e)})),Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,nodeList:[].concat(n,Object(Ta.a)(e.nodeList))});case"LINK_FILE_NODES_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"CREATE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"CREATE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,nodeList:[t.payload].concat(Object(Ta.a)(e.nodeList.filter((function(e){return e.uuid!==t.payload.uuid})))),activeNode:t.payload.node});case"CREATE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"MARK_NODE_VIEW":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var r;return r=e.nodeList.length<50?[t.node].concat(Object(Ta.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(Ta.a)(e.nodeList.filter((function(e){return e.uuid!==t.node.uuid}))),Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,nodeList:r});case"MARK_NODE_VIEW_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"CLEAR_ACTIVE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{activeNode:null});case"DELETE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isDeleting:!0});case"DELETE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{nodeList:Object(Ta.a)(e.nodeList.filter((function(e){return e.uuid!==t.uuid}))),isDeleting:null});case"DELETE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isDeleting:null});case"GENERATE_EXPORT":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"GENERATE_EXPORT_ERROR":case"GENERATE_EXPORT_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});default:return e}},Ra={componentList:{}},Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_COMPONENT":return Object(gt.a)(Object(gt.a)({},e),{},{componentList:Object(gt.a)(Object(gt.a)({},e.componentList),{},Object(Et.a)({},t.payload.type,{content:t.payload.content,visible:!0}))});case"HIDE_COMPONENT":return Object(gt.a)(Object(gt.a)({},e),{},{componentList:Object(gt.a)(Object(gt.a)({},e.componentList),{},Object(Et.a)({},t.payload.type,null))});case"LOAD_THEME":return Object(gt.a)(Object(gt.a)({},e),{},{theme:t.payload.theme});default:return e}},Fa={isFetching:null,isSaving:null,associationLinkList:[],associationList:[],totalLinkListItems:null,totalAssociationListItems:null,associationListPage:1,associationLinkListPage:1,activeNode:null},Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ASSOCIATIONS_LINK_LIST":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_LINK_LIST_SUCCESS":var a=Object(Ta.a)(e.associationLinkList);return Object.values(t.payload.associations).forEach((function(e){a.some((function(t){return t.uuid===e.uuid}))||a.push(e)})),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,totalLinkListItems:t.payload.totalItems,associationLinkList:a,associationLinkListPage:t.page||1});case"FETCH_ASSOCIATIONS_LINK_LIST_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATION_LINK_LIST":return Object(gt.a)(Object(gt.a)({},e),{},{associationLinkList:[]});case"FETCH_ASSOCIATIONS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"FETCH_ASSOCIATIONS_SUCCESS":var n=Object(Ta.a)(e.associationList);return Object.values(t.payload.associations).forEach((function(e){n.some((function(t){return t.uuid===e.uuid}))||n.push(e)})),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,totalAssociationListItems:t.payload.totalItems,associationList:n,associationListPage:t.page||1});case"FETCH_ASSOCIATIONS_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"RESET_ASSOCIATIONS":return Object(gt.a)(Object(gt.a)({},e),{},{associationList:[]});case"CREATE_ASSOCIATION":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"CREATE_ASSOCIATION_SUCCESS":var r;return r=t.nodeUUID&&t.nodes.associated.uuid===t.nodeUUID?t.nodes.original:t.nodes.associated,Lt=e.activeNode&&t.nodeUUID===e.activeNode.uuid?[r].concat(Object(Ta.a)(e.associationList)):Object(Ta.a)(e.associationList),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,associationLinkList:[r].concat(Object(Ta.a)(e.associationLinkList)),associationList:Lt,totalAssociationListItems:e.totalAssociationListItems+1});case"CREATE_ASSOCIATION_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"MARK_NODE_VIEW":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"MARK_NODE_VIEW_SUCCESS":var o=!!e.associationList.some((function(e){return e.uuid===t.node.uuid}))&&t.node;return Lt=o?[e.associationList.some((function(e){return e.uuid===t.node.uuid}))?t.node:null].concat(Object(Ta.a)(e.associationList.filter((function(e){return e.uuid!==t.node.uuid})))):Object(Ta.a)(e.associationList),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,associationList:Lt});case"MARK_NODE_VIEW_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"SET_ACTIVE_NODE":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"SET_ACTIVE_NODE_SUCCESS":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,activeNode:t.payload.node});case"SET_ACTIVE_NODE_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"DELETE_ASSOCIATION_LINK":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:!0});case"DELETE_ASSOCIATION_LINK_SUCCESS":var i=e.totalLinkListItems-1;return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,associationLinkList:Object(Ta.a)(e.associationLinkList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalLinkListItems:i});case"DELETE_ASSOCIATION_LINK_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null});case"REMOVE_FROM_ASSOCIATION_LIST":var c=e.totalAssociationListItems-1;return Object(gt.a)(Object(gt.a)({},e),{},{isSaving:null,associationList:Object(Ta.a)(e.associationList.filter((function(e){return e.uuid!==t.deletedUUID}))),totalAssociationListItems:c});default:return e}},La={isFetching:null,graphNodeList:[],graphAssociationList:[],totalItems:null,query:{page:1},activeNode:null,graphData:null},Pa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:La,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GRAPH_DATA":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:!0});case"FETCH_GRAPH_DATA_ERROR":return Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null});case"FETCH_GRAPH_DATA_SUCCESS":var a=[];t.payload.nodes.map((function(e){return a.push(e)}));var n=[];return t.payload.associations.map((function(e){var t={source:e.nodeId,target:e.linkedNode};return n.push(t)})),Object(gt.a)(Object(gt.a)({},e),{},{isFetching:null,graphData:{nodes:a,associations:n}});default:return e}},Ha=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,Ma=Object(s.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"RESET_APP"===t.type&&(e={}),{auth:Aa(e.auth,t),nodes:Da(e.nodes,t),components:Ia(e.components,t),associations:Ua(e.associations,t),graph:Pa(e.graph,t)}}),Ha(Object(s.a)(u.a)));i.a.render(r.a.createElement(l.a,{store:Ma},r.a.createElement(c.b,{history:p},r.a.createElement(ja,null))),document.querySelector("#root"))},67:function(e,t,a){e.exports=a.p+"static/media/cloud9.22dc8cce.png"},88:function(e,t,a){e.exports=a.p+"static/media/synthona-logo.b740604b.png"}},[[318,1,2]]]);
//# sourceMappingURL=main.233d2a5a.chunk.js.map